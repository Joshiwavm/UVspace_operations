System.register(["./chunk-vendor.js","./chunk-frameworks.js","./chunk-copy.js"],function(y){"use strict";var w,_,b,m,l,f,O,C,j,A,L;return{setters:[function(a){w=a.b,_=a.c,b=a.X,m=a.Y,l=a.j,f=a.t},function(a){O=a.t,C=a.aH,j=a.aI,A=a.aJ},function(a){L=a.c}],execute:function(){y({a:S,i:H,p:Q,s:T});var a=Object.defineProperty,U=Object.getOwnPropertyDescriptor,k=(e,t)=>a(e,"name",{value:t,configurable:!0}),F=(e,t,s,r)=>{for(var i=r>1?void 0:r?U(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(i=(r?o(t,s,i):o(i))||i);return r&&i&&a(t,s,i),i};let h=y("C",class extends HTMLElement{connectedCallback(){this.classList.add("mr-1","Truncate","d-inline-flex")}get lastToken(){return this.tokens[this.tokens.length-1]}get text(){return this.tokens.map(e=>e.text).join("")}get id(){return this.lastToken?this.lastToken.id:h.emptyScope.id}get type(){return this.lastToken?this.lastToken.type:h.emptyScope.type}get scope(){return this.hasScope()?{text:this.text,type:this.type,id:this.id,tokens:this.tokens}:h.emptyScope}set scope(e){this.renderTokens(e.tokens)}renderTokens(e){this.clearScope();const t=k(r=>m`${r.map(s)}`,"tokensTemplate"),s=k(r=>m`
        <command-palette-token
          data-text="${r.text}"
          data-id="${r.id}"
          data-type="${r.type}"
          data-value="${r.value}"
          data-targets="command-palette-scope.tokens"
          >${r.text}
        </command-palette-token>
      `,"tokenTemplate");b(t(e),this),this.hidden=!this.hasScope()}removeToken(){this.lastToken&&(this.lastRemovedToken=this.lastToken,this.lastToken.remove(),this.renderTokens(this.tokens))}hasScope(){return this.tokens.length>0&&this.type&&this.id&&this.text}clearScope(){for(const e of this.tokens)e.remove()}});k(h,"CommandPaletteScopeElement"),h.emptyScope={type:"",text:"",id:"",tokens:[]},F([w],h.prototype,"tokens",2),h=y("C",F([_],h));var N=Object.defineProperty,Z=Object.getOwnPropertyDescriptor,M=(e,t)=>N(e,"name",{value:t,configurable:!0}),p=(e,t,s,r)=>{for(var i=r>1?void 0:r?Z(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(i=(r?o(t,s,i):o(i))||i);return r&&i&&N(t,s,i),i};let c=class extends HTMLElement{constructor(){super(...arguments);this.titleNodes=[],this.rendered=!1,this.containerDataTarget="command-palette-item.containerElement",this.containerClasses="mx-2 px-2 rounded-2 d-flex flex-items-start no-underline border-0",this.containerStyle="padding-top: 10px; padding-bottom: 10px; cursor: pointer;"}renderOcticon(e){this.iconElement.innerHTML=e}renderAvatar(e,t){b(this.item.getAvatarTemplate(e,t),this.iconElement)}setItemAttributes(e){this.item=e,this.itemId=e.id,this.itemTitle=e.title,this.hint=e.getHint(),this.href=e.path,e.subtitle&&(this.subtitle=e.subtitle)}connectedCallback(){this.subtitle&&this.subtitleElement.removeAttribute("hidden"),this.titleNodes.length>0&&(this.titleElement.textContent="",this.titleElement.append(...this.titleNodes)),this.containerElement.addEventListener("click",e=>{this.item.activate(this.commandPalette,e)})}get commandPalette(){return this.closest("command-palette")}attributeChangedCallback(e,t,s){this.rendered&&(e==="data-selected"?(this.setSelectionAppearance(),this.item.select(this)):e==="data-item-title"?this.titleElement.textContent=s:e==="data-subtitle"&&(this.subtitleElement.textContent=s))}setSelectionAppearance(){this.selected?(this.containerElement.classList.add("color-bg-subtle"),this.hintText.hidden=!1):(this.containerElement.classList.remove("color-bg-subtle"),this.hintText.hidden=!0)}renderLinkContainer(e){return m`
      <a
        data-target="${this.containerDataTarget}"
        href="${this.href}"
        class="${this.containerClasses}"
        data-skip-pjax
        style="${this.containerStyle}"
      >
        ${e}
      </a>
    `}renderSpanContainer(e){return m`
      <span data-target="${this.containerDataTarget}" class="${this.containerClasses}" style="${this.containerStyle}">
        ${e}
      </span>
    `}renderElementContent(){return m`
      <div
        data-target="command-palette-item.iconElement"
        class="mr-2 color-fg-muted d-flex flex-items-center"
        style="height: 24px;"
      ></div>

      <div class="flex-1 d-flex flex-column" style="line-height: 24px;">
        <span data-target="command-palette-item.titleElement" class="color-fg-default f5">${this.itemTitle}</span>
        <p data-target="command-palette-item.subtitleElement" class="color-fg-muted f6 mb-0" hidden>${this.subtitle}</p>
      </div>

      <div class="color-fg-muted f5" style="line-height: 20px;">
        <span class="hide-sm" data-target="command-palette-item.hintText" style="line-height: 24px;" hidden
          >${this.hint}</span
        >
        <span
          class="hide-sm"
          data-target="command-palette-item.persistentHint"
          style="line-height: 24px;"
          hidden
        ></span>
      </div>
    `}renderElement(){const e=this.renderElementContent();b(M(()=>this.href?this.renderLinkContainer(e):this.renderSpanContainer(e),"itemTemplate")(),this),this.rendered=!0}};M(c,"CommandPaletteItemElement"),p([l],c.prototype,"itemId",2),p([l],c.prototype,"itemTitle",2),p([l],c.prototype,"subtitle",2),p([l],c.prototype,"selected",2),p([l],c.prototype,"score",2),p([f],c.prototype,"titleElement",2),p([f],c.prototype,"iconElement",2),p([f],c.prototype,"subtitleElement",2),p([f],c.prototype,"hintText",2),p([f],c.prototype,"persistentHint",2),p([f],c.prototype,"containerElement",2),c=p([_],c);var X=function(){for(var e=new Uint32Array(256),t=256;t--;){for(var s=t,r=8;r--;)s=s&1?3988292384^s>>>1:s>>>1;e[t]=s}return function(i){var n=-1;typeof i=="string"&&(i=function(E){for(var W=E.length,J=new Array(W),I=-1;++I<W;)J[I]=E.charCodeAt(I);return J}(i));for(var o=0,P=i.length;o<P;o++)n=n>>>8^e[n&255^i[o]];return(n^-1)>>>0}}(),Y=function(e){return e<0&&(e=4294967295+e+1),("0000000"+e.toString(16)).slice(-8)},q=y("c",function(e,t){var s=X(e);return t?Y(s):s}),K=Object.defineProperty,V=(e,t)=>K(e,"name",{value:t,configurable:!0});function T(e,t){const s=document.querySelector("command-palette"),r={command_palette_session_id:s.sessionId,command_palette_scope:s.query.scope.type,command_palette_mode:s.getMode(),command_palette_title:(t==null?void 0:t.group)==="commands"?t.title:"",command_palette_position:t==null?void 0:t.position,command_palette_score:t==null?void 0:t.score,command_palette_group:t==null?void 0:t.group,command_palette_item_type:t==null?void 0:t.itemType};O(`command_palette_${e}`,r)}V(T,"sendTrackingEvent");var ee=Object.defineProperty,D=(e,t)=>ee(e,"name",{value:t,configurable:!0});const g=class{constructor(e){this.position="",this.newTabOpened=!1;var t;this.data=e,this.title=e.title,this.priority=e.priority,this.score=e.score,this.subtitle=e.subtitle,this.typeahead=e.typeahead,this.scope=e.scope,this.icon=e.icon,this.group=(t=e.group)!=null?t:g.defaultGroupId}static register(e){this.itemClasses[e.itemType]=e}static get itemType(){return this.buildItemType(this.name)}static buildItemType(e){return e.replace(/([A-Z]($|[a-z]))/g,"_$1").replace(/(^_|_Item$)/g,"").toLowerCase()}static build(e){const t=this.itemClasses[e.action.type];if(t)return new t(e);throw new Error(`No item handler for ${e.action.type}`)}getAvatarTemplate(e,t){return m`<img src="${e}" alt="${t}" class="avatar avatar-1 avatar-small circle" />`}getHint(){return this.data.hint?m`<span class="hide-sm">${this.data.hint}</span>`:this.data.scope?m`<div class="hide-sm">
        <kbd class="hx_kbd">Enter</kbd>
        to jump to
        <kbd class="hx_kbd ml-1">Tab</kbd>
        to search
      </div>`:m`<span class="hide-sm">Jump to</span>`}get key(){return`${this.data.action.type}/${this.title}/${this.group}`}get id(){return this._id||(this._id=q(this.key).toString()),this._id}get path(){return this.data.action.path||""}get itemType(){return g.buildItemType(this.constructor.name)}select(e){}deselect(e){}activate(e,t){T(this.activateTrackingEventType,this)}get activateTrackingEventType(){return"activate"}activateLinkBehavior(e,t,s){const r=this.fetchRenderedItem().containerElement;s&&r instanceof HTMLAnchorElement?(this.newTabOpened=!0,this.openLinkInNewTab(r)):(this.newTabOpened=!1,this.openLink(r))}openLinkInNewTab(e){const t=e.getAttribute("target");e.setAttribute("target","_blank"),e.click(),t?e.setAttribute("target",t):e.removeAttribute("target")}openLink(e){e.click()}copy(e){T("copy",this)}render(e,t){const s=new c;return s.setItemAttributes(this),s.renderElement(),e&&(s.selected=!0),t&&(s.titleNodes=this.emphasizeTextMatchingQuery(this.title,t)),s}emphasizeTextMatchingQuery(e,t){if(!C(t,e))return[document.createTextNode(e)];const s=[];let r=0;for(const n of j(t,e)){if(e.slice(r,n)!==""){const E=document.createTextNode(e.slice(r,n));s.push(E)}r=n+1;const P=document.createElement("strong");P.textContent=e[n],s.push(P)}const i=document.createTextNode(e.slice(r));return s.push(i),s}fetchRenderedItem(){return document.querySelector(`command-palette-item[data-item-id="${this.id}"]`)}copyToClipboardAndAnnounce(e,t){L(e);const r=this.fetchRenderedItem().hintText,i=r.textContent;r.classList.add("color-fg-success"),r.textContent=t!=null?t:"Copied!",setTimeout(()=>{r.classList.remove("color-fg-success"),r.textContent=i},2e3)}calculateScore(e){const t=this.matchFields.map(s=>this.calculateScoreForField({field:s,queryText:e}));return Math.max(...t)}calculateScoreForField({field:e,queryText:t}){return C(t,e)?A(t,e):-1/0}get matchFields(){return this.data.match_fields?this.data.match_fields:[this.title]}autocomplete(e){const t=e.commandPaletteInput,s=this.typeahead;s!==void 0?t.value=t.overlay+s:t.value=t.overlay+this.title}clone(){const e=new g(this.data);return e._id=this.id,e}};let u=y("I",g);D(u,"Item"),u.topGroupId="top",u.defaultGroupId="default",u.footerGroupId="footer",u.helpGroupIds=["modes_help","filters_help"],u.commandGroupIds=["commands"],u.topGroupScoreThreshold=9,u.itemClasses={},u.defaultData={title:"",score:1,priority:1,action:{type:"",path:""},icon:{type:"octicon",id:"dash-color-fg-muted"},group:g.defaultGroupId};function H(e){u.register(e)}D(H,"item");var G=Object.defineProperty,te=Object.getOwnPropertyDescriptor,x=(e,t)=>G(e,"name",{value:t,configurable:!0}),v=(e,t,s,r)=>{for(var i=r>1?void 0:r?te(t,s):t,n=e.length-1,o;n>=0;n--)(o=e[n])&&(i=(r?o(t,s,i):o(i))||i);return r&&i&&G(t,s,i),i};const se="*";let d=class extends HTMLElement{constructor(){super(...arguments);this.mode="",this.src="",this.type="remote",this.debounce=0,this.scopeTypes="",this.hasCommands=!1}static registerProvider(e){const t=e.name.replace(/([A-Z]($|[a-z]))/g,"-$1").replace(/(^-|-Provider$)/g,"").toLowerCase();this.providerClasses[t]=e}static getProvider(e){const t=this.providerClasses[e];if(t)return t;throw new Error(`${e} provider not found`)}get provider(){if(!this._provider){const e=d.getProvider(this.type);this._provider=new e(this)}return this._provider}get octicons(){return this.provider.octicons}async prefetch(e){await this.provider.prefetch(e)}async fetch(e,t){return this.lastFetchQuery=e,await re(this.debounce),this.lastFetchQuery!==e?{results:[]}:this.provider.fetch(e,t)}isWildcardMode(){return this.mode===se}appliesTo(e){return(this.mode===e.mode||this.isWildcardMode())&&S(e,this.scopeTypes)}};x(d,"CommandPaletteProviderElement"),d.providerClasses={},v([l],d.prototype,"mode",2),v([l],d.prototype,"src",2),v([l],d.prototype,"type",2),v([l],d.prototype,"debounce",2),v([l],d.prototype,"scopeTypes",2),v([l],d.prototype,"hasCommands",2),d=v([_],d);function Q(e){d.registerProvider(e)}x(Q,"provider");function S(e,t){return t?t&&JSON.parse(t).includes(e.scope.type):!0}x(S,"isEnabledScopeType");const re=x(e=>new Promise(t=>setTimeout(t,e)),"delay");var R=Object.defineProperty,z=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable,B=(e,t,s)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,oe=(e,t)=>{for(var s in t||(t={}))ie.call(t,s)&&B(e,s,t[s]);if(z)for(var s of z(t))ne.call(t,s)&&B(e,s,t[s]);return e},ae=(e,t)=>R(e,"name",{value:t,configurable:!0});class ${constructor(t,s,{scope:r,subjectId:i,subjectType:n,returnTo:o}={}){this.queryText=t,this.queryMode=s,this.scope=r!=null?r:h.emptyScope,this.subjectId=i,this.subjectType=n,this.returnTo=o}get text(){return this.queryText}get mode(){return this.queryMode}get path(){return this.buildPath(this)}buildPath(t,s=t.text){return`scope:${t.scope.type}-${t.scope.id}/mode:${t.mode}/query:${s}`}clearScope(){this.scope=h.emptyScope}hasScope(){return this.scope.id!==h.emptyScope.id}isBlank(){return this.text.trim().length===0}isPresent(){return!this.isBlank()}immutableCopy(){const t=this.text,s=this.mode,r=oe({},this.scope);return new $(t,s,{scope:r,subjectId:this.subjectId,subjectType:this.subjectType,returnTo:this.returnTo})}hasSameScope(t){return this.scope.id===t.scope.id}params(){const t=new URLSearchParams;return this.isPresent()&&t.set("q",this.text),this.hasScope()&&t.set("scope",this.scope.id),this.mode&&t.set("mode",this.mode),this.returnTo&&t.set("return_to",this.returnTo),this.subjectId&&t.set("subject",this.subjectId),t}}y("Q",$),ae($,"Query")}}});
//# sourceMappingURL=chunk-query-1b6edbd8.js.map
