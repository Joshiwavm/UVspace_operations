System.register(["./chunk-vendor.js","./chunk-frameworks.js"],function(){"use strict";var je,G,Ne,ee,se,Be,ze,ct,He,dt,xe,pt,ft;return{setters:[function(re){je=re.a5,G=re.a6,Ne=re.a7,ee=re.a,se=re.o,Be=re.f,ze=re.k,ct=re.a8},function(re){He=re.a6,dt=re.aD,xe=re.a9,pt=re.C,ft=re.a1}],execute:function(){var re=je(function(w,N){/*!
 * Braintree End-to-End Encryption Library
 * https://www.braintreepayments.com
 * Copyright (c) 2009-2014 Braintree, a division of PayPal, Inc.
 *
 * JSBN
 * Copyright (c) 2005  Tom Wu
 *
 * Both Licensed under the MIT License.
 * http://opensource.org/licenses/MIT
 *
 * ASN.1 JavaScript decoder
 * Copyright (c) 2008-2009 Lapo Luchini <lapo@lapo.it>
 * Licensed under the ISC License.
 * http://opensource.org/licenses/ISC
 */(function(){function t(u,l){u instanceof t?(this.enc=u.enc,this.pos=u.pos):(this.enc=u,this.pos=l)}t.prototype.get=function(u){if(u==null&&(u=this.pos++),u>=this.enc.length)throw"Requesting byte offset "+u+" on a stream of length "+this.enc.length;return this.enc[u]},t.prototype.hexDigits="0123456789ABCDEF",t.prototype.hexByte=function(u){return this.hexDigits.charAt(u>>4&15)+this.hexDigits.charAt(u&15)},t.prototype.hexDump=function(u,l){for(var d="",f=u;f<l;++f)switch(d+=this.hexByte(this.get(f)),f&15){case 7:d+="  ";break;case 15:d+=`
`;break;default:d+=" "}return d},t.prototype.parseStringISO=function(u,l){for(var d="",f=u;f<l;++f)d+=String.fromCharCode(this.get(f));return d},t.prototype.parseStringUTF=function(u,l){for(var d="",f=0,E=u;E<l;){var f=this.get(E++);f<128?d+=String.fromCharCode(f):f>191&&f<224?d+=String.fromCharCode((f&31)<<6|this.get(E++)&63):d+=String.fromCharCode((f&15)<<12|(this.get(E++)&63)<<6|this.get(E++)&63)}return d},t.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,t.prototype.parseTime=function(u,l){var d=this.parseStringISO(u,l),f=this.reTime.exec(d);return f?(d=f[1]+"-"+f[2]+"-"+f[3]+" "+f[4],f[5]&&(d+=":"+f[5],f[6]&&(d+=":"+f[6],f[7]&&(d+="."+f[7]))),f[8]&&(d+=" UTC",f[8]!="Z"&&(d+=f[8],f[9]&&(d+=":"+f[9]))),d):"Unrecognized time: "+d},t.prototype.parseInteger=function(u,l){var d=l-u;if(d>4){d<<=3;var f=this.get(u);if(f==0)d-=8;else for(;f<128;)f<<=1,--d;return"("+d+" bit)"}for(var E=0,O=u;O<l;++O)E=E<<8|this.get(O);return E},t.prototype.parseBitString=function(u,l){var d=this.get(u),f=(l-u-1<<3)-d,E="("+f+" bit)";if(f<=20){var O=d;E+=" ";for(var M=l-1;M>u;--M){for(var q=this.get(M),B=O;B<8;++B)E+=q>>B&1?"1":"0";O=0}}return E},t.prototype.parseOctetString=function(u,l){var d=l-u,f="("+d+" byte) ";d>20&&(l=u+20);for(var E=u;E<l;++E)f+=this.hexByte(this.get(E));return d>20&&(f+=String.fromCharCode(8230)),f},t.prototype.parseOID=function(u,l){for(var d,f=0,E=0,O=u;O<l;++O){var M=this.get(O);f=f<<7|M&127,E+=7,M&128||(d==null?d=parseInt(f/40)+"."+f%40:d+="."+(E>=31?"bigint":f),f=E=0),d+=String.fromCharCode()}return d};function n(u,l,d,f,E){this.stream=u,this.header=l,this.length=d,this.tag=f,this.sub=E}n.prototype.typeName=function(){if(this.tag==null)return"unknown";var u=this.tag>>6;this.tag>>5&1;var l=this.tag&31;switch(u){case 0:switch(l){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+l.toString(16)}case 1:return"Application_"+l.toString(16);case 2:return"["+l+"]";case 3:return"Private_"+l.toString(16)}},n.prototype.content=function(){if(this.tag==null)return null;var u=this.tag>>6;if(u!=0)return this.sub==null?null:"("+this.sub.length+")";var l=this.tag&31,d=this.posContent(),f=Math.abs(this.length);switch(l){case 1:return this.stream.get(d)==0?"false":"true";case 2:return this.stream.parseInteger(d,d+f);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(d,d+f);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(d,d+f);case 6:return this.stream.parseOID(d,d+f);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(d,d+f);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(d,d+f);case 23:case 24:return this.stream.parseTime(d,d+f)}return null},n.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(this.sub==null?"null":this.sub.length)+"]"},n.prototype.print=function(u){if(u==null&&(u=""),document.writeln(u+this),this.sub!=null){u+="  ";for(var l=0,d=this.sub.length;l<d;++l)this.sub[l].print(u)}},n.prototype.toPrettyString=function(u){u==null&&(u="");var l=u+this.typeName()+" @"+this.stream.pos;if(this.length>=0&&(l+="+"),l+=this.length,this.tag&32?l+=" (constructed)":(this.tag==3||this.tag==4)&&this.sub!=null&&(l+=" (encapsulates)"),l+=`
`,this.sub!=null){u+="  ";for(var d=0,f=this.sub.length;d<f;++d)l+=this.sub[d].toPrettyString(u)}return l},n.prototype.posStart=function(){return this.stream.pos},n.prototype.posContent=function(){return this.stream.pos+this.header},n.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},n.decodeLength=function(u){var l=u.get(),d=l&127;if(d==l)return d;if(d>3)throw"Length over 24 bits not supported at position "+(u.pos-1);if(d==0)return-1;l=0;for(var f=0;f<d;++f)l=l<<8|u.get();return l},n.hasContent=function(u,l,d){if(u&32)return!0;if(u<3||u>4)return!1;var f=new t(d);u==3&&f.get();var E=f.get();if(E>>6&1)return!1;try{var O=n.decodeLength(f);return f.pos-d.pos+O==l}catch(M){return!1}},n.decode=function(u){u instanceof t||(u=new t(u,0));var l=new t(u),d=u.get(),f=n.decodeLength(u),E=u.pos-l.pos,O=null;if(n.hasContent(d,f,u)){var M=u.pos;if(d==3&&u.get(),O=[],f>=0){for(var q=M+f;u.pos<q;)O[O.length]=n.decode(u);if(u.pos!=q)throw"Content size is not correct for container starting at offset "+M}else try{for(;;){var B=n.decode(u);if(B.tag==0)break;O[O.length]=B}f=M-u.pos}catch(F){throw"Exception while decoding undefined length content: "+F}}else u.pos+=f;return new n(l,E,f,d,O)};var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="=";function s(u){var l,d,f="";for(l=0;l+3<=u.length;l+=3)d=parseInt(u.substring(l,l+3),16),f+=e.charAt(d>>6)+e.charAt(d&63);for(l+1==u.length?(d=parseInt(u.substring(l,l+1),16),f+=e.charAt(d<<2)):l+2==u.length&&(d=parseInt(u.substring(l,l+2),16),f+=e.charAt(d>>2)+e.charAt((d&3)<<4));(f.length&3)>0;)f+=c;return f}function r(u){var l="",d,f=0,E,O;for(d=0;d<u.length&&u.charAt(d)!=c;++d)O=e.indexOf(u.charAt(d)),!(O<0)&&(f==0?(l+=P(O>>2),E=O&3,f=1):f==1?(l+=P(E<<2|O>>4),E=O&15,f=2):f==2?(l+=P(E),l+=P(O>>2),E=O&3,f=3):(l+=P(E<<2|O>>4),l+=P(O&15),f=0));return f==1&&(l+=P(E<<2)),l}function i(u){var l=r(u),d,f=new Array;for(d=0;2*d<l.length;++d)f[d]=parseInt(l.substring(2*d,2*d+2),16);return f}var o;function a(u,l,d){u!=null&&(typeof u=="number"?this.fromNumber(u,l,d):l==null&&typeof u!="string"?this.fromString(u,256):this.fromString(u,l))}function p(){return new a(null)}function m(u,l,d,f,E,O){for(;--O>=0;){var M=l*this[u++]+d[f]+E;E=Math.floor(M/67108864),d[f++]=M&67108863}return E}function h(u,l,d,f,E,O){for(var M=l&32767,q=l>>15;--O>=0;){var B=this[u]&32767,F=this[u++]>>15,V=q*B+F*M;B=M*B+((V&32767)<<15)+d[f]+(E&1073741823),E=(B>>>30)+(V>>>15)+q*F+(E>>>30),d[f++]=B&1073741823}return E}function y(u,l,d,f,E,O){for(var M=l&16383,q=l>>14;--O>=0;){var B=this[u]&16383,F=this[u++]>>14,V=q*B+F*M;B=M*B+((V&16383)<<14)+d[f]+E,E=(B>>28)+(V>>14)+q*F,d[f++]=B&268435455}return E}navigator.appName=="Microsoft Internet Explorer"?(a.prototype.am=h,o=30):navigator.appName!="Netscape"?(a.prototype.am=m,o=26):(a.prototype.am=y,o=28),a.prototype.DB=o,a.prototype.DM=(1<<o)-1,a.prototype.DV=1<<o;var g=52;a.prototype.FV=Math.pow(2,g),a.prototype.F1=g-o,a.prototype.F2=2*o-g;var S="0123456789abcdefghijklmnopqrstuvwxyz",x=new Array,C,T;for(C="0".charCodeAt(0),T=0;T<=9;++T)x[C++]=T;for(C="a".charCodeAt(0),T=10;T<36;++T)x[C++]=T;for(C="A".charCodeAt(0),T=10;T<36;++T)x[C++]=T;function P(u){return S.charAt(u)}function v(u,l){var d=x[u.charCodeAt(l)];return d==null?-1:d}function _(u){for(var l=this.t-1;l>=0;--l)u[l]=this[l];u.t=this.t,u.s=this.s}function I(u){this.t=1,this.s=u<0?-1:0,u>0?this[0]=u:u<-1?this[0]=u+this.DV:this.t=0}function R(u){var l=p();return l.fromInt(u),l}function U(u,l){var d;if(l==16)d=4;else if(l==8)d=3;else if(l==256)d=8;else if(l==2)d=1;else if(l==32)d=5;else if(l==4)d=2;else{this.fromRadix(u,l);return}this.t=0,this.s=0;for(var f=u.length,E=!1,O=0;--f>=0;){var M=d==8?u[f]&255:v(u,f);if(M<0){u.charAt(f)=="-"&&(E=!0);continue}E=!1,O==0?this[this.t++]=M:O+d>this.DB?(this[this.t-1]|=(M&(1<<this.DB-O)-1)<<O,this[this.t++]=M>>this.DB-O):this[this.t-1]|=M<<O,O+=d,O>=this.DB&&(O-=this.DB)}d==8&&(u[0]&128)!=0&&(this.s=-1,O>0&&(this[this.t-1]|=(1<<this.DB-O)-1<<O)),this.clamp(),E&&a.ZERO.subTo(this,this)}function D(){for(var u=this.s&this.DM;this.t>0&&this[this.t-1]==u;)--this.t}function b(u){if(this.s<0)return"-"+this.negate().toString(u);var l;if(u==16)l=4;else if(u==8)l=3;else if(u==2)l=1;else if(u==32)l=5;else if(u==4)l=2;else return this.toRadix(u);var d=(1<<l)-1,f,E=!1,O="",M=this.t,q=this.DB-M*this.DB%l;if(M-- >0)for(q<this.DB&&(f=this[M]>>q)>0&&(E=!0,O=P(f));M>=0;)q<l?(f=(this[M]&(1<<q)-1)<<l-q,f|=this[--M]>>(q+=this.DB-l)):(f=this[M]>>(q-=l)&d,q<=0&&(q+=this.DB,--M)),f>0&&(E=!0),E&&(O+=P(f));return E?O:"0"}function A(){var u=p();return a.ZERO.subTo(this,u),u}function L(){return this.s<0?this.negate():this}function k(u){var l=this.s-u.s;if(l!=0)return l;var d=this.t;if(l=d-u.t,l!=0)return this.s<0?-l:l;for(;--d>=0;)if((l=this[d]-u[d])!=0)return l;return 0}function H(u){var l=1,d;return(d=u>>>16)!=0&&(u=d,l+=16),(d=u>>8)!=0&&(u=d,l+=8),(d=u>>4)!=0&&(u=d,l+=4),(d=u>>2)!=0&&(u=d,l+=2),(d=u>>1)!=0&&(u=d,l+=1),l}function X(){return this.t<=0?0:this.DB*(this.t-1)+H(this[this.t-1]^this.s&this.DM)}function ne(u,l){var d;for(d=this.t-1;d>=0;--d)l[d+u]=this[d];for(d=u-1;d>=0;--d)l[d]=0;l.t=this.t+u,l.s=this.s}function ae(u,l){for(var d=u;d<this.t;++d)l[d-u]=this[d];l.t=Math.max(this.t-u,0),l.s=this.s}function le(u,l){var d=u%this.DB,f=this.DB-d,E=(1<<f)-1,O=Math.floor(u/this.DB),M=this.s<<d&this.DM,q;for(q=this.t-1;q>=0;--q)l[q+O+1]=this[q]>>f|M,M=(this[q]&E)<<d;for(q=O-1;q>=0;--q)l[q]=0;l[O]=M,l.t=this.t+O+1,l.s=this.s,l.clamp()}function Z(u,l){l.s=this.s;var d=Math.floor(u/this.DB);if(d>=this.t){l.t=0;return}var f=u%this.DB,E=this.DB-f,O=(1<<f)-1;l[0]=this[d]>>f;for(var M=d+1;M<this.t;++M)l[M-d-1]|=(this[M]&O)<<E,l[M-d]=this[M]>>f;f>0&&(l[this.t-d-1]|=(this.s&O)<<E),l.t=this.t-d,l.clamp()}function ce(u,l){for(var d=0,f=0,E=Math.min(u.t,this.t);d<E;)f+=this[d]-u[d],l[d++]=f&this.DM,f>>=this.DB;if(u.t<this.t){for(f-=u.s;d<this.t;)f+=this[d],l[d++]=f&this.DM,f>>=this.DB;f+=this.s}else{for(f+=this.s;d<u.t;)f-=u[d],l[d++]=f&this.DM,f>>=this.DB;f-=u.s}l.s=f<0?-1:0,f<-1?l[d++]=this.DV+f:f>0&&(l[d++]=f),l.t=d,l.clamp()}function Re(u,l){var d=this.abs(),f=u.abs(),E=d.t;for(l.t=E+f.t;--E>=0;)l[E]=0;for(E=0;E<f.t;++E)l[E+d.t]=d.am(0,f[E],l,E,0,d.t);l.s=0,l.clamp(),this.s!=u.s&&a.ZERO.subTo(l,l)}function Ie(u){for(var l=this.abs(),d=u.t=2*l.t;--d>=0;)u[d]=0;for(d=0;d<l.t-1;++d){var f=l.am(d,l[d],u,2*d,0,1);(u[d+l.t]+=l.am(d+1,2*l[d],u,2*d+1,f,l.t-d-1))>=l.DV&&(u[d+l.t]-=l.DV,u[d+l.t+1]=1)}u.t>0&&(u[u.t-1]+=l.am(d,l[d],u,2*d,0,1)),u.s=0,u.clamp()}function Pe(u,l,d){var f=u.abs();if(!(f.t<=0)){var E=this.abs();if(E.t<f.t){l!=null&&l.fromInt(0),d!=null&&this.copyTo(d);return}d==null&&(d=p());var O=p(),M=this.s,q=u.s,B=this.DB-H(f[f.t-1]);B>0?(f.lShiftTo(B,O),E.lShiftTo(B,d)):(f.copyTo(O),E.copyTo(d));var F=O.t,V=O[F-1];if(V!=0){var W=V*(1<<this.F1)+(F>1?O[F-2]>>this.F2:0),z=this.FV/W,K=(1<<this.F1)/W,Q=1<<this.F2,te=d.t,pe=te-F,ie=l==null?p():l;for(O.dlShiftTo(pe,ie),d.compareTo(ie)>=0&&(d[d.t++]=1,d.subTo(ie,d)),a.ONE.dlShiftTo(F,ie),ie.subTo(O,O);O.t<F;)O[O.t++]=0;for(;--pe>=0;){var he=d[--te]==V?this.DM:Math.floor(d[te]*z+(d[te-1]+Q)*K);if((d[te]+=O.am(0,he,d,pe,0,F))<he)for(O.dlShiftTo(pe,ie),d.subTo(ie,d);d[te]<--he;)d.subTo(ie,d)}l!=null&&(d.drShiftTo(F,l),M!=q&&a.ZERO.subTo(l,l)),d.t=F,d.clamp(),B>0&&d.rShiftTo(B,d),M<0&&a.ZERO.subTo(d,d)}}}function De(u){var l=p();return this.abs().divRemTo(u,null,l),this.s<0&&l.compareTo(a.ZERO)>0&&u.subTo(l,l),l}function ye(u){this.m=u}function it(u){return u.s<0||u.compareTo(this.m)>=0?u.mod(this.m):u}function ke(u){return u}function ot(u){u.divRemTo(this.m,null,u)}function st(u,l,d){u.multiplyTo(l,d),this.reduce(d)}function at(u,l){u.squareTo(l),this.reduce(l)}ye.prototype.convert=it,ye.prototype.revert=ke,ye.prototype.reduce=ot,ye.prototype.mulTo=st,ye.prototype.sqrTo=at;function ut(){if(this.t<1)return 0;var u=this[0];if((u&1)==0)return 0;var l=u&3;return l=l*(2-(u&15)*l)&15,l=l*(2-(u&255)*l)&255,l=l*(2-((u&65535)*l&65535))&65535,l=l*(2-u*l%this.DV)%this.DV,l>0?this.DV-l:-l}function Y(u){this.m=u,this.mp=u.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<u.DB-15)-1,this.mt2=2*u.t}function J(u){var l=p();return u.abs().dlShiftTo(this.m.t,l),l.divRemTo(this.m,null,l),u.s<0&&l.compareTo(a.ZERO)>0&&this.m.subTo(l,l),l}function ue(u){var l=p();return u.copyTo(l),this.reduce(l),l}function ve(u){for(;u.t<=this.mt2;)u[u.t++]=0;for(var l=0;l<this.m.t;++l){var d=u[l]&32767,f=d*this.mpl+((d*this.mph+(u[l]>>15)*this.mpl&this.um)<<15)&u.DM;for(d=l+this.m.t,u[d]+=this.m.am(0,f,u,l,0,this.m.t);u[d]>=u.DV;)u[d]-=u.DV,u[++d]++}u.clamp(),u.drShiftTo(this.m.t,u),u.compareTo(this.m)>=0&&u.subTo(this.m,u)}function be(u,l){u.squareTo(l),this.reduce(l)}function fe(u,l,d){u.multiplyTo(l,d),this.reduce(d)}Y.prototype.convert=J,Y.prototype.revert=ue,Y.prototype.reduce=ve,Y.prototype.mulTo=fe,Y.prototype.sqrTo=be;function we(){return(this.t>0?this[0]&1:this.s)==0}function de(u,l){if(u>4294967295||u<1)return a.ONE;var d=p(),f=p(),E=l.convert(this),O=H(u)-1;for(E.copyTo(d);--O>=0;)if(l.sqrTo(d,f),(u&1<<O)>0)l.mulTo(f,E,d);else{var M=d;d=f,f=M}return l.revert(d)}function Fe(u,l){var d;return u<256||l.isEven()?d=new ye(l):d=new Y(l),this.exp(u,d)}a.prototype.copyTo=_,a.prototype.fromInt=I,a.prototype.fromString=U,a.prototype.clamp=D,a.prototype.dlShiftTo=ne,a.prototype.drShiftTo=ae,a.prototype.lShiftTo=le,a.prototype.rShiftTo=Z,a.prototype.subTo=ce,a.prototype.multiplyTo=Re,a.prototype.squareTo=Ie,a.prototype.divRemTo=Pe,a.prototype.invDigit=ut,a.prototype.isEven=we,a.prototype.exp=de,a.prototype.toString=b,a.prototype.negate=A,a.prototype.abs=L,a.prototype.compareTo=k,a.prototype.bitLength=X,a.prototype.mod=De,a.prototype.modPowInt=Fe,a.ZERO=R(0),a.ONE=R(1);function Ce(u,l){return new a(u,l)}function Ue(u,l){if(l<u.length+11)throw new Error("Message too long for RSA");for(var d=new Array,f=u.length-1;f>=0&&l>0;){var E=u.charCodeAt(f--);E<128?d[--l]=E:E>127&&E<2048?(d[--l]=E&63|128,d[--l]=E>>6|192):(d[--l]=E&63|128,d[--l]=E>>6&63|128,d[--l]=E>>12|224)}d[--l]=0;for(var O=0,M=0,q=0;l>2;)q==0&&(M=j.random.randomWords(1,0)[0]),O=M>>q&255,q=(q+8)%32,O!=0&&(d[--l]=O);return d[--l]=2,d[--l]=0,new a(d)}function _e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function lt(u,l){if(u!=null&&l!=null&&u.length>0&&l.length>0)this.n=Ce(u,16),this.e=parseInt(l,16);else throw new Error("Invalid RSA public key")}function qe(u){return u.modPowInt(this.e,this.n)}function Kt(u){var l=Ue(u,this.n.bitLength()+7>>3);if(l==null)return null;var d=this.doPublic(l);if(d==null)return null;var f=d.toString(16);return(f.length&1)==0?f:"0"+f}_e.prototype.doPublic=qe,_e.prototype.setPublic=lt,_e.prototype.encrypt=Kt;var j={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(u){this.toString=function(){return"CORRUPT: "+this.message},this.message=u},invalid:function(u){this.toString=function(){return"INVALID: "+this.message},this.message=u},bug:function(u){this.toString=function(){return"BUG: "+this.message},this.message=u},notReady:function(u){this.toString=function(){return"NOT READY: "+this.message},this.message=u}}};w.exports&&(w.exports=j),j.cipher.aes=function(u){this._tables[0][0][0]||this._precompute();var l,d,f,E,O,M=this._tables[0][4],q=this._tables[1],B=u.length,F=1;if(B!==4&&B!==6&&B!==8)throw new j.exception.invalid("invalid aes key size");for(this._key=[E=u.slice(0),O=[]],l=B;l<4*B+28;l++)f=E[l-1],(l%B==0||B===8&&l%B==4)&&(f=M[f>>>24]<<24^M[f>>16&255]<<16^M[f>>8&255]<<8^M[f&255],l%B==0&&(f=f<<8^f>>>24^F<<24,F=F<<1^(F>>7)*283)),E[l]=E[l-B]^f;for(d=0;l;d++,l--)f=E[d&3?l:l-4],l<=4||d<4?O[d]=f:O[d]=q[0][M[f>>>24]]^q[1][M[f>>16&255]]^q[2][M[f>>8&255]]^q[3][M[f&255]]},j.cipher.aes.prototype={encrypt:function(u){return this._crypt(u,0)},decrypt:function(u){return this._crypt(u,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var u=this._tables[0],l=this._tables[1],d=u[4],f=l[4],E,O,M,q=[],B=[],F,V,W,z,K,Q;for(E=0;E<256;E++)B[(q[E]=E<<1^(E>>7)*283)^E]=E;for(O=M=0;!d[O];O^=F||1,M=B[M]||1)for(z=M^M<<1^M<<2^M<<3^M<<4,z=z>>8^z&255^99,d[O]=z,f[z]=O,W=q[V=q[F=q[O]]],Q=W*16843009^V*65537^F*257^O*16843008,K=q[z]*257^z*16843008,E=0;E<4;E++)u[E][O]=K=K<<24^K>>>8,l[E][z]=Q=Q<<24^Q>>>8;for(E=0;E<5;E++)u[E]=u[E].slice(0),l[E]=l[E].slice(0)},_crypt:function(u,l){if(u.length!==4)throw new j.exception.invalid("invalid aes block size");var d=this._key[l],f=u[0]^d[0],E=u[l?3:1]^d[1],O=u[2]^d[2],M=u[l?1:3]^d[3],q,B,F,V=d.length/4-2,W,z=4,K=[0,0,0,0],Q=this._tables[l],te=Q[0],pe=Q[1],ie=Q[2],he=Q[3],Se=Q[4];for(W=0;W<V;W++)q=te[f>>>24]^pe[E>>16&255]^ie[O>>8&255]^he[M&255]^d[z],B=te[E>>>24]^pe[O>>16&255]^ie[M>>8&255]^he[f&255]^d[z+1],F=te[O>>>24]^pe[M>>16&255]^ie[f>>8&255]^he[E&255]^d[z+2],M=te[M>>>24]^pe[f>>16&255]^ie[E>>8&255]^he[O&255]^d[z+3],z+=4,f=q,E=B,O=F;for(W=0;W<4;W++)K[l?3&-W:W]=Se[f>>>24]<<24^Se[E>>16&255]<<16^Se[O>>8&255]<<8^Se[M&255]^d[z++],q=f,f=E,E=O,O=M,M=q;return K}},j.bitArray={bitSlice:function(u,l,d){return u=j.bitArray._shiftRight(u.slice(l/32),32-(l&31)).slice(1),d===void 0?u:j.bitArray.clamp(u,d-l)},extract:function(u,l,d){var f,E=Math.floor(-l-d&31);return(l+d-1^l)&-32?f=u[l/32|0]<<32-E^u[l/32+1|0]>>>E:f=u[l/32|0]>>>E,f&(1<<d)-1},concat:function(u,l){if(u.length===0||l.length===0)return u.concat(l);var d=u[u.length-1],f=j.bitArray.getPartial(d);return f===32?u.concat(l):j.bitArray._shiftRight(l,f,d|0,u.slice(0,u.length-1))},bitLength:function(u){var l=u.length,d;return l===0?0:(d=u[l-1],(l-1)*32+j.bitArray.getPartial(d))},clamp:function(u,l){if(u.length*32<l)return u;u=u.slice(0,Math.ceil(l/32));var d=u.length;return l=l&31,d>0&&l&&(u[d-1]=j.bitArray.partial(l,u[d-1]&2147483648>>l-1,1)),u},partial:function(u,l,d){return u===32?l:(d?l|0:l<<32-u)+u*1099511627776},getPartial:function(u){return Math.round(u/1099511627776)||32},equal:function(u,l){if(j.bitArray.bitLength(u)!==j.bitArray.bitLength(l))return!1;var d=0,f;for(f=0;f<u.length;f++)d|=u[f]^l[f];return d===0},_shiftRight:function(u,l,d,f){var E,O=0,M;for(f===void 0&&(f=[]);l>=32;l-=32)f.push(d),d=0;if(l===0)return f.concat(u);for(E=0;E<u.length;E++)f.push(d|u[E]>>>l),d=u[E]<<32-l;return O=u.length?u[u.length-1]:0,M=j.bitArray.getPartial(O),f.push(j.bitArray.partial(l+M&31,l+M>32?d:f.pop(),1)),f},_xor4:function(u,l){return[u[0]^l[0],u[1]^l[1],u[2]^l[2],u[3]^l[3]]}},j.codec.hex={fromBits:function(u){var l="",d;for(d=0;d<u.length;d++)l+=((u[d]|0)+263882790666240).toString(16).substr(4);return l.substr(0,j.bitArray.bitLength(u)/4)},toBits:function(u){var l,d=[],f;for(u=u.replace(/\s|0x/g,""),f=u.length,u=u+"00000000",l=0;l<u.length;l+=8)d.push(parseInt(u.substr(l,8),16)^0);return j.bitArray.clamp(d,f*4)}},j.codec.utf8String={fromBits:function(u){var l="",d=j.bitArray.bitLength(u),f,E;for(f=0;f<d/8;f++)(f&3)==0&&(E=u[f/4]),l+=String.fromCharCode(E>>>24),E<<=8;return decodeURIComponent(escape(l))},toBits:function(u){u=unescape(encodeURIComponent(u));var l=[],d,f=0;for(d=0;d<u.length;d++)f=f<<8|u.charCodeAt(d),(d&3)==3&&(l.push(f),f=0);return d&3&&l.push(j.bitArray.partial(8*(d&3),f)),l}},j.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(u,l,d){var f="",E,O=0,M=j.codec.base64._chars,q=0,B=j.bitArray.bitLength(u);for(d&&(M=M.substr(0,62)+"-_"),E=0;f.length*6<B;)f+=M.charAt((q^u[E]>>>O)>>>26),O<6?(q=u[E]<<6-O,O+=26,E++):(q<<=6,O-=6);for(;f.length&3&&!l;)f+="=";return f},toBits:function(u,l){u=u.replace(/\s|=/g,"");var d=[],f,E=0,O=j.codec.base64._chars,M=0,q;for(l&&(O=O.substr(0,62)+"-_"),f=0;f<u.length;f++){if(q=O.indexOf(u.charAt(f)),q<0)throw new j.exception.invalid("this isn't base64!");E>26?(E-=26,d.push(M^q>>>E),M=q<<32-E):(E+=6,M^=q<<32-E)}return E&56&&d.push(j.bitArray.partial(E&56,M,1)),d}},j.codec.base64url={fromBits:function(u){return j.codec.base64.fromBits(u,1,1)},toBits:function(u){return j.codec.base64.toBits(u,1)}},j.beware===void 0&&(j.beware={}),j.beware["CBC mode is dangerous because it doesn't protect message integrity."]=function(){j.mode.cbc={name:"cbc",encrypt:function(u,l,d,f){if(f&&f.length)throw new j.exception.invalid("cbc can't authenticate data");if(j.bitArray.bitLength(d)!==128)throw new j.exception.invalid("cbc iv must be 128 bits");var E,O=j.bitArray,M=O._xor4,q=O.bitLength(l),B=0,F=[];if(q&7)throw new j.exception.invalid("pkcs#5 padding only works for multiples of a byte");for(E=0;B+128<=q;E+=4,B+=128)d=u.encrypt(M(d,l.slice(E,E+4))),F.splice(E,0,d[0],d[1],d[2],d[3]);return q=(16-(q>>3&15))*16843009,d=u.encrypt(M(d,O.concat(l,[q,q,q,q]).slice(E,E+4))),F.splice(E,0,d[0],d[1],d[2],d[3]),F},decrypt:function(u,l,d,f){if(f&&f.length)throw new j.exception.invalid("cbc can't authenticate data");if(j.bitArray.bitLength(d)!==128)throw new j.exception.invalid("cbc iv must be 128 bits");if(j.bitArray.bitLength(l)&127||!l.length)throw new j.exception.corrupt("cbc ciphertext must be a positive multiple of the block size");var E,O=j.bitArray,M=O._xor4,q,B,F=[];for(f=f||[],E=0;E<l.length;E+=4)q=l.slice(E,E+4),B=M(d,u.decrypt(q)),F.splice(E,0,B[0],B[1],B[2],B[3]),d=q;if(q=F[E-1]&255,q==0||q>16)throw new j.exception.corrupt("pkcs#5 padding corrupt");if(B=q*16843009,!O.equal(O.bitSlice([B,B,B,B],0,q*8),O.bitSlice(F,F.length*32-q*8,F.length*32)))throw new j.exception.corrupt("pkcs#5 padding corrupt");return O.bitSlice(F,0,F.length*32-q*8)}}},j.misc.hmac=function(u,l){this._hash=l=l||j.hash.sha256;var d=[[],[]],f,E=l.prototype.blockSize/32;for(this._baseHash=[new l,new l],u.length>E&&(u=l.hash(u)),f=0;f<E;f++)d[0][f]=u[f]^909522486,d[1][f]=u[f]^1549556828;this._baseHash[0].update(d[0]),this._baseHash[1].update(d[1])},j.misc.hmac.prototype.encrypt=j.misc.hmac.prototype.mac=function(u,l){var d=new this._hash(this._baseHash[0]).update(u,l).finalize();return new this._hash(this._baseHash[1]).update(d).finalize()},j.hash.sha256=function(u){this._key[0]||this._precompute(),u?(this._h=u._h.slice(0),this._buffer=u._buffer.slice(0),this._length=u._length):this.reset()},j.hash.sha256.hash=function(u){return new j.hash.sha256().update(u).finalize()},j.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(u){typeof u=="string"&&(u=j.codec.utf8String.toBits(u));var l,d=this._buffer=j.bitArray.concat(this._buffer,u),f=this._length,E=this._length=f+j.bitArray.bitLength(u);for(l=512+f&-512;l<=E;l+=512)this._block(d.splice(0,16));return this},finalize:function(){var u,l=this._buffer,d=this._h;for(l=j.bitArray.concat(l,[j.bitArray.partial(1,1)]),u=l.length+2;u&15;u++)l.push(0);for(l.push(Math.floor(this._length/4294967296)),l.push(this._length|0);l.length;)this._block(l.splice(0,16));return this.reset(),d},_init:[],_key:[],_precompute:function(){var u=0,l=2,d;function f(E){return(E-Math.floor(E))*4294967296|0}e:for(;u<64;l++){for(d=2;d*d<=l;d++)if(l%d==0)continue e;u<8&&(this._init[u]=f(Math.pow(l,1/2))),this._key[u]=f(Math.pow(l,1/3)),u++}},_block:function(u){var l,d,f,E,O=u.slice(0),M=this._h,q=this._key,B=M[0],F=M[1],V=M[2],W=M[3],z=M[4],K=M[5],Q=M[6],te=M[7];for(l=0;l<64;l++)l<16?d=O[l]:(f=O[l+1&15],E=O[l+14&15],d=O[l&15]=(f>>>7^f>>>18^f>>>3^f<<25^f<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+O[l&15]+O[l+9&15]|0),d=d+te+(z>>>6^z>>>11^z>>>25^z<<26^z<<21^z<<7)+(Q^z&(K^Q))+q[l],te=Q,Q=K,K=z,z=W+d|0,W=V,V=F,F=B,B=d+(F&V^W&(F^V))+(F>>>2^F>>>13^F>>>22^F<<30^F<<19^F<<10)|0;M[0]=M[0]+B|0,M[1]=M[1]+F|0,M[2]=M[2]+V|0,M[3]=M[3]+W|0,M[4]=M[4]+z|0,M[5]=M[5]+K|0,M[6]=M[6]+Q|0,M[7]=M[7]+te|0}},j.random={randomWords:function(u,l){var d=[],f,E=this.isReady(l),O;if(E===this._NOT_READY)throw new j.exception.notReady("generator isn't seeded");for(E&this._REQUIRES_RESEED&&this._reseedFromPools(!(E&this._READY)),f=0;f<u;f+=4)(f+1)%this._MAX_WORDS_PER_BURST==0&&this._gate(),O=this._gen4words(),d.push(O[0],O[1],O[2],O[3]);return this._gate(),d.slice(0,u)},setDefaultParanoia:function(u){this._defaultParanoia=u},addEntropy:function(u,l,d){d=d||"user";var f,E,O,M=new Date().valueOf(),q=this._robins[d],B=this.isReady(),F=0;switch(f=this._collectorIds[d],f===void 0&&(f=this._collectorIds[d]=this._collectorIdNext++),q===void 0&&(q=this._robins[d]=0),this._robins[d]=(this._robins[d]+1)%this._pools.length,typeof u){case"number":l===void 0&&(l=1),this._pools[q].update([f,this._eventId++,1,l,M,1,u|0]);break;case"object":var V=Object.prototype.toString.call(u);if(V==="[object Uint32Array]"){for(O=[],E=0;E<u.length;E++)O.push(u[E]);u=O}else for(V!=="[object Array]"&&(F=1),E=0;E<u.length&&!F;E++)typeof u[E]!="number"&&(F=1);if(!F){if(l===void 0)for(l=0,E=0;E<u.length;E++)for(O=u[E];O>0;)l++,O=O>>>1;this._pools[q].update([f,this._eventId++,2,l,M,u.length].concat(u))}break;case"string":l===void 0&&(l=u.length),this._pools[q].update([f,this._eventId++,3,l,M,u.length]),this._pools[q].update(u);break;default:F=1}if(F)throw new j.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[q]+=l,this._poolStrength+=l,B===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(u){var l=this._PARANOIA_LEVELS[u!==void 0?u:this._defaultParanoia];return this._strength&&this._strength>=l?this._poolEntropy[0]>this._BITS_PER_RESEED&&new Date().valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=l?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(u){var l=this._PARANOIA_LEVELS[u||this._defaultParanoia];return this._strength>=l||this._poolStrength>l?1:this._poolStrength/l},startCollectors:function(){if(!this._collectorsStarted){if(window.addEventListener)window.addEventListener("load",this._loadTimeCollector,!1),window.addEventListener("mousemove",this._mouseCollector,!1);else if(document.attachEvent)document.attachEvent("onload",this._loadTimeCollector),document.attachEvent("onmousemove",this._mouseCollector);else throw new j.exception.bug("can't attach event");this._collectorsStarted=!0}},stopCollectors:function(){!this._collectorsStarted||(window.removeEventListener?(window.removeEventListener("load",this._loadTimeCollector,!1),window.removeEventListener("mousemove",this._mouseCollector,!1)):window.detachEvent&&(window.detachEvent("onload",this._loadTimeCollector),window.detachEvent("onmousemove",this._mouseCollector)),this._collectorsStarted=!1)},addEventListener:function(u,l){this._callbacks[u][this._callbackI++]=l},removeEventListener:function(u,l){var d,f,E=this._callbacks[u],O=[];for(f in E)E.hasOwnProperty(f)&&E[f]===l&&O.push(f);for(d=0;d<O.length;d++)f=O[d],delete E[f]},_pools:[new j.hash.sha256],_poolEntropy:[0],_reseedCount:0,_robins:{},_eventId:0,_collectorIds:{},_collectorIdNext:0,_strength:0,_poolStrength:0,_nextReseed:0,_key:[0,0,0,0,0,0,0,0],_counter:[0,0,0,0],_cipher:void 0,_defaultParanoia:6,_collectorsStarted:!1,_callbacks:{progress:{},seeded:{}},_callbackI:0,_NOT_READY:0,_READY:1,_REQUIRES_RESEED:2,_MAX_WORDS_PER_BURST:65536,_PARANOIA_LEVELS:[0,48,64,96,128,192,256,384,512,768,1024],_MILLISECONDS_PER_RESEED:3e4,_BITS_PER_RESEED:80,_gen4words:function(){for(var u=0;u<4&&(this._counter[u]=this._counter[u]+1|0,!this._counter[u]);u++);return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new j.cipher.aes(this._key)},_reseed:function(u){this._key=j.hash.sha256.hash(this._key.concat(u)),this._cipher=new j.cipher.aes(this._key);for(var l=0;l<4&&(this._counter[l]=this._counter[l]+1|0,!this._counter[l]);l++);},_reseedFromPools:function(u){var l=[],d=0,f;for(this._nextReseed=l[0]=new Date().valueOf()+this._MILLISECONDS_PER_RESEED,f=0;f<16;f++)l.push(Math.random()*4294967296|0);for(f=0;f<this._pools.length&&(l=l.concat(this._pools[f].finalize()),d+=this._poolEntropy[f],this._poolEntropy[f]=0,!(!u&&this._reseedCount&1<<f));f++);this._reseedCount>=1<<this._pools.length&&(this._pools.push(new j.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=d,d>this._strength&&(this._strength=d),this._reseedCount++,this._reseed(l)},_mouseCollector:function(u){var l=u.x||u.clientX||u.offsetX||0,d=u.y||u.clientY||u.offsetY||0;j.random.addEntropy([l,d],2,"mouse")},_loadTimeCollector:function(u){j.random.addEntropy(new Date().valueOf(),2,"loadtime")},_fireEvent:function(u,l){var d,f=j.random._callbacks[u],E=[];for(d in f)f.hasOwnProperty(d)&&E.push(f[d]);for(d=0;d<E.length;d++)E[d](l)}},function(){try{var u=new Uint32Array(32);crypto.getRandomValues(u),j.random.addEntropy(u,1024,"crypto.getRandomValues")}catch(l){}}(),function(){for(var u in j.beware)j.beware.hasOwnProperty(u)&&j.beware[u]()}();var Ae={sjcl:j,version:"1.3.10"};Ae.generateAesKey=function(){return{key:j.random.randomWords(8,0),encrypt:function(u){return this.encryptWithIv(u,j.random.randomWords(4,0))},encryptWithIv:function(u,l){var d=new j.cipher.aes(this.key),f=j.codec.utf8String.toBits(u),E=j.mode.cbc.encrypt(d,f,l),O=j.bitArray.concat(l,E);return j.codec.base64.fromBits(O)}}},Ae.create=function(u){return new Ae.EncryptionClient(u)},Ae.EncryptionClient=function(u){var l=this,d=[];l.publicKey=u,l.version=Ae.version;var f=function(F,V){var W,z,K;W=document.createElement(F);for(z in V)V.hasOwnProperty(z)&&(K=V[z],W.setAttribute(z,K));return W},E=function(F){return window.jQuery&&F instanceof jQuery?F[0]:F.nodeType&&F.nodeType===1?F:document.getElementById(F)},O=function(F){var V=[],W,z,K,Q;if(F.typeName()==="INTEGER"&&(W=F.posContent(),z=F.posEnd(),K=F.stream.hexDump(W,z).replace(/[ \n]/g,""),V.push(K)),F.sub!==null)for(Q=0;Q<F.sub.length;Q++)V=V.concat(O(F.sub[Q]));return V},M=function(F){var V=[],W=F.children,z,K;for(K=0;K<W.length;K++)z=W[K],z.nodeType===1&&z.attributes["data-encrypted-name"]?V.push(z):z.children&&z.children.length>0&&(V=V.concat(M(z)));return V},q=function(){var F,V,W,z,K,Q;try{K=i(u),F=n.decode(K)}catch(te){throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'"}if(W=O(F),W.length!==2)throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'";return z=W[0],V=W[1],Q=new _e,Q.setPublic(z,V),Q},B=function(){return{key:j.random.randomWords(8,0),sign:function(F){var V=new j.misc.hmac(this.key,j.hash.sha256),W=V.encrypt(F);return j.codec.base64.fromBits(W)}}};l.encrypt=function(F){var V=q(),W=Ae.generateAesKey(),z=B(),K=W.encrypt(F),Q=z.sign(j.codec.base64.toBits(K)),te=j.bitArray.concat(W.key,z.key),pe=j.codec.base64.fromBits(te),ie=V.encrypt(pe),he="$bt4|javascript_"+l.version.replace(/\./g,"_")+"$",Se=null;return ie&&(Se=s(ie)),he+Se+"$"+K+"$"+Q},l.encryptForm=function(F){var V,W,z,K,Q,te;for(F=E(F),te=M(F);d.length>0;){try{F.removeChild(d[0])}catch(pe){}d.splice(0,1)}for(Q=0;Q<te.length;Q++)V=te[Q],z=V.getAttribute("data-encrypted-name"),W=l.encrypt(V.value),V.removeAttribute("name"),K=f("input",{value:W,type:"hidden",name:z}),d.push(K),F.appendChild(K)},l.onSubmitEncryptForm=function(F,V){var W;F=E(F),W=function(z){return l.encryptForm(F),V?V(z):z},window.jQuery?window.jQuery(F).submit(W):F.addEventListener?F.addEventListener("submit",W,!1):F.attachEvent&&F.attachEvent("onsubmit",W)},l.formEncrypter={encryptForm:l.encryptForm,extractForm:E,onSubmitEncryptForm:l.onSubmitEncryptForm},j.random.startCollectors()},window.Braintree=Ae})(),function(t){w.exports=t()}(function(){return function t(n,e,c){function s(o,a){if(!e[o]){if(!n[o]){var p=typeof Ne=="function"&&Ne;if(!a&&p)return p(o,!0);if(r)return r(o,!0);var m=new Error("Cannot find module '"+o+"'");throw m.code="MODULE_NOT_FOUND",m}var h=e[o]={exports:{}};n[o][0].call(h.exports,function(y){var g=n[o][1][y];return s(g||y)},h,h.exports,t,n,e,c)}return e[o].exports}for(var r=typeof Ne=="function"&&Ne,i=0;i<c.length;i++)s(c[i]);return s}({1:[function(t,n,e){(function(c){var s="2.14.0",r=t("braintree-api"),i=t("braintree-paypal"),o=t("braintree-dropin"),a=t("./integrations"),p=t("./constants"),m=t("./lib/fallback-error-handler"),h=t("./lib/lookup-callback-for"),y=t("braintree-utilities").uuid;function g(S,x,C){if(!a.hasOwnProperty(x))throw new Error(x+" is an unsupported integration");C=C||{},r._getConfiguration({enableCORS:C.enableCORS||!1,clientToken:S},function(T,P){var v;if(T){v=h(C)(p.ROOT_ERROR_CALLBACK,m),v({message:T.errors});return}new a[x]({channel:y(),gatewayConfiguration:P,integrationType:x,merchantConfiguration:C,analyticsConfiguration:{sdkVersion:"braintree/web/"+s,merchantAppId:c.location.host}})})}n.exports={api:r,cse:c.Braintree,paypal:i,dropin:o,hostedFields:{VERSION:t("hosted-fields").VERSION},setup:g,VERSION:s}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./constants":440,"./integrations":445,"./lib/fallback-error-handler":447,"./lib/lookup-callback-for":449,"braintree-api":21,"braintree-dropin":236,"braintree-paypal":344,"braintree-utilities":372,"hosted-fields":377}],2:[function(t,n,e){(function(c){var s=t("braintree-utilities"),r=t("braintree-3ds"),i=t("./parse-client-token"),o=t("./util"),a=t("./sepa-mandate"),p=t("./europe-bank-account"),m=t("./credit-card"),h=t("./coinbase-account"),y=t("./paypal-account"),g=t("./normalize-api-fields").normalizeCreditCardFields,S=t("./request/choose-driver"),x=t("./should-enable-cors"),C=t("./constants");function T(v){var _=v.analyticsConfiguration||{},I=c.braintree?c.braintree.VERSION:null,R=I?"braintree/web/"+I:"";return{sdkVersion:_.sdkVersion||R,merchantAppId:_.merchantAppId||c.location.host}}function P(v){var _,I,R;this.attrs={},v.hasOwnProperty("sharedCustomerIdentifier")&&(this.attrs.sharedCustomerIdentifier=v.sharedCustomerIdentifier),_=i(v.clientToken),R=T(v),this.driver=v.driver||S({enableCORS:x(v)}),this.analyticsUrl=_.analytics?_.analytics.url:void 0,this.clientApiUrl=_.clientApiUrl,this.customerId=v.customerId,this.challenges=_.challenges,this.integration=v.integration||"",this.sdkVersion=R.sdkVersion,this.merchantAppId=R.merchantAppId,I=r.create(this,{container:v.container,clientToken:_}),this.verify3DS=s.bind(I.verify,I),this.attrs.sharedCustomerIdentifierType=v.sharedCustomerIdentifierType,_.merchantAccountId&&(this.attrs.merchantAccountId=_.merchantAccountId),v.clientKey?this.attrs.clientKey=v.clientKey:_.authorizationFingerprint&&(this.attrs.authorizationFingerprint=_.authorizationFingerprint),v.hasOwnProperty("timeout")?this.requestTimeout=v.timeout:this.requestTimeout=6e4}P.prototype.getCreditCards=function(v){this.driver.get(o.joinUrlFragments([this.clientApiUrl,"v1","payment_methods"]),this.attrs,function(_){var I=0,R=_.paymentMethods.length,U=[];for(I;I<R;I++)U.push(new m(_.paymentMethods[I]));return U},v,this.requestTimeout)},P.prototype.tokenizeCoinbase=function(v,_){v.options={validate:!1},this.addCoinbase(v,function(I,R){I?_(I,null):R&&R.nonce?_(I,R):_("Unable to tokenize coinbase account.",null)})},P.prototype.tokenizePayPalAccount=function(v,_){v.options={validate:!1},this.addPayPalAccount(v,function(I,R){I?_(I,null):R&&R.nonce?_(null,R):_("Unable to tokenize paypal account.",null)})},P.prototype.tokenizeCard=function(v,_){v.options={validate:!1},this.addCreditCard(v,function(I,R){R&&R.nonce?_(I,R.nonce,{type:R.type,details:R.details}):_("Unable to tokenize card.",null)})},P.prototype.lookup3DS=function(v,_){var I=o.joinUrlFragments([this.clientApiUrl,"v1/payment_methods",v.nonce,"three_d_secure/lookup"]),R=o.mergeOptions(this.attrs,{amount:v.amount});this.driver.post(I,R,function(U){return U},_,this.requestTimeout)},P.prototype.createSEPAMandate=function(v,_){var I=o.mergeOptions(this.attrs,{sepaMandate:v});this.driver.post(o.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),I,function(R){return{sepaMandate:new a(R.europeBankAccounts[0].sepaMandates[0]),sepaBankAccount:new p(R.europeBankAccounts[0])}},_,this.requestTimeout)},P.prototype.getSEPAMandate=function(v,_){var I=o.mergeOptions(this.attrs,v);this.driver.get(o.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),I,function(R){return{sepaMandate:new a(R.sepaMandates[0])}},_,this.requestTimeout)},P.prototype.addCoinbase=function(v,_){var I;delete v.share,I=o.mergeOptions(this.attrs,{coinbaseAccount:v,_meta:{integration:this.integration||"custom",source:"coinbase"}}),this.driver.post(o.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/coinbase_accounts"]),I,function(R){return new h(R.coinbaseAccounts[0])},_,this.requestTimeout)},P.prototype.addPayPalAccount=function(v,_){var I;delete v.share,I=o.mergeOptions(this.attrs,{paypalAccount:v,_meta:{integration:this.integration||"paypal",source:"paypal"}}),this.driver.post(o.joinUrlFragments([this.clientApiUrl,"v1","payment_methods","paypal_accounts"]),I,function(R){return new y(R.paypalAccounts[0])},_,this.requestTimeout)},P.prototype.addCreditCard=function(v,_){var I,R,U=v.share;delete v.share,R=g(v),I=o.mergeOptions(this.attrs,{share:U,creditCard:R,_meta:{integration:this.integration||"custom",source:"form"}}),this.driver.post(o.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/credit_cards"]),I,function(D){return new m(D.creditCards[0])},_,this.requestTimeout)},P.prototype.sendAnalyticsEvents=function(v,_){var I,R,U=this.analyticsUrl,D=[];if(v=o.isArray(v)?v:[v],!U){_&&_.apply(null,[null,{}]);return}for(R in v)v.hasOwnProperty(R)&&D.push({kind:v[R]});I=o.mergeOptions(this.attrs,{braintree_library_version:this.sdkVersion,analytics:D,_meta:{merchantAppId:this.merchantAppId,platform:"web",platformVersion:c.navigator.userAgent,integrationType:this.integration,sdkVersion:this.sdkVersion}}),this.driver.post(U,I,function(b){return b},_,C.ANALYTICS_TIMEOUT_MS)},P.prototype.decryptBrowserswitchPayload=function(v,_){var I=o.mergeOptions(this.attrs,{asymmetric_encrypted_payload:v}),R=o.joinUrlFragments([this.clientApiUrl,"/v1/paypal_browser_switch/decrypt"]);this.driver.post(R,I,function(U){return U},_,this.requestTimeout)},P.prototype.encryptBrowserswitchReturnPayload=function(v,_,I){var R=o.mergeOptions(this.attrs,{payload:v,aesKey:_}),U=o.joinUrlFragments([this.clientApiUrl,"/v1/paypal_browser_switch/encrypt"]);this.driver.post(U,R,function(D){return D},I,this.requestTimeout)},P.prototype.exchangePaypalTokenForConsentCode=function(v,_){var I=o.mergeOptions(this.attrs,v);this.attrs.merchantAccountId&&(I.merchant_account_id=this.attrs.merchantAccountId);var R=o.joinUrlFragments([this.clientApiUrl,"/v1/paypal_account_service/merchant_consent"]);this.driver.post(R,I,function(U){return U},_,this.requestTimeout)},P.prototype.getAmexRewardsBalance=function(v,_){var I=o.mergeOptions(this.attrs,v);I.nonce&&(I.payment_method_nonce=I.nonce,delete I.nonce),this.driver.get(o.joinUrlFragments([this.clientApiUrl,"v1/payment_methods/amex_rewards_balance"]),I,function(R){return R},_,this.requestTimeout)},n.exports=P}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./coinbase-account":3,"./constants":4,"./credit-card":5,"./europe-bank-account":6,"./normalize-api-fields":8,"./parse-client-token":9,"./paypal-account":10,"./request/choose-driver":13,"./sepa-mandate":18,"./should-enable-cors":19,"./util":20,"braintree-3ds":29,"braintree-utilities":43}],3:[function(t,n,e){var c=["nonce","type","description","details"];function s(r){var i,o;for(i=0;i<c.length;i++)o=c[i],this[o]=r[o]}n.exports=s},{}],4:[function(t,n,e){n.exports={apiUrls:{production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"},errors:{UNKNOWN_ERROR:"Unknown error",INVALID_TIMEOUT:"Timeout must be a number"},ANALYTICS_TIMEOUT_MS:4e3}},{}],5:[function(t,n,e){var c=["billingAddress","branding","createdAt","createdAtMerchant","createdAtMerchantName","details","isLocked","lastUsedAt","lastUsedAtMerchant","lastUsedAtMerchantName","lastUsedByCurrentMerchant","nonce","securityQuestions","type"];function s(r){var i,o;for(i=0;i<c.length;i++)o=c[i],this[o]=r[o]}n.exports=s},{}],6:[function(t,n,e){function c(s){var r=["bic","maskedIBAN","nonce","accountHolderName"],i,o=0;for(o=0;o<r.length;o++)i=r[o],this[i]=s[i]}n.exports=c},{}],7:[function(t,n,e){var c=t("./parse-client-token"),s=t("./util"),r=t("./request/choose-driver"),i=t("./should-enable-cors"),o=t("./constants");function a(m){var h=m.split("_"),y=h[0],g=h.slice(2).join("_");return{merchantId:g,environment:y}}function p(m,h){var y,g,S,x=r({enableCORS:i(m)}),C=m.clientKey,T={};C?(T.clientKey=C,g=a(C),y=o.apiUrls[g.environment]+"/merchants/"+g.merchantId+"/client_api/v1/configuration"):(S=c(m.clientToken),S.authorizationFingerprint&&(T.authorizationFingerprint=S.authorizationFingerprint,y=S.configUrl)),x.get(y,T,function(P){return s.mergeOptions(S,P)},h,m.timeout)}n.exports=p},{"./constants":4,"./parse-client-token":9,"./request/choose-driver":13,"./should-enable-cors":19,"./util":20}],8:[function(t,n,e){function c(s){var r,i={billingAddress:s.billingAddress||{}};for(r in s)if(!!s.hasOwnProperty(r))switch(r.replace(/_/,"").toLowerCase()){case"postalcode":case"countryname":case"countrycodenumeric":case"countrycodealpha2":case"countrycodealpha3":case"region":case"extendedaddress":case"locality":case"firstname":case"lastname":case"company":case"streetaddress":i.billingAddress[r]=s[r];break;default:i[r]=s[r]}return i}n.exports={normalizeCreditCardFields:c}},{}],9:[function(t,n,e){var c=t("braintree-utilities");t("./polyfill");function s(r){var i;if(!r)throw new Error("Braintree API Client Misconfigured: clientToken required.");if(typeof r=="object"&&r!==null)i=r;else{try{r=window.atob(r)}catch(o){}try{i=JSON.parse(r)}catch(o){throw new Error("Braintree API Client Misconfigured: clientToken is not valid JSON.")}}if(!i.hasOwnProperty("clientApiUrl")||!c.isWhitelistedDomain(i.clientApiUrl))throw new Error("Braintree API Client Misconfigured: the clientApiUrl provided in the clientToken is invalid.");return i}n.exports=s},{"./polyfill":11,"braintree-utilities":43}],10:[function(t,n,e){var c=["nonce","type","description","details"];function s(r){var i,o;for(i=0;i<c.length;i++)o=c[i],this[o]=r[o]}n.exports=s},{}],11:[function(t,n,e){(function(c){var s=function(r){var i=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="";if(!i.test(r))throw new Error("Non base64 encoded input passed to window.atob polyfill");var p=0;do{var m=o.indexOf(r.charAt(p++)),h=o.indexOf(r.charAt(p++)),y=o.indexOf(r.charAt(p++)),g=o.indexOf(r.charAt(p++)),S=(m&63)<<2|h>>4&3,x=(h&15)<<4|y>>2&15,C=(y&3)<<6|g&63;a+=String.fromCharCode(S)+(x?String.fromCharCode(x):"")+(C?String.fromCharCode(C):"")}while(p<r.length);return a};c.atob=c.atob||s,n.exports={atobPolyfill:s}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],12:[function(t,n,e){(function(c){var s=t("../util"),r=t("./prep-body"),i=t("./parse-body"),o=t("../constants"),a=c.XMLHttpRequest&&"withCredentials"in new c.XMLHttpRequest;function p(){return a?new XMLHttpRequest:new XDomainRequest}function m(g,S,x,C,T){var P=s.createURLParams(g,S);y("GET",P,null,x,C,T)}function h(g,S,x,C,T){y("POST",g,S,x,C,T)}function y(g,S,x,C,T,P){var v,_,I=p();T=T||function(){},a?I.onreadystatechange=function(){I.readyState===4&&(v=I.status,_=i(I.responseText),v>=400||v===0?T.call(null,_||{errors:o.errors.UNKNOWN_ERROR},null):v>0&&T.call(null,null,C(_)))}:(I.onload=function(){T.call(null,null,C(i(I.responseText)))},I.onerror=function(){T.call(null,I.responseText,null)},I.onprogress=function(){},I.ontimeout=function(){T.call(null,{errors:o.errors.UNKNOWN_ERROR},null)}),I.open(g,S,!0),I.timeout=P==null?6e4:P,a&&g==="POST"&&I.setRequestHeader("Content-Type","application/json"),setTimeout(function(){I.send(r(g,x))},0)}n.exports={get:m,post:h}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../constants":4,"../util":20,"./parse-body":16,"./prep-body":17}],13:[function(t,n,e){var c=t("./jsonp-driver"),s=t("./ajax-driver"),r=t("../util");function i(o){var a=r.getUserAgent(),p=!(r.isHTTP()&&/(MSIE\s(8|9))|(Phantom)/.test(a));return o=o||{},o.enableCORS&&p?s:c}n.exports=i},{"../util":20,"./ajax-driver":12,"./jsonp-driver":14}],14:[function(t,n,e){var c=t("./jsonp"),s=t("../constants"),r=[];function i(h,y){return h.status>=400?[h,null]:[null,y(h)]}function o(){}function a(h,y,g,S,x,C){var T;x=x||o,C==null&&(C=6e4),T=S(h,y,function(P,v){r[v]&&(clearTimeout(r[v]),x.apply(null,i(P,function(_){return g(_)})))}),typeof C=="number"?r[T]=setTimeout(function(){r[T]=null,x.apply(null,[{errors:s.errors.UNKNOWN_ERROR},null])},C):x.apply(null,[{errors:s.errors.INVALID_TIMEOUT},null])}function p(h,y,g,S,x){y._method="POST",a(h,y,g,c.get,S,x)}function m(h,y,g,S,x){a(h,y,g,c.get,S,x)}n.exports={get:m,post:p}},{"../constants":4,"./jsonp":15}],15:[function(t,n,e){(function(c){var s=t("../util"),r,i=c,o={};function a(h,y){var g=document.createElement("script"),S=!1;g.src=h,g.async=!0;var x=y||o.error;typeof x=="function"&&(g.onerror=function(C){x({url:h,event:C})}),g.onload=g.onreadystatechange=function(){!S&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(S=!0,g.onload=g.onreadystatechange=null,g&&g.parentNode&&g.parentNode.removeChild(g))},r||(r=document.getElementsByTagName("head")[0]),r.appendChild(g)}function p(h,y,g,S){var x,C;return S=S||o.callbackName||"callback",C=S+"_json"+s.generateUUID(),y[S]=C,x=s.createURLParams(h,y),i[C]=function(T){g(T,C);try{delete i[C]}catch(P){}i[C]=null},a(x),C}function m(h){o=h}n.exports={get:p,init:m}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../util":20}],16:[function(t,n,e){n.exports=function(c){try{c=JSON.parse(c)}catch(s){}return c}},{}],17:[function(t,n,e){var c=t("lodash.isstring");n.exports=function(s,r){if(!c(s))throw new Error("Method must be a string");return s.toLowerCase()!=="get"&&r!=null&&(r=c(r)?r:JSON.stringify(r)),r}},{"lodash.isstring":51}],18:[function(t,n,e){function c(s){var r=0,i,o=["accountHolderName","bic","longFormURL","mandateReferenceNumber","maskedIBAN","shortForm"];for(r=0;r<o.length;r++)i=o[r],this[i]=s[i]}n.exports=c},{}],19:[function(t,n,e){n.exports=function(c){return c.enableCORS!=null?c.enableCORS:c.merchantConfiguration?c.merchantConfiguration.enableCORS:!1}},{}],20:[function(t,n,e){(function(c){var s=t("lodash.isempty"),r=t("lodash.isobject");function i(S){var x=[],C,T;for(T=0;T<S.length;T++)C=S[T],C.charAt(C.length-1)==="/"&&(C=C.substring(0,C.length-1)),C.charAt(0)==="/"&&(C=C.substring(1)),x.push(C);return x.join("/")}function o(S){return S&&typeof S=="object"&&typeof S.length=="number"&&Object.prototype.toString.call(S)==="[object Array]"||!1}function a(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(S){var x=Math.floor(Math.random()*16),C=S==="x"?x:x&3|8;return C.toString(16)})}function p(S,x){var C={},T;for(T in S)S.hasOwnProperty(T)&&(C[T]=S[T]);for(T in x)x.hasOwnProperty(T)&&(C[T]=x[T]);return C}function m(S,x){var C=[],T,P,v;for(v in S)!S.hasOwnProperty(v)||(P=S[v],x?o(S)?T=x+"[]":T=x+"["+v+"]":T=v,typeof P=="object"?C.push(m(P,T)):C.push(encodeURIComponent(T)+"="+encodeURIComponent(P)));return C.join("&")}function h(S,x){return S=S||"",!s(x)&&r(x)&&(S+=S.indexOf("?")===-1?"?":"",S+=S.indexOf("=")!==-1?"&":"",S+=m(x)),S}function y(){return c.navigator.userAgent}function g(){return c.location.protocol==="http:"}n.exports={joinUrlFragments:i,isArray:o,generateUUID:a,mergeOptions:p,stringify:m,createURLParams:h,getUserAgent:y,isHTTP:g}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"lodash.isempty":44,"lodash.isobject":50}],21:[function(t,n,e){var c=t("./lib/client"),s=t("./lib/util"),r=t("./lib/parse-client-token"),i=t("./lib/get-configuration");function o(a){return new c(a)}n.exports={Client:c,configure:o,util:s,parseClientToken:r,_getConfiguration:i}},{"./lib/client":2,"./lib/get-configuration":7,"./lib/parse-client-token":9,"./lib/util":20}],22:[function(t,n,e){function c(s,r){if(r=r||"["+s+"] is not a valid DOM Element",s&&s.nodeType&&s.nodeType===1)return s;if(s&&window.jQuery&&(s instanceof jQuery||"jquery"in Object(s))&&s.length!==0)return s[0];if(typeof s=="string"&&document.getElementById(s))return document.getElementById(s);throw new Error(r)}n.exports={normalizeElement:c}},{}],23:[function(t,n,e){function c(r,i,o,a){r.addEventListener?r.addEventListener(i,o,a):r.attachEvent&&r.attachEvent("on"+i,o)}function s(r,i,o,a){r.removeEventListener?r.removeEventListener(i,o,a):r.detachEvent&&r.detachEvent("on"+i,o)}n.exports={addEventListener:c,removeEventListener:s}},{}],24:[function(t,n,e){var c=Object.prototype.toString;function s(i){return c.call(i)==="[object Function]"}function r(i,o){return function(){i.apply(o,arguments)}}n.exports={bind:r,isFunction:s}},{}],25:[function(t,n,e){function c(){return window.location.protocol==="https:"}function s(a){switch(a){case null:case void 0:return"";case!0:return"1";case!1:return"0";default:return encodeURIComponent(a)}}function r(a,p){var m=[],h,y;for(y in a)if(a.hasOwnProperty(y)){var g=a[y];p?h=p+"["+y+"]":h=y,typeof g=="object"?m.push(r(g,h)):g!=null&&m.push(s(h)+"="+s(g))}return m.join("&")}function i(a){for(var p={},m=a.split("&"),h=0;h<m.length;h++){var y=m[h].split("="),g=y[0],S=decodeURIComponent(y[1]);p[g]=S}return p}function o(a){var p=a.split("?");return p.length!==2?{}:i(p[1])}n.exports={isBrowserHttps:c,makeQueryString:r,decodeQueryString:i,getParams:o}},{}],26:[function(t,n,e){var c=t("./lib/dom"),s=t("./lib/url"),r=t("./lib/fn"),i=t("./lib/events");n.exports={normalizeElement:c.normalizeElement,isBrowserHttps:s.isBrowserHttps,makeQueryString:s.makeQueryString,decodeQueryString:s.decodeQueryString,getParams:s.getParams,removeEventListener:i.removeEventListener,addEventListener:i.addEventListener,bind:r.bind,isFunction:r.isFunction}},{"./lib/dom":22,"./lib/events":23,"./lib/fn":24,"./lib/url":25}],27:[function(t,n,e){var c=t("braintree-utilities"),s=t("../shared/receiver"),r="1.3.0",i,o;function a(h,y){var g=window.getComputedStyle?getComputedStyle(h):h.currentStyle;return g[y]}function p(){return{html:{height:i.style.height||"",overflow:a(i,"overflow"),position:a(i,"position")},body:{height:o.style.height||"",overflow:a(o,"overflow")}}}function m(h,y){this.assetsUrl=h,this.container=y||document.body,this.iframe=null,i=document.documentElement,o=document.body,this.merchantPageDefaultStyles=p()}m.prototype.get=function(h,y){var g=this,S=this.constructAuthorizationURL(h);this.container&&c.isFunction(this.container)?this.container(S+"&no_style=1"):this.insertIframe(S),new s(function(x){c.isFunction(g.container)||g.removeIframe(),y(x)})},m.prototype.removeIframe=function(){this.container&&this.container.nodeType&&this.container.nodeType===1?this.container.removeChild(this.iframe):this.container&&window.jQuery&&this.container instanceof jQuery?$(this.iframe,this.container).remove():typeof this.container=="string"&&document.getElementById(this.container).removeChild(this.iframe),this.unlockMerchantWindowSize()},m.prototype.insertIframe=function(h){var y=document.createElement("iframe");if(y.src=h,this.applyStyles(y),this.lockMerchantWindowSize(),this.container&&this.container.nodeType&&this.container.nodeType===1)this.container.appendChild(y);else if(this.container&&window.jQuery&&this.container instanceof jQuery&&this.container.length!==0)this.container.append(y);else if(typeof this.container=="string"&&document.getElementById(this.container))document.getElementById(this.container).appendChild(y);else throw new Error("Unable to find valid container for iframe.");this.iframe=y},m.prototype.applyStyles=function(h){h.style.position="fixed",h.style.top="0",h.style.left="0",h.style.height="100%",h.style.width="100%",h.setAttribute("frameborder","0"),h.setAttribute("allowTransparency","true"),h.style.border="0",h.style.zIndex="99999"},m.prototype.lockMerchantWindowSize=function(){i.style.overflow="hidden",o.style.overflow="hidden",o.style.height="100%"},m.prototype.unlockMerchantWindowSize=function(){var h=this.merchantPageDefaultStyles;o.style.height=h.body.height,o.style.overflow=h.body.overflow,i.style.overflow=h.html.overflow},m.prototype.constructAuthorizationURL=function(h){var y,g=window.location.href;return g.indexOf("#")>-1&&(g=g.split("#")[0]),y=c.makeQueryString({acsUrl:h.acsUrl,pareq:h.pareq,termUrl:h.termUrl+"&three_d_secure_version="+r,md:h.md,parentUrl:g}),this.assetsUrl+"/3ds/"+r+"/html/style_frame?"+y},n.exports=m},{"../shared/receiver":34,"braintree-utilities":26}],28:[function(t,n,e){var c=t("braintree-utilities"),s=t("./authorization_service"),r=t("./loader");function i(){}function o(a,p){p=p||{},this.clientToken=p.clientToken,this.container=p.container,this.api=a,this.nonce=null,this._loader=null,this._boundHandleUserClose=c.bind(this._handleUserClose,this)}o.prototype.verify=function(a,p){if(!c.isFunction(p))throw this.api.sendAnalyticsEvents("3ds.web.no_callback"),new Error("No suitable callback argument was given");c.isFunction(a.onUserClose)&&(this._onUserClose=a.onUserClose),c.isFunction(a.onLookupComplete)&&(this._onLookupComplete=a.onLookupComplete),(a.useDefaultLoader===void 0||a.useDefaultLoader===!0)&&this._createDefaultLoader();var m={nonce:"",amount:a.amount},h=a.creditCard;if(typeof h=="string")m.nonce=h,this.api.sendAnalyticsEvents("3ds.web.verify.nonce"),this.startVerification(m,p);else{var y=this,g=function(S,x){if(S)return y._removeDefaultLoader(),p(S);m.nonce=x,y.startVerification(m,p)};this.api.sendAnalyticsEvents("3ds.web.verify.credit_card"),this.api.tokenizeCard(h,g)}},o.prototype.startVerification=function(a,p){this.api.lookup3DS(a,c.bind(this.handleLookupResponse(p),this))},o.prototype.handleLookupResponse=function(a){var p=this;return function(m,h){var y;this._onLookupComplete(),m?a(m.error):h.lookup&&h.lookup.acsUrl&&h.lookup.acsUrl.length>0?(p.nonce=h.paymentMethod.nonce,y=new s(this.clientToken.assetsUrl,this.container),y.get(h.lookup,c.bind(this.handleAuthenticationResponse(a),this)),this._detachListeners(),this._attachListeners()):(p.nonce=h.paymentMethod.nonce,a(null,{nonce:p.nonce,verificationDetails:h.threeDSecureInfo}))}},o.prototype.handleAuthenticationResponse=function(a){return function(p){var m,h=c.decodeQueryString(p);h.user_closed||(m=JSON.parse(h.auth_response),m.success?a(null,{nonce:m.paymentMethod.nonce,verificationDetails:m.threeDSecureInfo}):m.threeDSecureInfo&&m.threeDSecureInfo.liabilityShiftPossible?a(null,{nonce:this.nonce,verificationDetails:m.threeDSecureInfo}):a(m.error))}},o.prototype._attachListeners=function(){c.addEventListener(window,"message",this._boundHandleUserClose)},o.prototype._detachListeners=function(){c.removeEventListener(window,"message",this._boundHandleUserClose)},o.prototype._createDefaultLoader=function(){this._loader=new r,document.body.appendChild(this._loader.getElement())},o.prototype._removeDefaultLoader=function(){if(!!this._loader){var a=this._loader.getElement(),p=a.parentNode;p&&p.removeChild(a),this._loader.dispose(),this._loader=null}},o.prototype._handleUserClose=function(a){a.data==="user_closed=true"&&this._onUserClose()},o.prototype._onUserClose=i,o.prototype._onLookupComplete=function(){this._removeDefaultLoader()},n.exports=o},{"./authorization_service":27,"./loader":30,"braintree-utilities":26}],29:[function(t,n,e){var c=t("./client");n.exports={create:function(s,r){var i=new c(s,r);return i}}},{"./client":28}],30:[function(t,n,e){var c=t("./loader_display"),s=t("./loader_message"),r=t("./loader_spinner");function i(){this._element=document.createElement("div"),this._element.style.cssText=this._cssDeclarations,this._display=null,this._initialize()}i.prototype._cssDeclarations=["filter:progid:DXImageTransform.Microsoft.Gradient(StartColorStr=#7F000000, EndColorStr=#7F000000)","background-color: rgba(0, 0, 0, 0.5)","display: table","height: 100%","left: 0","position: fixed","right: 0","top: 0","width: 100%","z-index: 99999"].join(";"),i.prototype.getElement=function(){return this._element},i.prototype.dispose=function(){this._display.dispose(),this._display=null,this._element=null},i.prototype._initialize=function(){var o=new r,a=window.SVGElement&&window.SVGAnimateElement&&window.SVGAnimateTransformElement;a||(o=new s("Loading...")),this._display=new c(o),this.getElement().appendChild(this._display.getElement())},n.exports=i},{"./loader_display":31,"./loader_message":32,"./loader_spinner":33}],31:[function(t,n,e){function c(s){this._element=document.createElement("div"),this._element.style.cssText=this._cssDeclarations,this._displayObject=s,this._initialize()}c.prototype._cssDeclarations=["display: table-cell","vertical-align: middle"].join(";"),c.prototype.getElement=function(){return this._element},c.prototype.dispose=function(){this._displayObject.dispose(),this._displayObject=null,this._element=null},c.prototype._initialize=function(){this.getElement().appendChild(this._displayObject.getElement())},n.exports=c},{}],32:[function(t,n,e){function c(s){this._element=document.createElement("div"),this._element.style.cssText=this._cssDeclarations,this._element.innerHTML=s}c.prototype._cssDeclarations=["color: #fff","font-family: Helvetica, sans-serif","font-size: 12px","text-align: center"].join(";"),c.prototype.getElement=function(){return this._element},c.prototype.dispose=function(){this._element=null},n.exports=c},{}],33:[function(t,n,e){function c(){this._element=document.createElement("div"),this._element.style.cssText=this._cssDeclarations,this._element.innerHTML=this._markup}c.prototype._cssDeclarations=["height: 36px","margin-left: auto","margin-right: auto","width: 36px"].join(";"),c.prototype._markup=['<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"','width="100%" height="100%" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">','  <path fill="#FFF" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z">','    <animateTransform attributeType="xml"','    attributeName="transform"','    type="rotate"','    from="0 25 25"','    to="360 25 25"','    dur="780ms"','    repeatCount="indefinite"','    calcMode="spline"','    keySplines="0.44, 0.22, 0, 1"','    keyTimes="0;1"/>',"  </path>","</svg>"].join(""),c.prototype.getElement=function(){return this._element},c.prototype.dispose=function(){this._element=null},n.exports=c},{}],34:[function(t,n,e){var c=t("braintree-utilities");function s(r){this.postMessageReceiver(r),this.hashChangeReceiver(r)}s.prototype.postMessageReceiver=function(r){var i=this;this.wrappedCallback=function(o){var a=o.data;(/^(auth_response=)/.test(a)||a==="user_closed=true")&&(r(a),i.stopListening())},c.addEventListener(window,"message",this.wrappedCallback)},s.prototype.hashChangeReceiver=function(r){var i,o=window.location.hash,a=this;this.poll=setInterval(function(){i=window.location.hash,i.length>0&&i!==o&&(a.stopListening(),i=i.substring(1,i.length),r(i),o.length>0?window.location.hash=o:window.location.hash="")},10)},s.prototype.stopListening=function(){clearTimeout(this.poll),c.removeEventListener(window,"message",this.wrappedCallback)},n.exports=s},{"braintree-utilities":26}],35:[function(t,n,e){var c=Array.prototype.indexOf,s;c?s=function(r,i){return r.indexOf(i)}:s=function(i,o){for(var a=0,p=i.length;a<p;a++)if(i[a]===o)return a;return-1},n.exports={indexOf:s}},{}],36:[function(t,n,e){function c(r){var i,o,a="";for(i=0;i<r.length;i++)a+="%",o=r[i].charCodeAt(0).toString(16).toUpperCase(),o.length<2&&(a+="0"),a+=o;return a}function s(r){return decodeURIComponent(c(atob(r)))}n.exports={decodeUtf8:s}},{}],37:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],38:[function(t,n,e){function c(i,o,a,p){i.addEventListener?i.addEventListener(o,a,p||!1):i.attachEvent&&i.attachEvent("on"+o,a)}function s(i,o,a,p){i.removeEventListener?i.removeEventListener(o,a,p||!1):i.detachEvent&&i.detachEvent("on"+o,a)}function r(i){i.preventDefault?i.preventDefault():i.returnValue=!1}n.exports={addEventListener:c,removeEventListener:s,preventDefault:r}},{}],39:[function(t,n,e){var c=Object.prototype.toString;function s(i){return c.call(i)==="[object Function]"}function r(i,o){return function(){return i.apply(o,arguments)}}n.exports={bind:r,isFunction:s}},{}],40:[function(t,n,e){function c(r){var i,o,a,p,m=[{min:0,max:180,chars:7},{min:181,max:620,chars:14},{min:621,max:960,chars:22}];for(p=m.length,r=r||window.innerWidth,o=0;o<p;o++)a=m[o],r>=a.min&&r<=a.max&&(i=a.chars);return i||60}function s(r,i){var o,a;return r.indexOf("@")===-1?r:(r=r.split("@"),o=r[0],a=r[1],o.length>i&&(o=o.slice(0,i)+"..."),a.length>i&&(a="..."+a.slice(-i)),o+"@"+a)}n.exports={truncateEmail:s,getMaxCharLength:c}},{}],41:[function(t,n,e){var c=t("./array");function s(){return window.location.protocol==="https:"}function r(y){switch(y){case null:case void 0:return"";case!0:return"1";case!1:return"0";default:return encodeURIComponent(y)}}function i(y,g){var S=[],x,C;for(C in y)if(y.hasOwnProperty(C)){var T=y[C];g?x=g+"["+C+"]":x=C,typeof T=="object"?S.push(i(T,x)):T!=null&&S.push(r(x)+"="+r(T))}return S.join("&")}function o(y){for(var g={},S=y.split("&"),x=0;x<S.length;x++){var C=S[x].split("="),T=C[0],P=decodeURIComponent(C[1]);g[T]=P}return g}function a(y){var g=y.split("?");return g.length!==2?{}:o(g[1])}var p=document.createElement("a"),m=["paypal.com","braintreepayments.com","braintreegateway.com","localhost"];function h(y){if(y=y.toLowerCase(),!/^http/.test(y))return!1;p.href=y;var g=p.hostname.split("."),S=g.slice(-2).join(".");return c.indexOf(m,S)!==-1}n.exports={isBrowserHttps:s,makeQueryString:i,decodeQueryString:o,getParams:a,isWhitelistedDomain:h}},{"./array":35}],42:[function(t,n,e){function c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){var r=Math.random()*16|0,i=s==="x"?r:r&3|8;return i.toString(16)})}n.exports=c},{}],43:[function(t,n,e){var c=t("./lib/dom"),s=t("./lib/url"),r=t("./lib/fn"),i=t("./lib/events"),o=t("./lib/string"),a=t("./lib/array"),p=t("./lib/base64"),m=t("./lib/uuid");n.exports={string:o,array:a,normalizeElement:c.normalizeElement,isBrowserHttps:s.isBrowserHttps,makeQueryString:s.makeQueryString,decodeQueryString:s.decodeQueryString,getParams:s.getParams,isWhitelistedDomain:s.isWhitelistedDomain,removeEventListener:i.removeEventListener,addEventListener:i.addEventListener,preventDefault:i.preventDefault,bind:r.bind,isFunction:r.isFunction,base64ToUtf8:p.decodeUtf8,uuid:m}},{"./lib/array":35,"./lib/base64":36,"./lib/dom":37,"./lib/events":38,"./lib/fn":39,"./lib/string":40,"./lib/url":41,"./lib/uuid":42}],44:[function(t,n,e){var c=t("lodash.isarguments"),s=t("lodash.isarray"),r=t("lodash.isfunction"),i=t("lodash.isstring"),o=t("lodash.keys");function a(x){return!!x&&typeof x=="object"}var p=9007199254740991;function m(x){return function(C){return C==null?void 0:C[x]}}var h=m("length");function y(x){return x!=null&&g(h(x))}function g(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=p}function S(x){return x==null?!0:y(x)&&(s(x)||i(x)||c(x)||a(x)&&r(x.splice))?!x.length:!o(x).length}n.exports=S},{"lodash.isarguments":45,"lodash.isarray":46,"lodash.isfunction":47,"lodash.isstring":51,"lodash.keys":48}],45:[function(t,n,e){function c(g){return!!g&&typeof g=="object"}var s=Object.prototype,r=s.hasOwnProperty,i=s.propertyIsEnumerable,o=9007199254740991;function a(g){return function(S){return S==null?void 0:S[g]}}var p=a("length");function m(g){return g!=null&&h(p(g))}function h(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=o}function y(g){return c(g)&&m(g)&&r.call(g,"callee")&&!i.call(g,"callee")}n.exports=y},{}],46:[function(t,n,e){var c="[object Array]",s="[object Function]",r=/^\[object .+?Constructor\]$/;function i(_){return!!_&&typeof _=="object"}var o=Object.prototype,a=Function.prototype.toString,p=o.hasOwnProperty,m=o.toString,h=RegExp("^"+a.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=S(Array,"isArray"),g=9007199254740991;function S(_,I){var R=_==null?void 0:_[I];return v(R)?R:void 0}function x(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=g}var C=y||function(_){return i(_)&&x(_.length)&&m.call(_)==c};function T(_){return P(_)&&m.call(_)==s}function P(_){var I=typeof _;return!!_&&(I=="object"||I=="function")}function v(_){return _==null?!1:T(_)?h.test(a.call(_)):i(_)&&r.test(_)}n.exports=C},{}],47:[function(t,n,e){var c="[object Function]",s=Object.prototype,r=s.toString;function i(a){return o(a)&&r.call(a)==c}function o(a){var p=typeof a;return!!a&&(p=="object"||p=="function")}n.exports=i},{}],48:[function(t,n,e){var c=t("lodash._getnative"),s=t("lodash.isarguments"),r=t("lodash.isarray"),i=/^\d+$/,o=Object.prototype,a=o.hasOwnProperty,p=c(Object,"keys"),m=9007199254740991;function h(_){return function(I){return I==null?void 0:I[_]}}var y=h("length");function g(_){return _!=null&&x(y(_))}function S(_,I){return _=typeof _=="number"||i.test(_)?+_:-1,I=I==null?m:I,_>-1&&_%1==0&&_<I}function x(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=m}function C(_){for(var I=v(_),R=I.length,U=R&&_.length,D=!!U&&x(U)&&(r(_)||s(_)),b=-1,A=[];++b<R;){var L=I[b];(D&&S(L,U)||a.call(_,L))&&A.push(L)}return A}function T(_){var I=typeof _;return!!_&&(I=="object"||I=="function")}var P=p?function(_){var I=_==null?void 0:_.constructor;return typeof I=="function"&&I.prototype===_||typeof _!="function"&&g(_)?C(_):T(_)?p(_):[]}:C;function v(_){if(_==null)return[];T(_)||(_=Object(_));var I=_.length;I=I&&x(I)&&(r(_)||s(_))&&I||0;for(var R=_.constructor,U=-1,D=typeof R=="function"&&R.prototype===_,b=Array(I),A=I>0;++U<I;)b[U]=U+"";for(var L in _)!(A&&S(L,I))&&!(L=="constructor"&&(D||!a.call(_,L)))&&b.push(L);return b}n.exports=P},{"lodash._getnative":49,"lodash.isarguments":45,"lodash.isarray":46}],49:[function(t,n,e){var c="[object Function]",s=/^\[object .+?Constructor\]$/;function r(x){return!!x&&typeof x=="object"}var i=Object.prototype,o=Function.prototype.toString,a=i.hasOwnProperty,p=i.toString,m=RegExp("^"+o.call(a).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(x,C){var T=x==null?void 0:x[C];return S(T)?T:void 0}function y(x){return g(x)&&p.call(x)==c}function g(x){var C=typeof x;return!!x&&(C=="object"||C=="function")}function S(x){return x==null?!1:y(x)?m.test(o.call(x)):r(x)&&s.test(x)}n.exports=h},{}],50:[function(t,n,e){function c(s){var r=typeof s;return!!s&&(r=="object"||r=="function")}n.exports=c},{}],51:[function(t,n,e){var c="[object String]";function s(a){return!!a&&typeof a=="object"}var r=Object.prototype,i=r.toString;function o(a){return typeof a=="string"||s(a)&&i.call(a)==c}n.exports=o},{}],52:[function(t,n,e){var c=t("framebus"),s=t("./lib/events"),r=t("./lib/check-origin").checkOrigin;function i(o){if(o=o||{},this.channel=o.channel,!this.channel)throw new Error("Channel ID must be specified");this.merchantUrl=o.merchantUrl,this._isDestroyed=!1,this._isVerbose=!1,this._listeners=[],this._log("new bus on channel "+this.channel,[location.href])}i.prototype.on=function(o,a){var p,m,h=a,y=this;this._isDestroyed||(this.merchantUrl&&(h=function(){r(this.origin,y.merchantUrl)&&a.apply(this,arguments)}),p=this._namespaceEvent(o),m=Array.prototype.slice.call(arguments),m[0]=p,m[1]=h,this._log("on",m),c.on.apply(c,m),this._listeners.push({eventName:o,handler:h,originalHandler:a}))},i.prototype.emit=function(o,a,p){var m;this._isDestroyed||(m=Array.prototype.slice.call(arguments),m[0]=this._namespaceEvent(o),this._log("emit",m),c.emit.apply(c,m))},i.prototype._offDirect=function(o,a){var p=Array.prototype.slice.call(arguments);this._isDestroyed||(p[0]=this._namespaceEvent(o),this._log("off",p),c.off.apply(c,p))},i.prototype.off=function(o,a){var p,m,h=a;if(!this._isDestroyed){if(this.merchantUrl)for(p=0;p<this._listeners.length;p++)m=this._listeners[p],m.originalHandler===a&&(h=m.handler);this._offDirect.call(this,o,h)}},i.prototype._namespaceEvent=function(o){return["braintree",this.channel,o].join(":")},i.prototype.teardown=function(){var o,a;for(a=0;a<this._listeners.length;a++)o=this._listeners[a],this._offDirect(o.eventName,o.handler);this._listeners.length=0,this._isDestroyed=!0},i.prototype._log=function(o,a){this._isVerbose&&console.log(o,a)},i.events=s,n.exports=i},{"./lib/check-origin":53,"./lib/events":54,framebus:55}],53:[function(t,n,e){var c=/^https:\/\/([a-zA-Z0-9-]+\.)*(braintreepayments|braintreegateway|paypal)\.com(:\d{1,5})?$/;function s(r,i){var o,a,p=document.createElement("a");return p.href=i,p.protocol==="https:"?a=p.host.replace(/:443$/,""):p.protocol==="http:"?a=p.host.replace(/:80$/,""):a=p.host,o=p.protocol+"//"+a,o===r||c.test(r)}n.exports={checkOrigin:s}},{}],54:[function(t,n,e){var c,s,r=["PAYMENT_METHOD_REQUEST","PAYMENT_METHOD_RECEIVED","PAYMENT_METHOD_GENERATED","PAYMENT_METHOD_NOT_GENERATED","PAYMENT_METHOD_CANCELLED","PAYMENT_METHOD_ERROR","CONFIGURATION_REQUEST","ROOT_METADATA_REQUEST","ERROR","WARNING","UI_POPUP_DID_OPEN","UI_POPUP_DID_CLOSE","UI_POPUP_FORCE_CLOSE","ASYNC_DEPENDENCY_INITIALIZING","ASYNC_DEPENDENCY_READY","USER_FORM_SUBMIT_REQUEST","SEND_ANALYTICS_EVENTS"],i={};for(c=0;c<r.length;c++)s=r[c],i[s]=s;n.exports=i},{}],55:[function(t,n,e){(function(c,s){typeof e=="object"&&typeof n!="undefined"?n.exports=s():c.framebus=s()})(this,function(){var c,s,r=[],i={},o="/*framebus*/";function a(b){return b==null||b.Window==null||b.constructor!==b.Window?!1:(r.push(b),!0)}function p(b){var A,L={};for(A in s)!s.hasOwnProperty(A)||(L[A]=s[A]);return L._origin=b||"*",L}function m(b){var A,L,k=g(this);return S(b)||S(k)||(L=Array.prototype.slice.call(arguments,1),A=x(b,L,k),A===!1)?!1:(I(c.top,A,k),!0)}function h(b,A){var L=g(this);return D(b,A,L)?!1:(i[L]=i[L]||{},i[L][b]=i[L][b]||[],i[L][b].push(A),!0)}function y(b,A){var L,k,H=g(this);if(D(b,A,H)||(k=i[H]&&i[H][b],!k))return!1;for(L=0;L<k.length;L++)if(k[L]===A)return k.splice(L,1),!0;return!1}function g(b){return b&&b._origin||"*"}function S(b){return typeof b!="string"}function x(b,A,L){var k=!1,H={event:b,origin:L},X=A[A.length-1];typeof X=="function"&&(H.reply=U(X,L),A=A.slice(0,-1)),H.args=A;try{k=o+JSON.stringify(H)}catch(ne){throw new Error("Could not stringify event: "+ne.message)}return k}function C(b){var A,L,k,H;if(b.data.slice(0,o.length)!==o)return!1;try{A=JSON.parse(b.data.slice(o.length))}catch(X){return!1}return A.reply!=null&&(L=b.origin,k=b.source,H=A.reply,A.reply=function(ne){var ae=x(H,[ne],L);if(ae===!1)return!1;k.postMessage(ae,L)},A.args.push(A.reply)),A}function T(b){c||(c=b||window,c.addEventListener?c.addEventListener("message",v,!1):c.attachEvent?c.attachEvent("onmessage",v):c.onmessage===null?c.onmessage=v:c=null)}function P(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var A=Math.random()*16|0,L=b==="x"?A:A&3|8;return L.toString(16)})}function v(b){var A;S(b.data)||(A=C(b),!!A&&(_("*",A.event,A.args,b),_(b.origin,A.event,A.args,b),R(b.data,A.origin,b.source)))}function _(b,A,L,k){var H;if(!!i[b]&&!!i[b][A])for(H=0;H<i[b][A].length;H++)i[b][A][H].apply(k,L)}function I(b,A,L){var k;try{b.postMessage(A,L)}catch(H){return}for(b.opener&&b.opener!==b&&!b.opener.closed&&b.opener!==c&&I(b.opener.top,A,L),k=0;k<b.frames.length;k++)I(b.frames[k],A,L)}function R(b,A,L){var k,H;for(k=r.length-1;k>=0;k--)H=r[k],H.closed===!0?r=r.slice(k,1):L!==H&&I(H.top,b,A)}function U(b,A){var L=P();function k(H,X){b(H,X),s.target(A).unsubscribe(L,k)}return s.target(A).subscribe(L,k),L}function D(b,A,L){return!!(S(b)||typeof A!="function"||S(L))}return T(),s={target:p,include:a,publish:m,pub:m,trigger:m,emit:m,subscribe:h,sub:h,on:h,unsubscribe:y,unsub:y,off:y},s})},{}],56:[function(t,n,e){var c=t("./lib/coinbase");function s(r){return new c(r)}n.exports={create:s}},{"./lib/coinbase":59}],57:[function(t,n,e){(function(c){function s(o){return o=o||c.navigator.userAgent,!/AppleWebKit\//.test(o)||!/Mobile\//.test(o)?null:o.replace(/.* OS ([0-9_]+) like Mac OS X.*/,"$1").replace(/_/g,".")}function r(o){o=o||c.navigator.userAgent;var a=null,p=/MSIE.(\d+)/.exec(o);return/Trident/.test(o)&&(a=11),p&&(a=parseInt(p[1],10)),a}function i(o){return o=o||c.navigator.userAgent,/Android/.test(o)?o.replace(/^.* Android ([0-9\.]+).*$/,"$1"):null}n.exports={ieVersion:r,iOSSafariVersion:s,androidVersion:i}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],58:[function(t,n,e){var c=t("braintree-bus").events;function s(r,i,o){if(r){o.bus.emit(c.ERROR,r.error),o._sendAnalyticsEvent("generate.nonce.failed");return}o.bus.emit(c.PAYMENT_METHOD_GENERATED,i),o._sendAnalyticsEvent("generate.nonce.succeeded")}n.exports={tokenize:s}},{"braintree-bus":67}],59:[function(t,n,e){(function(c){var s=t("braintree-utilities"),r=t("destructor"),i=t("./dom/composer"),o=t("./url-composer"),a=t("./callbacks"),p=t("./constants"),m=t("./detector"),h=t("braintree-bus");function y(C){return{clientId:C.configuration.coinbase.clientId,redirectUrl:C.configuration.coinbase.redirectUrl,scopes:C.configuration.coinbase.scopes||p.SCOPES,meta:{authorizations_merchant_account:C.configuration.coinbase.merchantAccount||""}}}function g(C){return function(T,P){C.emit(h.events.ERROR,{type:P,message:T})}}function S(C,T){var P=(C||{}).coinbase,v=g(T);if(C.apiClient==null)v("settings.apiClient is required for coinbase",p.CONFIGURATION_ERROR);else if(!C.configuration.coinbaseEnabled)v("Coinbase is not enabled for your merchant account",p.CONFIGURATION_ERROR);else if(!P||!P.container&&!P.button)v("Either options.coinbase.container or options.coinbase.button is required for Coinbase integrations",p.CONFIGURATION_ERROR);else if(P.container&&P.button)v("options.coinbase.container and options.coinbase.button are mutually exclusive",p.CONFIGURATION_ERROR);else if(!m.isSupportedBrowser())v("Coinbase is not supported by your browser. Please consider upgrading",p.UNSUPPORTED_BROWSER_ERROR);else return!0;return!1}function x(C){var T,P;this.destructor=new r,this.channel=C.channel,P={channel:this.channel};try{C.coinbase.container&&(P.merchantUrl=c.location.href)}catch(v){}this.bus=C.bus||new h(P),this.canCreateIntegration=S(C,this.bus),!!this.canCreateIntegration&&(this.buttonId=C.coinbase.button||p.BUTTON_ID,this.apiClient=C.apiClient,this.assetsUrl=C.configuration.assetsUrl,this.environment=C.configuration.coinbase.environment,this._onOAuthSuccess=s.bind(this._onOAuthSuccess,this),this._handleButtonClick=s.bind(this._handleButtonClick,this),this.popupParams=y(C),this.redirectDoneInterval=null,C.coinbase.container?(T=s.normalizeElement(C.coinbase.container),this._insertFrame(T)):(c.braintreeCoinbasePopupCallback=this._onOAuthSuccess,T=document.body,s.addEventListener(T,"click",this._handleButtonClick),this._sendAnalyticsEvent("initialized"),this.destructor.registerFunctionForTeardown(s.bind(function(){this._closePopup()},this)),this.bus.on(p.TEARDOWN_EVENT,s.bind(this.destructor.teardown,this.destructor))))}x.prototype._sendAnalyticsEvent=function(C){var T=this.apiClient.integration+".web.coinbase.";this.apiClient.sendAnalyticsEvents(T+C)},x.prototype._insertFrame=function(C){var T=i.createFrame({channel:this.channel});this.bus.emit(h.events.ASYNC_DEPENDENCY_INITIALIZING),C.appendChild(T),this.destructor.registerFunctionForTeardown(function(){C.removeChild(T)}),setTimeout(s.bind(function(){T.src=this.assetsUrl+"/coinbase/"+p.VERSION+"/coinbase-frame.html#"+this.channel},this),0)},x.prototype._onOAuthSuccess=function(C){if(!C.code){this._sendAnalyticsEvent("popup.denied"),this._closePopup();return}this.bus.emit("coinbase:view:navigate","loading"),this._sendAnalyticsEvent("popup.authorized"),this.apiClient.tokenizeCoinbase({code:C.code,query:o.getQueryString()},s.bind(function(T,P){a.tokenize.apply(null,[T,P,this])},this)),this._closePopup()},x.prototype._clearPollForRedirectDone=function(){this.redirectDoneInterval&&(clearInterval(this.redirectDoneInterval),this.redirectDoneInterval=null)},x.prototype._closePopup=function(C){C=C||this.popup,C!=null&&(m.shouldCloseFromParent()&&C.close(),this._popupCleanup())},x.prototype._popupCleanup=function(){this._clearPollForRedirectDone(),this.bus.emit(h.events.UI_POPUP_DID_CLOSE,{source:p.INTEGRATION_NAME})},x.prototype._pollForRedirectDone=function(C){var T=setInterval(s.bind(function(){var P;if(C==null||C.closed){this._sendAnalyticsEvent("popup.aborted"),this._popupCleanup();return}try{if(C.location.href==="about:blank")throw new Error("Not finished loading");P=s.decodeQueryString(C.location.search.replace(/^\?/,"")).code}catch(v){return}this._onOAuthSuccess({code:P})},this),100);return this.redirectDoneInterval=T,T},x.prototype._openPopup=function(){var C;this._sendAnalyticsEvent("popup.started"),C=i.createPopup(o.compose(this._getOAuthBaseUrl(),this.popupParams)),C.focus(),this._pollForRedirectDone(C),this.bus.emit(h.events.UI_POPUP_DID_OPEN,{source:p.INTEGRATION_NAME}),this.bus.on(h.events.UI_POPUP_FORCE_CLOSE,function(T){T.target===p.INTEGRATION_NAME&&C.close()}),this.popup=C},x.prototype._getOAuthBaseUrl=function(){var C;return this.environment==="shared_sandbox"?C=p.SANDBOX_OAUTH_BASE_URL:C=p.PRODUCTION_OAUTH_BASE_URL,C},x.prototype._handleButtonClick=function(C){for(var T=C.target||C.srcElement;;){if(T==null||T===C.currentTarget)return;if(T.id===this.buttonId)break;T=T.parentNode}C&&C.preventDefault?C.preventDefault():C.returnValue=!1,this._openPopup()},x.prototype.teardown=function(C){var T=this;if(!this.canCreateIntegration){C(null);return}this.bus.emit(p.TEARDOWN_EVENT,function(){T.destructor.teardown(function(P){if(P)return C(P);T.bus.teardown(),C(null)})})},n.exports=x}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./callbacks":58,"./constants":60,"./detector":61,"./dom/composer":63,"./url-composer":66,"braintree-bus":67,"braintree-utilities":79,destructor:80}],60:[function(t,n,e){n.exports={PRODUCTION_OAUTH_BASE_URL:"https://coinbase.com",SANDBOX_OAUTH_BASE_URL:"https://sandbox.coinbase.com",ORIGIN_URL:"https://www.coinbase.com",FRAME_NAME:"braintree-coinbase-frame",POPUP_NAME:"coinbase",BUTTON_ID:"bt-coinbase-button",SCOPES:"send",VERSION:"0.3.1",INTEGRATION_NAME:"Coinbase",CONFIGURATION_ERROR:"CONFIGURATION",UNSUPPORTED_BROWSER_ERROR:"UNSUPPORTED_BROWSER",TEARDOWN_EVENT:"coinbase:TEARDOWN"}},{}],61:[function(t,n,e){var c=t("./browser");function s(){var a=c.ieVersion();return!a||a>8}function r(){var a=c.androidVersion();return a==null?!1:/^5/.test(a)}function i(){return!(r()||o())}function o(){var a=c.iOSSafariVersion();return a==null?!1:/^8\.0/.test(a)||/^8\.1$/.test(a)}n.exports={isSupportedBrowser:s,shouldCloseFromParent:i,shouldDisplayIOSClose:o,shouldDisplayLollipopClose:r}},{"./browser":57}],62:[function(t,n,e){function c(s){var r=document.createElement("button");return s=s||{},r.id=s.id||"coinbase-button",r.style.backgroundColor=s.backgroundColor||"#EEE",r.style.color=s.color||"#4597C3",r.style.border=s.border||"0",r.style.borderRadius=s.borderRadius||"6px",r.style.padding=s.padding||"12px",r.innerHTML=s.innerHTML||"coinbase",r}n.exports={create:c}},{}],63:[function(t,n,e){var c=t("./popup"),s=t("./button"),r=t("./frame");n.exports={createButton:s.create,createPopup:c.create,createFrame:r.create}},{"./button":62,"./frame":64,"./popup":65}],64:[function(t,n,e){var c=t("../constants"),s=t("iframer");function r(i){return s({name:c.FRAME_NAME,height:"70px",width:"100%",style:{padding:0,margin:0,border:0,outline:"none"}})}n.exports={create:r}},{"../constants":60,iframer:83}],65:[function(t,n,e){(function(c){var s=t("../constants");function r(a){var p=[];for(var m in a)a.hasOwnProperty(m)&&p.push([m,a[m]].join("="));return p.join(",")}function i(){var a=850,p=600;return r({width:a,height:p,left:(screen.width-a)/2,top:(screen.height-p)/4})}function o(a){return c.open(a,s.POPUP_NAME,i())}n.exports={create:o}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../constants":60}],66:[function(t,n,e){var c=t("./constants");function s(){return"version="+c.VERSION}function r(i,o){var a=i+"/oauth/authorize?response_type=code",p=o.redirectUrl+"?"+s();if(a+="&redirect_uri="+encodeURIComponent(p),a+="&client_id="+o.clientId,o.scopes&&(a+="&scope="+encodeURIComponent(o.scopes)),o.meta)for(var m in o.meta)o.meta.hasOwnProperty(m)&&(a+="&meta["+encodeURIComponent(m)+"]="+encodeURIComponent(o.meta[m]));return a}n.exports={compose:r,getQueryString:s}},{"./constants":60}],67:[function(t,n,e){arguments[4][52][0].apply(e,arguments)},{"./lib/check-origin":68,"./lib/events":69,dup:52,framebus:70}],68:[function(t,n,e){arguments[4][53][0].apply(e,arguments)},{dup:53}],69:[function(t,n,e){arguments[4][54][0].apply(e,arguments)},{dup:54}],70:[function(t,n,e){arguments[4][55][0].apply(e,arguments)},{dup:55}],71:[function(t,n,e){arguments[4][35][0].apply(e,arguments)},{dup:35}],72:[function(t,n,e){arguments[4][36][0].apply(e,arguments)},{dup:36}],73:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],74:[function(t,n,e){arguments[4][38][0].apply(e,arguments)},{dup:38}],75:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],76:[function(t,n,e){arguments[4][40][0].apply(e,arguments)},{dup:40}],77:[function(t,n,e){arguments[4][41][0].apply(e,arguments)},{"./array":71,dup:41}],78:[function(t,n,e){arguments[4][42][0].apply(e,arguments)},{dup:42}],79:[function(t,n,e){arguments[4][43][0].apply(e,arguments)},{"./lib/array":71,"./lib/base64":72,"./lib/dom":73,"./lib/events":74,"./lib/fn":75,"./lib/string":76,"./lib/url":77,"./lib/uuid":78,dup:43}],80:[function(t,n,e){var c=t("batch-execute-functions"),s=t("braintree-utilities/lib/fn");function r(){this._teardownRegistry=[]}r.prototype.registerFunctionForTeardown=function(i){s.isFunction(i)&&this._teardownRegistry.push(i)},r.prototype.teardown=function(i){c(this._teardownRegistry,s.bind(function(o){this._teardownRegistry=[],s.isFunction(i)&&i(o)},this))},n.exports=r},{"batch-execute-functions":81,"braintree-utilities/lib/fn":82}],81:[function(t,n,e){function c(r,i){var o=r.length===0,a;o?(r(),i(null)):(a=s(i),r(a))}function s(r){var i=!1;return function(){i||(i=!0,r.apply(this,arguments))}}n.exports=function(r,i){var o=r.length,a=o;if(o===0){i(null);return}for(var p=0;p<o;p++)c(r[p],function(m){if(m){i(m);return}a-=1,a===0&&i(null)})}},{}],82:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],83:[function(t,n,e){var c=t("lodash.assign"),s=t("lodash.isstring"),r=t("setattributes"),i=t("./lib/default-attributes");n.exports=function(a){var p=document.createElement("iframe"),m=c({},i,a);return m.style&&!s(m.style)&&(c(p.style,m.style),delete m.style),r(p,m),p.getAttribute("id")||(p.id=p.name),p}},{"./lib/default-attributes":84,"lodash.assign":85,"lodash.isstring":96,setattributes:97}],84:[function(t,n,e){n.exports={src:"about:blank",frameBorder:0,allowtransparency:!0,scrolling:"no"}},{}],85:[function(t,n,e){var c=t("lodash._baseassign"),s=t("lodash._createassigner"),r=t("lodash.keys");function i(a,p,m){for(var h=-1,y=r(p),g=y.length;++h<g;){var S=y[h],x=a[S],C=m(x,p[S],S,a,p);((C===C?C!==x:x===x)||x===void 0&&!(S in a))&&(a[S]=C)}return a}var o=s(function(a,p,m){return m?i(a,p,m):c(a,p)});n.exports=o},{"lodash._baseassign":86,"lodash._createassigner":88,"lodash.keys":92}],86:[function(t,n,e){var c=t("lodash._basecopy"),s=t("lodash.keys");function r(i,o){return o==null?i:c(o,s(o),i)}n.exports=r},{"lodash._basecopy":87,"lodash.keys":92}],87:[function(t,n,e){function c(s,r,i){i||(i={});for(var o=-1,a=r.length;++o<a;){var p=r[o];i[p]=s[p]}return i}n.exports=c},{}],88:[function(t,n,e){var c=t("lodash._bindcallback"),s=t("lodash._isiterateecall"),r=t("lodash.restparam");function i(o){return r(function(a,p){var m=-1,h=a==null?0:p.length,y=h>2?p[h-2]:void 0,g=h>2?p[2]:void 0,S=h>1?p[h-1]:void 0;for(typeof y=="function"?(y=c(y,S,5),h-=2):(y=typeof S=="function"?S:void 0,h-=y?1:0),g&&s(p[0],p[1],g)&&(y=h<3?void 0:y,h=1);++m<h;){var x=p[m];x&&o(a,x,y)}return a})}n.exports=i},{"lodash._bindcallback":89,"lodash._isiterateecall":90,"lodash.restparam":91}],89:[function(t,n,e){function c(r,i,o){if(typeof r!="function")return s;if(i===void 0)return r;switch(o){case 1:return function(a){return r.call(i,a)};case 3:return function(a,p,m){return r.call(i,a,p,m)};case 4:return function(a,p,m,h){return r.call(i,a,p,m,h)};case 5:return function(a,p,m,h,y){return r.call(i,a,p,m,h,y)}}return function(){return r.apply(i,arguments)}}function s(r){return r}n.exports=c},{}],90:[function(t,n,e){var c=/^\d+$/,s=9007199254740991;function r(y){return function(g){return g==null?void 0:g[y]}}var i=r("length");function o(y){return y!=null&&m(i(y))}function a(y,g){return y=typeof y=="number"||c.test(y)?+y:-1,g=g==null?s:g,y>-1&&y%1==0&&y<g}function p(y,g,S){if(!h(S))return!1;var x=typeof g;if(x=="number"?o(S)&&a(g,S.length):x=="string"&&g in S){var C=S[g];return y===y?y===C:C!==C}return!1}function m(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=s}function h(y){var g=typeof y;return!!y&&(g=="object"||g=="function")}n.exports=p},{}],91:[function(t,n,e){var c="Expected a function",s=Math.max;function r(i,o){if(typeof i!="function")throw new TypeError(c);return o=s(o===void 0?i.length-1:+o||0,0),function(){for(var a=arguments,p=-1,m=s(a.length-o,0),h=Array(m);++p<m;)h[p]=a[o+p];switch(o){case 0:return i.call(this,h);case 1:return i.call(this,a[0],h);case 2:return i.call(this,a[0],a[1],h)}var y=Array(o+1);for(p=-1;++p<o;)y[p]=a[p];return y[o]=h,i.apply(this,y)}}n.exports=r},{}],92:[function(t,n,e){arguments[4][48][0].apply(e,arguments)},{dup:48,"lodash._getnative":93,"lodash.isarguments":94,"lodash.isarray":95}],93:[function(t,n,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],94:[function(t,n,e){arguments[4][45][0].apply(e,arguments)},{dup:45}],95:[function(t,n,e){arguments[4][46][0].apply(e,arguments)},{dup:46}],96:[function(t,n,e){arguments[4][51][0].apply(e,arguments)},{dup:51}],97:[function(t,n,e){n.exports=function(s,r){var i;for(var o in r)r.hasOwnProperty(o)&&(i=r[o],i==null?s.removeAttribute(o):s.setAttribute(o,i))}},{}],98:[function(t,n,e){arguments[4][2][0].apply(e,arguments)},{"./coinbase-account":99,"./constants":100,"./credit-card":101,"./europe-bank-account":102,"./normalize-api-fields":104,"./parse-client-token":105,"./paypal-account":106,"./request/choose-driver":109,"./sepa-mandate":114,"./should-enable-cors":115,"./util":116,"braintree-3ds":125,"braintree-utilities":139,dup:2}],99:[function(t,n,e){arguments[4][3][0].apply(e,arguments)},{dup:3}],100:[function(t,n,e){arguments[4][4][0].apply(e,arguments)},{dup:4}],101:[function(t,n,e){arguments[4][5][0].apply(e,arguments)},{dup:5}],102:[function(t,n,e){arguments[4][6][0].apply(e,arguments)},{dup:6}],103:[function(t,n,e){arguments[4][7][0].apply(e,arguments)},{"./constants":100,"./parse-client-token":105,"./request/choose-driver":109,"./should-enable-cors":115,"./util":116,dup:7}],104:[function(t,n,e){arguments[4][8][0].apply(e,arguments)},{dup:8}],105:[function(t,n,e){arguments[4][9][0].apply(e,arguments)},{"./polyfill":107,"braintree-utilities":139,dup:9}],106:[function(t,n,e){arguments[4][10][0].apply(e,arguments)},{dup:10}],107:[function(t,n,e){arguments[4][11][0].apply(e,arguments)},{dup:11}],108:[function(t,n,e){arguments[4][12][0].apply(e,arguments)},{"../constants":100,"../util":116,"./parse-body":112,"./prep-body":113,dup:12}],109:[function(t,n,e){arguments[4][13][0].apply(e,arguments)},{"../util":116,"./ajax-driver":108,"./jsonp-driver":110,dup:13}],110:[function(t,n,e){arguments[4][14][0].apply(e,arguments)},{"../constants":100,"./jsonp":111,dup:14}],111:[function(t,n,e){arguments[4][15][0].apply(e,arguments)},{"../util":116,dup:15}],112:[function(t,n,e){arguments[4][16][0].apply(e,arguments)},{dup:16}],113:[function(t,n,e){arguments[4][17][0].apply(e,arguments)},{dup:17,"lodash.isstring":147}],114:[function(t,n,e){arguments[4][18][0].apply(e,arguments)},{dup:18}],115:[function(t,n,e){arguments[4][19][0].apply(e,arguments)},{dup:19}],116:[function(t,n,e){arguments[4][20][0].apply(e,arguments)},{dup:20,"lodash.isempty":140,"lodash.isobject":146}],117:[function(t,n,e){arguments[4][21][0].apply(e,arguments)},{"./lib/client":98,"./lib/get-configuration":103,"./lib/parse-client-token":105,"./lib/util":116,dup:21}],118:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],119:[function(t,n,e){arguments[4][23][0].apply(e,arguments)},{dup:23}],120:[function(t,n,e){arguments[4][24][0].apply(e,arguments)},{dup:24}],121:[function(t,n,e){arguments[4][25][0].apply(e,arguments)},{dup:25}],122:[function(t,n,e){arguments[4][26][0].apply(e,arguments)},{"./lib/dom":118,"./lib/events":119,"./lib/fn":120,"./lib/url":121,dup:26}],123:[function(t,n,e){arguments[4][27][0].apply(e,arguments)},{"../shared/receiver":130,"braintree-utilities":122,dup:27}],124:[function(t,n,e){arguments[4][28][0].apply(e,arguments)},{"./authorization_service":123,"./loader":126,"braintree-utilities":122,dup:28}],125:[function(t,n,e){arguments[4][29][0].apply(e,arguments)},{"./client":124,dup:29}],126:[function(t,n,e){arguments[4][30][0].apply(e,arguments)},{"./loader_display":127,"./loader_message":128,"./loader_spinner":129,dup:30}],127:[function(t,n,e){arguments[4][31][0].apply(e,arguments)},{dup:31}],128:[function(t,n,e){arguments[4][32][0].apply(e,arguments)},{dup:32}],129:[function(t,n,e){arguments[4][33][0].apply(e,arguments)},{dup:33}],130:[function(t,n,e){arguments[4][34][0].apply(e,arguments)},{"braintree-utilities":122,dup:34}],131:[function(t,n,e){arguments[4][35][0].apply(e,arguments)},{dup:35}],132:[function(t,n,e){arguments[4][36][0].apply(e,arguments)},{dup:36}],133:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],134:[function(t,n,e){arguments[4][38][0].apply(e,arguments)},{dup:38}],135:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],136:[function(t,n,e){arguments[4][40][0].apply(e,arguments)},{dup:40}],137:[function(t,n,e){arguments[4][41][0].apply(e,arguments)},{"./array":131,dup:41}],138:[function(t,n,e){arguments[4][42][0].apply(e,arguments)},{dup:42}],139:[function(t,n,e){arguments[4][43][0].apply(e,arguments)},{"./lib/array":131,"./lib/base64":132,"./lib/dom":133,"./lib/events":134,"./lib/fn":135,"./lib/string":136,"./lib/url":137,"./lib/uuid":138,dup:43}],140:[function(t,n,e){arguments[4][44][0].apply(e,arguments)},{dup:44,"lodash.isarguments":141,"lodash.isarray":142,"lodash.isfunction":143,"lodash.isstring":147,"lodash.keys":144}],141:[function(t,n,e){arguments[4][45][0].apply(e,arguments)},{dup:45}],142:[function(t,n,e){arguments[4][46][0].apply(e,arguments)},{dup:46}],143:[function(t,n,e){arguments[4][47][0].apply(e,arguments)},{dup:47}],144:[function(t,n,e){arguments[4][48][0].apply(e,arguments)},{dup:48,"lodash._getnative":145,"lodash.isarguments":141,"lodash.isarray":142}],145:[function(t,n,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],146:[function(t,n,e){arguments[4][50][0].apply(e,arguments)},{dup:50}],147:[function(t,n,e){arguments[4][51][0].apply(e,arguments)},{dup:51}],148:[function(t,n,e){arguments[4][52][0].apply(e,arguments)},{"./lib/check-origin":149,"./lib/events":150,dup:52,framebus:151}],149:[function(t,n,e){arguments[4][53][0].apply(e,arguments)},{dup:53}],150:[function(t,n,e){arguments[4][54][0].apply(e,arguments)},{dup:54}],151:[function(t,n,e){arguments[4][55][0].apply(e,arguments)},{dup:55}],152:[function(t,n,e){arguments[4][52][0].apply(e,arguments)},{"./lib/check-origin":153,"./lib/events":154,dup:52,framebus:155}],153:[function(t,n,e){arguments[4][53][0].apply(e,arguments)},{dup:53}],154:[function(t,n,e){arguments[4][54][0].apply(e,arguments)},{dup:54}],155:[function(t,n,e){arguments[4][55][0].apply(e,arguments)},{dup:55}],156:[function(t,n,e){arguments[4][35][0].apply(e,arguments)},{dup:35}],157:[function(t,n,e){arguments[4][36][0].apply(e,arguments)},{dup:36}],158:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],159:[function(t,n,e){arguments[4][38][0].apply(e,arguments)},{dup:38}],160:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],161:[function(t,n,e){arguments[4][40][0].apply(e,arguments)},{dup:40}],162:[function(t,n,e){arguments[4][41][0].apply(e,arguments)},{"./array":156,dup:41}],163:[function(t,n,e){arguments[4][42][0].apply(e,arguments)},{dup:42}],164:[function(t,n,e){arguments[4][43][0].apply(e,arguments)},{"./lib/array":156,"./lib/base64":157,"./lib/dom":158,"./lib/events":159,"./lib/fn":160,"./lib/string":161,"./lib/url":162,"./lib/uuid":163,dup:43}],165:[function(t,n,e){arguments[4][80][0].apply(e,arguments)},{"batch-execute-functions":166,"braintree-utilities/lib/fn":167,dup:80}],166:[function(t,n,e){arguments[4][81][0].apply(e,arguments)},{dup:81}],167:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],168:[function(t,n,e){arguments[4][83][0].apply(e,arguments)},{"./lib/default-attributes":169,dup:83,"lodash.assign":170,"lodash.isstring":181,setattributes:182}],169:[function(t,n,e){arguments[4][84][0].apply(e,arguments)},{dup:84}],170:[function(t,n,e){arguments[4][85][0].apply(e,arguments)},{dup:85,"lodash._baseassign":171,"lodash._createassigner":173,"lodash.keys":177}],171:[function(t,n,e){arguments[4][86][0].apply(e,arguments)},{dup:86,"lodash._basecopy":172,"lodash.keys":177}],172:[function(t,n,e){arguments[4][87][0].apply(e,arguments)},{dup:87}],173:[function(t,n,e){arguments[4][88][0].apply(e,arguments)},{dup:88,"lodash._bindcallback":174,"lodash._isiterateecall":175,"lodash.restparam":176}],174:[function(t,n,e){arguments[4][89][0].apply(e,arguments)},{dup:89}],175:[function(t,n,e){arguments[4][90][0].apply(e,arguments)},{dup:90}],176:[function(t,n,e){arguments[4][91][0].apply(e,arguments)},{dup:91}],177:[function(t,n,e){arguments[4][48][0].apply(e,arguments)},{dup:48,"lodash._getnative":178,"lodash.isarguments":179,"lodash.isarray":180}],178:[function(t,n,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],179:[function(t,n,e){arguments[4][45][0].apply(e,arguments)},{dup:45}],180:[function(t,n,e){arguments[4][46][0].apply(e,arguments)},{dup:46}],181:[function(t,n,e){arguments[4][51][0].apply(e,arguments)},{dup:51}],182:[function(t,n,e){arguments[4][97][0].apply(e,arguments)},{dup:97}],183:[function(t,n,e){(function(c){var s=t("braintree-utilities"),r=t("../../shared/util/browser"),i=t("destructor"),o=t("braintree-bus"),a=t("../../shared/constants"),p=t("./popup-view"),m=t("./modal-view");function h(y){this.options=y||{},this.destructor=new i,this.bus=new o({merchantUrl:c.location.href,channel:this.options.channel}),this.destructor.registerFunctionForTeardown(s.bind(function(){this.bus.teardown()},this)),this._initialize()}h.prototype._initialize=function(){r.isPopupSupported()?this.app=new p({src:this._buildUrl(),isHermes:this.options.isHermes,channel:this.options.channel}):this.app=new m({src:this._buildUrl(),headless:this.options.headless,isHermes:this.options.isHermes,insertFrameFunction:this.options.insertFrameFunction,channel:this.options.channel}),this.destructor.registerFunctionForTeardown(s.bind(function(){this.app.teardown()},this)),this.bus.on(a.events.CLOSE_APP,s.bind(this.close,this)),this.bus.on(a.events.FOCUS_APP,s.bind(this.focus,this)),this.bus.on(o.events.PAYMENT_METHOD_GENERATED,s.bind(this._handlePaymentMethodGenerated,this)),this.bus.on(o.events.UI_POPUP_FORCE_CLOSE,s.bind(this._handleForceClose,this))},h.prototype._buildUrl=function(){var y=this.options.paypalAssetsUrl;return y+="/pwpp/",y+=a.VERSION,y+="/html/braintree-frame.html",y+="#"+this.options.channel,y},h.prototype.open=function(){this.focus(),this.app.open(),this.poll()},h.prototype._handleForceClose=function(y){y.target===a.PAYPAL_INTEGRATION_NAME&&this.close()},h.prototype.close=function(){this.app.close()},h.prototype.focus=function(){s.isFunction(this.app.focus)&&this.app.focus()},h.prototype.isClosed=function(){return this.app.isClosed()},h.prototype.stopPolling=function(){clearInterval(this.pollId)},h.prototype.poll=function(){this.pollId=setInterval(s.bind(function(){this.isClosed()&&this._handleClosed()},this),100)},h.prototype._handlePaymentMethodGenerated=function(y){y.type===a.NONCE_TYPE&&this.close()},h.prototype._handleClosed=function(){this.stopPolling(),this.close(),r.isPopupSupported()&&(this.app.el=null)},h.prototype.teardown=function(){this.destructor.teardown()},n.exports=h}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":186,"../../shared/util/browser":191,"./modal-view":184,"./popup-view":185,"braintree-bus":152,"braintree-utilities":164,destructor:165}],184:[function(t,n,e){(function(c){var s=t("braintree-utilities"),r=t("../../shared/util/browser"),i=t("../../shared/constants"),o=t("braintree-bus"),a=t("iframer");function p(m){this.options=m||{},this.container=document.body,this.bus=new o({merchantUrl:c.location.href,channel:m.channel}),this.options.headless?this._open=this._openHeadless:this._attachBusEvents(),this._initialize()}p.prototype._attachBusEvents=function(){this.bus.on(i.events.OPEN_MODAL,s.bind(this.open,this))},p.prototype._initialize=function(){var m=this.options.isHermes?i.HERMES_FRAME_NAME:i.FRAME_NAME;this.el=a({src:this.options.src,name:m,height:this.options.height||"100%",width:this.options.width||"100%",style:{position:r.isMobile()?"absolute":"fixed",top:0,left:0,bottom:0,padding:0,margin:0,border:0,outline:"none",zIndex:20001,background:"#FFFFFF"}})},p.prototype.isClosed=function(){return!this.container.contains(this.el)},p.prototype._openHeadless=function(){this.bus.emit(i.events.OPEN_MODAL)},p.prototype._open=function(){s.isFunction(this.options.insertFrameFunction)?this.options.insertFrameFunction(this.el.src):this.container.appendChild(this.el),this.bus.emit(i.events.UI_MODAL_DID_OPEN,{source:i.PAYPAL_INTEGRATION_NAME})},p.prototype.open=function(){this.isClosed()&&this._open()},p.prototype.close=function(){this.isClosed()||(this.container.removeChild(this.el),this.bus.emit(i.events.UI_MODAL_DID_CLOSE,{source:i.PAYPAL_INTEGRATION_NAME}))},p.prototype.teardown=function(){this.close(),this.bus.teardown()},n.exports=p}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":186,"../../shared/util/browser":191,"braintree-bus":152,"braintree-utilities":164,iframer:168}],185:[function(t,n,e){(function(c){var s=t("../../shared/constants"),r=t("braintree-bus"),i=t("../../shared/useragent/browser");function o(a){this.options=a,this.bus=new r({merchantUrl:c.location.href,channel:this.options.channel}),a.isHermes?(this.name=s.HERMES_POPUP_NAME,this.popupHeight=s.HERMES_POPUP_HEIGHT,this.popupWidth=s.HERMES_POPUP_WIDTH):(this.name=s.POPUP_NAME,this.popupHeight=s.POPUP_HEIGHT,this.popupWidth=s.POPUP_WIDTH)}o.prototype._getPopupOptions=function(){return["height="+this.popupHeight,"width="+this.popupWidth,"top="+this._getTopPosition(),"left="+this._getLeftPosition(),s.POPUP_OPTIONS].join(",")},o.prototype._centerPosition=function(a,p,m){return(a-p)/2+m},o.prototype._getTopPosition=function(){var a=window.outerHeight||document.documentElement.clientHeight,p=typeof window.screenY=="undefined"?window.screenTop:window.screenY;return this._centerPosition(a,this.popupHeight,p)},o.prototype._getLeftPosition=function(){var a=window.outerWidth||document.documentElement.clientWidth,p=typeof window.screenX=="undefined"?window.screenLeft:window.screenX;return this._centerPosition(a,this.popupWidth,p)},o.prototype.isClosed=function(){if(this.el)return this.el.closed},o.prototype.open=function(){this.el||(this.el=window.open(this.options.src,this.name,this._getPopupOptions()),this.focus(),this.bus.emit(r.events.UI_POPUP_DID_OPEN,{source:s.PAYPAL_INTEGRATION_NAME}))},o.prototype.close=function(){this.el&&((i.isIE8()&&!this.isClosed()||!i.isIE8())&&this.el.close(),this.bus.emit(r.events.UI_POPUP_DID_CLOSE,{source:s.PAYPAL_INTEGRATION_NAME}))},o.prototype.focus=function(){this.el&&this.el.focus()},o.prototype.teardown=function(){this.close(),this.bus.teardown()},n.exports=o}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":186,"../../shared/useragent/browser":187,"braintree-bus":152}],186:[function(t,n,e){var c,s="1.6.1",r=["GET_CLIENT_TOKEN","GET_CLIENT_OPTIONS","OPEN_MODAL","CLOSE_APP","FOCUS_APP","UI_MODAL_DID_OPEN","UI_MODAL_DID_CLOSE"];for(e.VERSION=s,e.POPUP_NAME="braintree_paypal_popup",e.HERMES_POPUP_NAME="PPFrameRedirect",e.FRAME_NAME="braintree-paypal-frame",e.HERMES_FRAME_NAME="PPFrameRedirect",e.POPUP_PATH="/pwpp/"+s+"/html/braintree-frame.html",e.POPUP_OPTIONS="resizable,scrollbars",e.POPUP_HEIGHT=470,e.POPUP_WIDTH=410,e.HERMES_POPUP_HEIGHT=535,e.HERMES_POPUP_WIDTH=450,e.BRIDGE_FRAME_NAME="bt-proxy-frame",e.HERMES_SUPPORTED_CURRENCIES=["USD","GBP","EUR","AUD","CAD","DKK","NOK","PLN","SEK","CHF","TRY"],e.HERMES_SUPPORTED_COUNTRIES=["US","GB","AU","CA","ES","FR","DE","IT","NL","NO","PL","CH","TR","DK","BE","AT"],e.NONCE_TYPE="PayPalAccount",e.PAYPAL_INTEGRATION_NAME="PayPal",e.ILLEGAL_XHR_ERROR="Illegal XHR request attempted",e.events={},c=0;c<r.length;c++)e.events[r[c]]="paypal:"+r[c]},{}],187:[function(t,n,e){var c=t("./useragent"),s=t("./platform");function r(){return c.matchUserAgent("Android")&&!i()}function i(){return c.matchUserAgent("Chrome")||c.matchUserAgent("CriOS")}function o(){return c.matchUserAgent("Firefox")}function a(){return c.matchUserAgent("Trident")||c.matchUserAgent("MSIE")}function p(){return c.matchUserAgent(/MSIE 8\.0/)}function m(){return c.matchUserAgent("Opera")||c.matchUserAgent("OPR")}function h(){return m()&&Object.prototype.toString.call(window.operamini)==="[object OperaMini]"}function y(){return c.matchUserAgent("Safari")&&!i()&&!r()}function g(){return s.isIos()&&!i()&&!y()}function S(){var x=/Version\/[\w\.]+ Chrome\/[\w\.]+ Mobile/;return s.isAndroid()&&c.matchUserAgent(x)}n.exports={isAndroid:r,isChrome:i,isFirefox:o,isIE:a,isIE8:p,isOpera:m,isOperaMini:h,isSafari:y,isIosWebView:g,isAndroidWebView:S}},{"./platform":189,"./useragent":190}],188:[function(t,n,e){var c=t("./useragent"),s=t("./platform");function r(){return!i()&&(s.isAndroid()||s.isIpod()||s.isIphone()||c.matchUserAgent("IEMobile"))}function i(){return s.isIpad()||s.isAndroid()&&!c.matchUserAgent("Mobile")}function o(){return!r()&&!i()}n.exports={isMobile:r,isTablet:i,isDesktop:o}},{"./platform":189,"./useragent":190}],189:[function(t,n,e){var c=t("./useragent");function s(){return c.matchUserAgent("Android")}function r(){return c.matchUserAgent("iPad")}function i(){return c.matchUserAgent("iPod")}function o(){return c.matchUserAgent("iPhone")&&!i()}function a(){return r()||i()||o()}n.exports={isAndroid:s,isIpad:r,isIpod:i,isIphone:o,isIos:a}},{"./useragent":190}],190:[function(t,n,e){var c=window.navigator.userAgent;function s(){return c}function r(i){var o=e.getNativeUserAgent(),a=o.match(i);return!!a}e.getNativeUserAgent=s,e.matchUserAgent=r},{}],191:[function(t,n,e){var c=t("../useragent/browser"),s=t("../useragent/device"),r=t("../useragent/platform"),i=t("../useragent/useragent"),o=window.navigator.userAgent,a=/[Mm]obi|tablet|iOS|Android|IEMobile|Windows\sPhone/;function p(){return m()&&window.outerWidth<600}function m(){return a.test(o)}function h(){return Boolean(window.postMessage)}function y(){if(c.isOperaMini())return!1;if(s.isDesktop())return!0;if(s.isMobile()||s.isTablet()){if(c.isIE())return!1;if(r.isAndroid())return!c.isAndroidWebView();if(r.isIos())return!(c.isChrome()||c.isSafari()&&i.matchUserAgent(/OS (?:8_1|8_0|8)(?!_\d)/i)||c.isIosWebView())}return!1}function g(){if(c.isIE8())return!1;try{return window.self===window.top}catch(C){return!1}}function S(){return c.isIE()}function x(){var C=null,T="";try{new ActiveXObject("")}catch(P){T=P.name}try{C=Boolean(new ActiveXObject("htmlfile"))}catch(P){C=!1}return T!=="ReferenceError"&&C===!1?C=!1:C=!0,!C}n.exports={isMobile:p,isMobileDevice:m,detectedPostMessage:h,isPopupSupported:y,isOverlaySupported:g,isBridgeIframeRequired:S,isMetroBrowser:x}},{"../useragent/browser":187,"../useragent/device":188,"../useragent/platform":189,"../useragent/useragent":190}],192:[function(t,n,e){var c=t("braintree-utilities");function s(r,i){this.host=r||window,this.channel=i||null,this.handlers=[],c.addEventListener(this.host,"message",c.bind(this.receive,this))}s.prototype.receive=function(r){var i,o,a,p;try{a=JSON.parse(r.data)}catch(m){return}for(p=a.type,o=new s.Message(this,r.source,a.data),i=0;i<this.handlers.length;i++)this.handlers[i].type===p&&this.handlers[i].handler(o)},s.prototype.send=function(r,i,o){r.postMessage(JSON.stringify({type:this._namespaceEvent(i),data:o}),"*")},s.prototype.register=function(r,i){this.handlers.push({type:this._namespaceEvent(r),handler:i})},s.prototype.unregister=function(r,i){for(var o=this.handlers.length-1;o>=0;o--)if(this.handlers[o].type===r&&this.handlers[o].handler===i)return this.handlers.splice(o,1)},s.prototype._namespaceEvent=function(r){return this.channel?["braintree",this.channel,r].join(":"):r},s.Message=function(r,i,o){this.bus=r,this.source=i,this.content=o},s.Message.prototype.reply=function(r,i){this.bus.send(this.source,r,i)},n.exports=s},{"braintree-utilities":206}],193:[function(t,n,e){var c=t("braintree-utilities");function s(r,i){this.bus=r,this.target=i,this.handlers=[],this.bus.register("publish",c.bind(this._handleMessage,this))}s.prototype._handleMessage=function(r){var i,o=r.content,a=this.handlers[o.channel];if(typeof a!="undefined")for(i=0;i<a.length;i++)a[i](o.data)},s.prototype.publish=function(r,i){this.bus.send(this.target,"publish",{channel:r,data:i})},s.prototype.subscribe=function(r,i){this.handlers[r]=this.handlers[r]||[],this.handlers[r].push(i)},s.prototype.unsubscribe=function(r,i){var o,a=this.handlers[r];if(typeof a!="undefined")for(o=0;o<a.length;o++)a[o]===i&&a.splice(o,1)},n.exports=s},{"braintree-utilities":206}],194:[function(t,n,e){function c(s){this.bus=s,this.frames=[],this.handlers=[]}c.prototype.subscribe=function(s,r){this.handlers[s]=this.handlers[s]||[],this.handlers[s].push(r)},c.prototype.registerFrame=function(s){this.frames.push(s)},c.prototype.unregisterFrame=function(s){for(var r=0;r<this.frames.length;r++)this.frames[r]===s&&this.frames.splice(r,1)},c.prototype.publish=function(s,r){var i,o=this.handlers[s];if(typeof o!="undefined")for(i=0;i<o.length;i++)o[i](r);for(i=0;i<this.frames.length;i++)this.bus.send(this.frames[i],"publish",{channel:s,data:r})},c.prototype.unsubscribe=function(s,r){var i,o=this.handlers[s];if(typeof o!="undefined")for(i=0;i<o.length;i++)o[i]===r&&o.splice(i,1)},n.exports=c},{}],195:[function(t,n,e){var c=t("braintree-utilities");function s(r,i){this.bus=r,this.target=i||window.parent,this.counter=0,this.callbacks={},this.bus.register("rpc_response",c.bind(this._handleResponse,this))}s.prototype._handleResponse=function(r){var i=r.content,o=this.callbacks[i.id];typeof o=="function"&&(o.apply(null,i.response),delete this.callbacks[i.id])},s.prototype.invoke=function(r,i,o){var a=this.counter++;this.callbacks[a]=o,this.bus.send(this.target,"rpc_request",{id:a,method:r,args:i})},n.exports=s},{"braintree-utilities":206}],196:[function(t,n,e){var c=t("braintree-utilities");function s(r){this.bus=r,this.methods={},this.bus.register("rpc_request",c.bind(this._handleRequest,this))}s.prototype._handleRequest=function(r){var i,o=r.content,a=o.args||[],p=this.methods[o.method];typeof p=="function"&&(i=function(){r.reply("rpc_response",{id:o.id,response:Array.prototype.slice.call(arguments)})},a.push(i),p.apply(null,a))},s.prototype.reset=function(){this.methods={}},s.prototype.define=function(r,i){this.methods[r]=i},n.exports=s},{"braintree-utilities":206}],197:[function(t,n,e){var c=t("./lib/message-bus"),s=t("./lib/pubsub-client"),r=t("./lib/pubsub-server"),i=t("./lib/rpc-client"),o=t("./lib/rpc-server");n.exports={MessageBus:c,PubsubClient:s,PubsubServer:r,RPCClient:i,RPCServer:o}},{"./lib/message-bus":192,"./lib/pubsub-client":193,"./lib/pubsub-server":194,"./lib/rpc-client":195,"./lib/rpc-server":196}],198:[function(t,n,e){arguments[4][35][0].apply(e,arguments)},{dup:35}],199:[function(t,n,e){arguments[4][36][0].apply(e,arguments)},{dup:36}],200:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],201:[function(t,n,e){arguments[4][38][0].apply(e,arguments)},{dup:38}],202:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],203:[function(t,n,e){arguments[4][40][0].apply(e,arguments)},{dup:40}],204:[function(t,n,e){arguments[4][41][0].apply(e,arguments)},{"./array":198,dup:41}],205:[function(t,n,e){arguments[4][42][0].apply(e,arguments)},{dup:42}],206:[function(t,n,e){arguments[4][43][0].apply(e,arguments)},{"./lib/array":198,"./lib/base64":199,"./lib/dom":200,"./lib/events":201,"./lib/fn":202,"./lib/string":203,"./lib/url":204,"./lib/uuid":205,dup:43}],207:[function(t,n,e){arguments[4][35][0].apply(e,arguments)},{dup:35}],208:[function(t,n,e){arguments[4][36][0].apply(e,arguments)},{dup:36}],209:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],210:[function(t,n,e){arguments[4][38][0].apply(e,arguments)},{dup:38}],211:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],212:[function(t,n,e){arguments[4][40][0].apply(e,arguments)},{dup:40}],213:[function(t,n,e){arguments[4][41][0].apply(e,arguments)},{"./array":207,dup:41}],214:[function(t,n,e){arguments[4][42][0].apply(e,arguments)},{dup:42}],215:[function(t,n,e){arguments[4][43][0].apply(e,arguments)},{"./lib/array":207,"./lib/base64":208,"./lib/dom":209,"./lib/events":210,"./lib/fn":211,"./lib/string":212,"./lib/url":213,"./lib/uuid":214,dup:43}],216:[function(t,n,e){arguments[4][80][0].apply(e,arguments)},{"batch-execute-functions":217,"braintree-utilities/lib/fn":218,dup:80}],217:[function(t,n,e){arguments[4][81][0].apply(e,arguments)},{dup:81}],218:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],219:[function(t,n,e){arguments[4][83][0].apply(e,arguments)},{"./lib/default-attributes":220,dup:83,"lodash.assign":221,"lodash.isstring":232,setattributes:233}],220:[function(t,n,e){arguments[4][84][0].apply(e,arguments)},{dup:84}],221:[function(t,n,e){arguments[4][85][0].apply(e,arguments)},{dup:85,"lodash._baseassign":222,"lodash._createassigner":224,"lodash.keys":228}],222:[function(t,n,e){arguments[4][86][0].apply(e,arguments)},{dup:86,"lodash._basecopy":223,"lodash.keys":228}],223:[function(t,n,e){arguments[4][87][0].apply(e,arguments)},{dup:87}],224:[function(t,n,e){arguments[4][88][0].apply(e,arguments)},{dup:88,"lodash._bindcallback":225,"lodash._isiterateecall":226,"lodash.restparam":227}],225:[function(t,n,e){arguments[4][89][0].apply(e,arguments)},{dup:89}],226:[function(t,n,e){arguments[4][90][0].apply(e,arguments)},{dup:90}],227:[function(t,n,e){arguments[4][91][0].apply(e,arguments)},{dup:91}],228:[function(t,n,e){arguments[4][48][0].apply(e,arguments)},{dup:48,"lodash._getnative":229,"lodash.isarguments":230,"lodash.isarray":231}],229:[function(t,n,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],230:[function(t,n,e){arguments[4][45][0].apply(e,arguments)},{dup:45}],231:[function(t,n,e){arguments[4][46][0].apply(e,arguments)},{dup:46}],232:[function(t,n,e){arguments[4][51][0].apply(e,arguments)},{dup:51}],233:[function(t,n,e){arguments[4][97][0].apply(e,arguments)},{dup:97}],234:[function(t,n,e){var c=["getCreditCards","unlockCreditCard","sendAnalyticsEvents"];function s(r){this.apiClient=r}s.prototype.attach=function(r){var i=this,o=0,a=c.length;function p(m){r.define(m,function(){i.apiClient[m].apply(i.apiClient,arguments)})}for(o;o<a;o++)p(c[o])},n.exports=s},{}],235:[function(t,n,e){(function(c){var s,r,i=t("braintree-api"),o=t("braintree-bus"),a=t("destructor"),p=t("braintree-rpc"),m=t("braintree-utilities"),h=m.normalizeElement,y=m.bind,g=m.isBrowserHttps,S=t("./api-proxy-server"),x=t("./merchant-form-manager"),C=t("./frame-container"),T=t("../shared/constants"),P="1.9.1",v=t("braintree-paypal/src/external/views/app-view");function _(D,b){var A=window.getComputedStyle?getComputedStyle(D):D.currentStyle;return A[b]}function I(){return{html:{height:s.style.height||"",overflow:_(s,"overflow"),position:_(s,"position")},body:{height:r.style.height||"",overflow:_(r,"overflow")}}}function R(){var D=/Android|iPhone|iPod|iPad/i.test(window.navigator.userAgent);return D}function U(D){var b,A,L;this.channel=D.channel,this.destructor=new a,this.merchantConfiguration=D.merchantConfiguration,this.encodedClientToken=D.gatewayConfiguration,this.analyticsConfiguration=D.analyticsConfiguration,this.paypalOptions=D.merchantConfiguration.paypal||{},this.container=null,this.merchantFormManager=null,this.root=D.root,this.configurationRequests=[],this.braintreeApiClient=i.configure({clientToken:D.gatewayConfiguration,analyticsConfiguration:this.analyticsConfiguration,integration:"dropin",enableCORS:this.merchantConfiguration.enableCORS}),this.paymentMethodNonceReceivedCallback=D.merchantConfiguration.paymentMethodNonceReceived,this.clientToken=i.parseClientToken(D.gatewayConfiguration),this.braintreeBus=new o({merchantUrl:c.location.href,channel:D.channel}),this.bus=new p.MessageBus(this.root,this.channel),this.rpcServer=new p.RPCServer(this.bus),this.apiProxyServer=new S(this.braintreeApiClient),this.apiProxyServer.attach(this.rpcServer),b=D.inlineFramePath||this.clientToken.assetsUrl+"/dropin/"+P+"/inline-frame.html",A=D.modalFramePath||this.clientToken.assetsUrl+"/dropin/"+P+"/modal-frame.html",s=document.documentElement,r=document.body,this.frames={inline:this._createFrame(b,T.INLINE_FRAME_NAME),modal:this._createFrame(A,T.MODAL_FRAME_NAME)},this.container=h(D.merchantConfiguration.container,"Unable to find valid container."),L=h(D.merchantConfiguration.form||this._findClosest(this.container,"form")),this.merchantFormManager=new x({form:L,frames:this.frames,onSubmit:this.paymentMethodNonceReceivedCallback,apiClient:this.braintreeApiClient}).initialize(),this.destructor.registerFunctionForTeardown(y(function(){this.merchantFormManager.teardown()},this)),D.gatewayConfiguration.paypalEnabled&&this._configurePayPal(),this.braintreeApiClient.sendAnalyticsEvents("dropin.web.initialized")}U.prototype.initialize=function(){var D,b=this;this._initializeModal(),this.braintreeBus.emit(o.events.ASYNC_DEPENDENCY_INITIALIZING),this.container.appendChild(this.frames.inline.element),r.appendChild(this.frames.modal.element),this.destructor.registerFunctionForTeardown(function(A){b._hideModal(function(){b.container.removeChild(b.frames.inline.element),r.removeChild(b.frames.modal.element),A()})}),this.rpcServer.define("receiveSharedCustomerIdentifier",function(A){for(b.braintreeApiClient.attrs.sharedCustomerIdentifier=A,b.braintreeApiClient.attrs.sharedCustomerIdentifierType="browser_session_cookie_store",D=0;D<b.configurationRequests.length;D++)b.configurationRequests[D](b.encodedClientToken);b.configurationRequests=[]}),this.braintreeBus.on(o.events.PAYMENT_METHOD_GENERATED,y(this._handleAltPayData,this)),this.rpcServer.define("getConfiguration",function(A){A({enableCORS:b.merchantConfiguration.enableCORS,clientToken:b.encodedClientToken,paypalOptions:b.paypalOptions,analyticsConfiguration:b.analyticsConfiguration,merchantHttps:g()})}),this.rpcServer.define("selectPaymentMethod",function(A){b.frames.modal.rpcClient.invoke("selectPaymentMethod",[A]),b._showModal()}),this.rpcServer.define("sendAddedPaymentMethod",function(A){b.merchantFormManager.setNoncePayload(A),b.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[A])}),this.rpcServer.define("sendUsedPaymentMethod",function(A){b.frames.inline.rpcClient.invoke("selectPaymentMethod",[A])}),this.rpcServer.define("sendUnlockedNonce",function(A){b.merchantFormManager.setNoncePayload(A)}),this.rpcServer.define("clearNonce",function(){b.merchantFormManager.clearNoncePayload()}),this.rpcServer.define("closeDropInModal",function(){b._hideModal()}),this.rpcServer.define("setInlineFrameHeight",function(A){b.frames.inline.element.style.height=A+"px"}),this.bus.register("ready",function(A){A.source===b.frames.inline.element.contentWindow?b.frames.inline.rpcClient=new p.RPCClient(b.bus,A.source):A.source===b.frames.modal.element.contentWindow&&(b.frames.modal.rpcClient=new p.RPCClient(b.bus,A.source))})},U.prototype._createFrame=function(D,b){return new C(D,b,this.braintreeBus)},U.prototype._initializeModal=function(){this.frames.modal.element.style.display="none",this.frames.modal.element.style.position=R()?"absolute":"fixed",this.frames.modal.element.style.top="0",this.frames.modal.element.style.left="0",this.frames.modal.element.style.height="100%",this.frames.modal.element.style.width="100%"},U.prototype._lockMerchantWindowSize=function(){setTimeout(function(){s.style.overflow="hidden",r.style.overflow="hidden",r.style.height="100%",R()&&(s.style.position="relative",s.style.height=window.innerHeight+"px")},160)},U.prototype._unlockMerchantWindowSize=function(){var D=this.merchantPageDefaultStyles;!D||(r.style.height=D.body.height,r.style.overflow=D.body.overflow,s.style.overflow=D.html.overflow,R()&&(s.style.height=D.html.height,s.style.position=D.html.position),delete this.merchantPageDefaultStyles)},U.prototype._showModal=function(){var D=this,b=this.frames.modal.element;this.merchantPageDefaultStyles=I(),b.style.display="block",this.frames.modal.rpcClient.invoke("open",[],function(){setTimeout(function(){D._lockMerchantWindowSize(),b.contentWindow.focus()},200)})},U.prototype._hideModal=function(D){this._unlockMerchantWindowSize(),this.frames.modal.element.style.display="none",D&&D()},U.prototype._configurePayPal=function(){this.paypalModalView=new v({channel:this.channel,insertFrameFunction:this.paypalOptions.insertFrame,paypalAssetsUrl:this.clientToken.paypal.assetsUrl,isHermes:!!this.paypalOptions.singleUse&&!!this.paypalOptions.amount&&!!this.paypalOptions.currency})},U.prototype._handleAltPayData=function(D){this.merchantFormManager.setNoncePayload(D),this.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[D]),this.frames.modal.rpcClient.invoke("modalViewClose")},U.prototype._findClosest=function(D,b){b=b.toUpperCase();do if(D.nodeName===b)return D;while(D=D.parentNode);throw"Unable to find a valid "+b},U.prototype.teardown=function(D){this.paypalModalView&&this.paypalModalView.teardown(),this.braintreeBus.emit(T.MODAL_FRAME_TEARDOWN_EVENT,y(function(){this.braintreeBus.emit(T.INLINE_FRAME_TEARDOWN_EVENT,y(function(){this.destructor.teardown(y(function(b){if(b)return D(b);this.braintreeBus.teardown(),D()},this))},this))},this))},n.exports=U}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../shared/constants":239,"./api-proxy-server":234,"./frame-container":237,"./merchant-form-manager":238,"braintree-api":117,"braintree-bus":148,"braintree-paypal/src/external/views/app-view":183,"braintree-rpc":197,"braintree-utilities":215,destructor:216}],236:[function(t,n,e){var c=t("./client"),s="1.9.1";function r(i){var o=new c(i);return o.initialize(),o}n.exports={create:r,VERSION:s}},{"./client":235}],237:[function(t,n,e){var c=t("braintree-bus"),s=t("../shared/constants"),r=t("iframer"),i={transition:"transitionend","-o-transition":"otransitionEnd","-moz-transition":"transitionend","-webkit-transition":"webkitTransitionEnd"};function o(){var m,h=document.createElement("fakeelement");for(m in i)if(typeof h.style[m]!="undefined")return i[m];return null}function a(m,h){var y=o();function g(S){S.target===m&&S.propertyName==="height"&&(h.emit(c.events.ASYNC_DEPENDENCY_READY),m.removeEventListener(y,g))}y?m.addEventListener(y,g):setTimeout(function(){h.emit(c.events.ASYNC_DEPENDENCY_READY)},500)}function p(m,h,y){var g="height 210ms cubic-bezier(0.390, 0.575, 0.565, 1.000)",S=r({name:h,width:"100%",height:"68",style:{transition:g,WebkitTransition:g,MozTransition:g,msTransition:g,OTransition:g,border:"0",zIndex:"9999"}});this.element=S,setTimeout(function(){S.src=m+"#"+y.channel},0),h===s.INLINE_FRAME_NAME&&a(S,y)}n.exports=p},{"../shared/constants":239,"braintree-bus":148,iframer:219}],238:[function(t,n,e){var c=t("braintree-utilities"),s=t("form-napper");function r(i){this.formNapper=new s(i.form),this.frames=i.frames,this.onSubmit=i.onSubmit,this.apiClient=i.apiClient}r.prototype.initialize=function(){return this._isSubmitBased()&&this._setElements(),this._setEvents(),this},r.prototype.setNoncePayload=function(i){this.noncePayload=i},r.prototype.clearNoncePayload=function(){this.noncePayload=null},r.prototype._isSubmitBased=function(){return!this.onSubmit},r.prototype._isCallbackBased=function(){return!!this.onSubmit},r.prototype._setElements=function(){this.nonceInput=this.formNapper.inject("payment_method_nonce","")},r.prototype._setEvents=function(){this.formNapper.hijack(c.bind(this._handleFormSubmit,this))},r.prototype._handleFormSubmit=function(i){this.noncePayload&&this.noncePayload.nonce?this._handleNonceReply(i):this.frames.inline.rpcClient.invoke("requestNonce",[],c.bind(function(o){this.setNoncePayload(o),this._handleNonceReply(i)},this))},r.prototype._handleNonceReply=function(i){this._isCallbackBased()?this.apiClient.sendAnalyticsEvents("dropin.web.end.callback",c.bind(function(){var o=this.noncePayload;o.originalEvent=i,this.onSubmit(o),setTimeout(c.bind(function(){delete o.originalEvent,this.frames.inline.rpcClient.invoke("clearLoadingState"),this.frames.inline.rpcClient.invoke("receiveNewPaymentMethod",[o])},this),200)},this)):this._triggerFormSubmission()},r.prototype._triggerFormSubmission=function(){this.nonceInput=this.formNapper.inject("payment_method_nonce",this.noncePayload.nonce),this.apiClient.sendAnalyticsEvents("dropin.web.end.auto-submit",c.bind(function(){this.formNapper.submit()},this))},r.prototype.teardown=function(){var i;this.nonceInput&&(i=this.formNapper.htmlForm,i.removeChild(this.nonceInput)),this.formNapper.detach()},n.exports=r},{"braintree-utilities":215,"form-napper":376}],239:[function(t,n,e){n.exports={PAYPAL_INTEGRATION_NAME:"PayPal",INLINE_FRAME_NAME:"braintree-dropin-frame",MODAL_FRAME_NAME:"braintree-dropin-modal-frame",PAYMENT_METHOD_TYPES:["CoinbaseAccount","PayPalAccount","CreditCard"],cssClassMap:{"American Express":"american-express","Diners Club":"diners-club",DinersClub:"diners-club",Discover:"discover",JCB:"jcb",Maestro:"maestro",MasterCard:"master-card",Solo:"solo",Switch:"switch",UKMaestro:"maestro",UnionPay:"unionpay",Visa:"visa"},INLINE_FRAME_TEARDOWN_EVENT:"dropin:TEARDOWN_INLINE_FRAME",MODAL_FRAME_TEARDOWN_EVENT:"dropin:TEARDOWN_MODAL_FRAME"}},{}],240:[function(t,n,e){(function(c){var s=c.Node?c.Node.ELEMENT_NODE:1;function r(p,m){m=m||{};var h,y,g=p.children;for(y=0;y<g.length;y++)if(h=g[y],a(h)){var S=h.getAttribute("data-braintree-name");S==="postal_code"?m.billingAddress={postalCode:h.value}:m[S]=h.value,i(h)}else h.children&&h.children.length>0&&r(h,m);return m}function i(p){try{p.attributes.removeNamedItem("name")}catch(m){}}function o(p){r(p)}function a(p){return p.nodeType===s&&p.attributes["data-braintree-name"]}n.exports={extractValues:r,scrubAllAttributes:o,scrubAttributes:i,isBraintreeNode:a}}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],241:[function(t,n,e){(function(c){var s=t("braintree-utilities"),r=t("./fields"),i=t("destructor"),o=t("braintree-bus"),a=t("./models/payment-method-model"),p=t("./get-nonce-input"),m={message:"Unable to process payments at this time",type:"IMMEDIATE"};function h(y,g){var S=g.merchantConfiguration,x=typeof S.paymentMethodNonceInputField=="object";this.destructor=new i,this.apiClient=y,this.isCreditCardForm=S.useCreditCard!==!1,this.htmlForm=document.getElementById(S.id),this.paymentMethodNonceInput=p(S.paymentMethodNonceInputField),this.htmlForm.appendChild(this.paymentMethodNonceInput),this.destructor.registerFunctionForTeardown(s.bind(function(){x?this.paymentMethodNonceInput.value="":this.htmlForm.removeChild(this.paymentMethodNonceInput)},this)),this.model=new a,this.bus=new o({merchantUrl:c.location.href,channel:g.channel}),this.setEvents(),this.destructor.registerFunctionForTeardown(s.bind(function(){this.bus.teardown()},this))}h.prototype.setEvents=function(){this.onSubmitHandler=s.bind(this.handleSubmit,this),this.onExternalNonceReceived=s.bind(this.onExternalNonceReceived,this),this.clearExternalNonce=s.bind(this.clearExternalNonce,this),s.addEventListener(this.htmlForm,"submit",this.onSubmitHandler),this.destructor.registerFunctionForTeardown(s.bind(function(){s.removeEventListener(this.htmlForm,"submit",this.onSubmitHandler)},this)),this.bus.on(o.events.PAYMENT_METHOD_GENERATED,this.onExternalNonceReceived),this.bus.on(o.events.PAYMENT_METHOD_CANCELLED,this.clearExternalNonce)},h.prototype.handleSubmit=function(y){var g;if(y.preventDefault?y.preventDefault():y.returnValue=!1,!this.isCreditCardForm){this.onNonceReceived(null,this.model.attributes);return}if(g=this.model.get("type"),g&&g!=="CreditCard"){r.scrubAllAttributes(this.htmlForm),this.onNonceReceived(null,this.model.attributes);return}this.apiClient.tokenizeCard(r.extractValues(this.htmlForm),s.bind(function(S,x,C){S?this.onNonceReceived(m,null):(this.model.set({nonce:x,type:C.type,details:C.details}),this.onNonceReceived(null,this.model.attributes))},this))},h.prototype.writeNonceToDOM=function(){this.paymentMethodNonceInput.value=this.model.get("nonce")},h.prototype.onExternalNonceReceived=function(y){this.model.set(y),this.writeNonceToDOM()},h.prototype.clearExternalNonce=function(){this.model.reset()},h.prototype.onNonceReceived=function(y){var g=this.htmlForm;if(y){this.bus.emit(o.events.ERROR,m);return}s.removeEventListener(g,"submit",this.onSubmitHandler),this.writeNonceToDOM(),g.submit&&(typeof g.submit=="function"||g.submit.call)?g.submit():setTimeout(function(){g.querySelector('[type="submit"]').click()},1)},h.prototype.teardown=function(){this.destructor.teardown()},n.exports=h}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./fields":240,"./get-nonce-input":242,"./models/payment-method-model":243,"braintree-bus":246,"braintree-utilities":258,destructor:259}],242:[function(t,n,e){n.exports=function(s){var r;if(typeof s=="object")return s;r="payment_method_nonce",typeof s=="string"&&(r=s);var i=document.createElement("input");return i.name=r,i.type="hidden",i}},{}],243:[function(t,n,e){function c(){this.reset()}c.prototype.get=function(s){return this.attributes[s]},c.prototype.set=function(s){this.attributes=s||{}},c.prototype.reset=function(){this.attributes={}},n.exports=c},{}],244:[function(t,n,e){n.exports=function(s){for(var r=s.getElementsByTagName("*"),i={},o=0;o<r.length;o++){var a=r[o].getAttribute("data-braintree-name");i[a]=!0}if(!i.number)throw new Error('Unable to find an input with data-braintree-name="number" in your form. Please add one.');if(i.expiration_date){if(i.expiration_month||i.expiration_year)throw new Error('You have inputs with data-braintree-name="expiration_date" AND data-braintree-name="expiration_(year|month)". Please use either "expiration_date" or "expiration_year" and "expiration_month".')}else{if(!i.expiration_month&&!i.expiration_year)throw new Error('Unable to find an input with data-braintree-name="expiration_date" in your form. Please add one.');if(!i.expiration_month)throw new Error('Unable to find an input with data-braintree-name="expiration_month" in your form. Please add one.');if(!i.expiration_year)throw new Error('Unable to find an input with data-braintree-name="expiration_year" in your form. Please add one.')}}},{}],245:[function(t,n,e){var c=t("./lib/form"),s=t("./lib/validate-annotations");function r(i,o){var a=o.merchantConfiguration||{},p=document.getElementById(a.id),m=a.useCreditCard!==!1;if(!p)throw new Error('Unable to find form with id: "'+a.id+'"');return m&&s(p),new c(i,o)}n.exports={setup:r}},{"./lib/form":241,"./lib/validate-annotations":244}],246:[function(t,n,e){arguments[4][52][0].apply(e,arguments)},{"./lib/check-origin":247,"./lib/events":248,dup:52,framebus:249}],247:[function(t,n,e){arguments[4][53][0].apply(e,arguments)},{dup:53}],248:[function(t,n,e){arguments[4][54][0].apply(e,arguments)},{dup:54}],249:[function(t,n,e){arguments[4][55][0].apply(e,arguments)},{dup:55}],250:[function(t,n,e){arguments[4][35][0].apply(e,arguments)},{dup:35}],251:[function(t,n,e){arguments[4][36][0].apply(e,arguments)},{dup:36}],252:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],253:[function(t,n,e){arguments[4][38][0].apply(e,arguments)},{dup:38}],254:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],255:[function(t,n,e){arguments[4][40][0].apply(e,arguments)},{dup:40}],256:[function(t,n,e){arguments[4][41][0].apply(e,arguments)},{"./array":250,dup:41}],257:[function(t,n,e){arguments[4][42][0].apply(e,arguments)},{dup:42}],258:[function(t,n,e){arguments[4][43][0].apply(e,arguments)},{"./lib/array":250,"./lib/base64":251,"./lib/dom":252,"./lib/events":253,"./lib/fn":254,"./lib/string":255,"./lib/url":256,"./lib/uuid":257,dup:43}],259:[function(t,n,e){arguments[4][80][0].apply(e,arguments)},{"batch-execute-functions":260,"braintree-utilities/lib/fn":261,dup:80}],260:[function(t,n,e){arguments[4][81][0].apply(e,arguments)},{dup:81}],261:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],262:[function(t,n,e){arguments[4][2][0].apply(e,arguments)},{"./coinbase-account":263,"./constants":264,"./credit-card":265,"./europe-bank-account":266,"./normalize-api-fields":268,"./parse-client-token":269,"./paypal-account":270,"./request/choose-driver":273,"./sepa-mandate":278,"./should-enable-cors":279,"./util":280,"braintree-3ds":289,"braintree-utilities":303,dup:2}],263:[function(t,n,e){arguments[4][3][0].apply(e,arguments)},{dup:3}],264:[function(t,n,e){arguments[4][4][0].apply(e,arguments)},{dup:4}],265:[function(t,n,e){arguments[4][5][0].apply(e,arguments)},{dup:5}],266:[function(t,n,e){arguments[4][6][0].apply(e,arguments)},{dup:6}],267:[function(t,n,e){arguments[4][7][0].apply(e,arguments)},{"./constants":264,"./parse-client-token":269,"./request/choose-driver":273,"./should-enable-cors":279,"./util":280,dup:7}],268:[function(t,n,e){arguments[4][8][0].apply(e,arguments)},{dup:8}],269:[function(t,n,e){arguments[4][9][0].apply(e,arguments)},{"./polyfill":271,"braintree-utilities":303,dup:9}],270:[function(t,n,e){arguments[4][10][0].apply(e,arguments)},{dup:10}],271:[function(t,n,e){arguments[4][11][0].apply(e,arguments)},{dup:11}],272:[function(t,n,e){arguments[4][12][0].apply(e,arguments)},{"../constants":264,"../util":280,"./parse-body":276,"./prep-body":277,dup:12}],273:[function(t,n,e){arguments[4][13][0].apply(e,arguments)},{"../util":280,"./ajax-driver":272,"./jsonp-driver":274,dup:13}],274:[function(t,n,e){arguments[4][14][0].apply(e,arguments)},{"../constants":264,"./jsonp":275,dup:14}],275:[function(t,n,e){arguments[4][15][0].apply(e,arguments)},{"../util":280,dup:15}],276:[function(t,n,e){arguments[4][16][0].apply(e,arguments)},{dup:16}],277:[function(t,n,e){arguments[4][17][0].apply(e,arguments)},{dup:17,"lodash.isstring":311}],278:[function(t,n,e){arguments[4][18][0].apply(e,arguments)},{dup:18}],279:[function(t,n,e){arguments[4][19][0].apply(e,arguments)},{dup:19}],280:[function(t,n,e){arguments[4][20][0].apply(e,arguments)},{dup:20,"lodash.isempty":304,"lodash.isobject":310}],281:[function(t,n,e){arguments[4][21][0].apply(e,arguments)},{"./lib/client":262,"./lib/get-configuration":267,"./lib/parse-client-token":269,"./lib/util":280,dup:21}],282:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],283:[function(t,n,e){arguments[4][23][0].apply(e,arguments)},{dup:23}],284:[function(t,n,e){arguments[4][24][0].apply(e,arguments)},{dup:24}],285:[function(t,n,e){arguments[4][25][0].apply(e,arguments)},{dup:25}],286:[function(t,n,e){arguments[4][26][0].apply(e,arguments)},{"./lib/dom":282,"./lib/events":283,"./lib/fn":284,"./lib/url":285,dup:26}],287:[function(t,n,e){arguments[4][27][0].apply(e,arguments)},{"../shared/receiver":294,"braintree-utilities":286,dup:27}],288:[function(t,n,e){arguments[4][28][0].apply(e,arguments)},{"./authorization_service":287,"./loader":290,"braintree-utilities":286,dup:28}],289:[function(t,n,e){arguments[4][29][0].apply(e,arguments)},{"./client":288,dup:29}],290:[function(t,n,e){arguments[4][30][0].apply(e,arguments)},{"./loader_display":291,"./loader_message":292,"./loader_spinner":293,dup:30}],291:[function(t,n,e){arguments[4][31][0].apply(e,arguments)},{dup:31}],292:[function(t,n,e){arguments[4][32][0].apply(e,arguments)},{dup:32}],293:[function(t,n,e){arguments[4][33][0].apply(e,arguments)},{dup:33}],294:[function(t,n,e){arguments[4][34][0].apply(e,arguments)},{"braintree-utilities":286,dup:34}],295:[function(t,n,e){arguments[4][35][0].apply(e,arguments)},{dup:35}],296:[function(t,n,e){arguments[4][36][0].apply(e,arguments)},{dup:36}],297:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],298:[function(t,n,e){arguments[4][38][0].apply(e,arguments)},{dup:38}],299:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],300:[function(t,n,e){arguments[4][40][0].apply(e,arguments)},{dup:40}],301:[function(t,n,e){arguments[4][41][0].apply(e,arguments)},{"./array":295,dup:41}],302:[function(t,n,e){arguments[4][42][0].apply(e,arguments)},{dup:42}],303:[function(t,n,e){arguments[4][43][0].apply(e,arguments)},{"./lib/array":295,"./lib/base64":296,"./lib/dom":297,"./lib/events":298,"./lib/fn":299,"./lib/string":300,"./lib/url":301,"./lib/uuid":302,dup:43}],304:[function(t,n,e){arguments[4][44][0].apply(e,arguments)},{dup:44,"lodash.isarguments":305,"lodash.isarray":306,"lodash.isfunction":307,"lodash.isstring":311,"lodash.keys":308}],305:[function(t,n,e){arguments[4][45][0].apply(e,arguments)},{dup:45}],306:[function(t,n,e){arguments[4][46][0].apply(e,arguments)},{dup:46}],307:[function(t,n,e){arguments[4][47][0].apply(e,arguments)},{dup:47}],308:[function(t,n,e){arguments[4][48][0].apply(e,arguments)},{dup:48,"lodash._getnative":309,"lodash.isarguments":305,"lodash.isarray":306}],309:[function(t,n,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],310:[function(t,n,e){arguments[4][50][0].apply(e,arguments)},{dup:50}],311:[function(t,n,e){arguments[4][51][0].apply(e,arguments)},{dup:51}],312:[function(t,n,e){arguments[4][52][0].apply(e,arguments)},{"./lib/check-origin":313,"./lib/events":314,dup:52,framebus:315}],313:[function(t,n,e){arguments[4][53][0].apply(e,arguments)},{dup:53}],314:[function(t,n,e){arguments[4][54][0].apply(e,arguments)},{dup:54}],315:[function(t,n,e){arguments[4][55][0].apply(e,arguments)},{dup:55}],316:[function(t,n,e){arguments[4][35][0].apply(e,arguments)},{dup:35}],317:[function(t,n,e){arguments[4][36][0].apply(e,arguments)},{dup:36}],318:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],319:[function(t,n,e){arguments[4][38][0].apply(e,arguments)},{dup:38}],320:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],321:[function(t,n,e){arguments[4][40][0].apply(e,arguments)},{dup:40}],322:[function(t,n,e){arguments[4][41][0].apply(e,arguments)},{"./array":316,dup:41}],323:[function(t,n,e){arguments[4][42][0].apply(e,arguments)},{dup:42}],324:[function(t,n,e){arguments[4][43][0].apply(e,arguments)},{"./lib/array":316,"./lib/base64":317,"./lib/dom":318,"./lib/events":319,"./lib/fn":320,"./lib/string":321,"./lib/url":322,"./lib/uuid":323,dup:43}],325:[function(t,n,e){arguments[4][80][0].apply(e,arguments)},{"batch-execute-functions":326,"braintree-utilities/lib/fn":327,dup:80}],326:[function(t,n,e){arguments[4][81][0].apply(e,arguments)},{dup:81}],327:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],328:[function(t,n,e){arguments[4][83][0].apply(e,arguments)},{"./lib/default-attributes":329,dup:83,"lodash.assign":330,"lodash.isstring":341,setattributes:342}],329:[function(t,n,e){arguments[4][84][0].apply(e,arguments)},{dup:84}],330:[function(t,n,e){arguments[4][85][0].apply(e,arguments)},{dup:85,"lodash._baseassign":331,"lodash._createassigner":333,"lodash.keys":337}],331:[function(t,n,e){arguments[4][86][0].apply(e,arguments)},{dup:86,"lodash._basecopy":332,"lodash.keys":337}],332:[function(t,n,e){arguments[4][87][0].apply(e,arguments)},{dup:87}],333:[function(t,n,e){arguments[4][88][0].apply(e,arguments)},{dup:88,"lodash._bindcallback":334,"lodash._isiterateecall":335,"lodash.restparam":336}],334:[function(t,n,e){arguments[4][89][0].apply(e,arguments)},{dup:89}],335:[function(t,n,e){arguments[4][90][0].apply(e,arguments)},{dup:90}],336:[function(t,n,e){arguments[4][91][0].apply(e,arguments)},{dup:91}],337:[function(t,n,e){arguments[4][48][0].apply(e,arguments)},{dup:48,"lodash._getnative":338,"lodash.isarguments":339,"lodash.isarray":340}],338:[function(t,n,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],339:[function(t,n,e){arguments[4][45][0].apply(e,arguments)},{dup:45}],340:[function(t,n,e){arguments[4][46][0].apply(e,arguments)},{dup:46}],341:[function(t,n,e){arguments[4][51][0].apply(e,arguments)},{dup:51}],342:[function(t,n,e){arguments[4][97][0].apply(e,arguments)},{dup:97}],343:[function(t,n,e){(function(c){var s=t("braintree-utilities"),r=t("destructor"),i=t("braintree-bus"),o=t("./views/app-view"),a=t("./views/logged-in-view"),p=t("./views/logged-out-view"),m=t("./views/overlay-view"),h=t("./views/merchant-page-view"),y=t("./views/payment-method-nonce-input-field-view"),g=t("./views/bridge-iframe-view"),S=t("../shared/util/browser"),x=t("../shared/constants"),C=t("../shared/util/util");function T(P,v,_){v=v||{},this._clientToken=P,this._clientOptions=v,this._clientToken.correlationId=C.generateUid(),this.destructor=new r,this.channel=_,this.bus=new i({merchantUrl:c.location.href,channel:this.channel}),this.container=s.normalizeElement(v.container),this.paymentMethodNonceInputField=v.paymentMethodNonceInputField,this.insertFrameFunction=v.insertFrame,this.onSuccess=v.onSuccess,this.onCancelled=v.onCancelled,this.loggedInView=null,this.loggedOutView=null,this.appView=null,this.merchantPageView=null,this.paymentMethodNonceInputFieldView=null,this.overlayView=null,this.bridgeIframeView=null,this.insertUI=v.headless!==!0}T.prototype.initialize=function(){var P=s.bind(this._handleClickLogin,this);this._createViews(),this.bus.on(x.events.GET_CLIENT_TOKEN,s.bind(this._handleGetClientToken,this)),this.bus.on(x.events.GET_CLIENT_OPTIONS,s.bind(this._handleGetClientOptions,this)),this.insertUI&&this.bus.on(i.events.PAYMENT_METHOD_GENERATED,s.bind(this._handlePaymentMethodGenerated,this)),s.addEventListener(document.body,"click",P),this.destructor.registerFunctionForTeardown(function(){s.removeEventListener(document.body,"click",P)})},T.prototype._createViews=function(){var P,v=[];S.isBridgeIframeRequired()&&(this.bridgeIframeView=new g({container:this.container,paypalAssetsUrl:this._clientToken.paypal.assetsUrl,channel:this.channel}),v.push(this.bridgeIframeView)),this.appView=new o({insertFrameFunction:this.insertFrameFunction,paypalAssetsUrl:this._clientToken.paypal.assetsUrl,isHermes:C.isHermesConfiguration(this._clientToken,this._clientOptions),headless:this._clientOptions.headless,channel:this.channel}),v.push(this.appView),this.insertUI&&(this.paymentMethodNonceInputFieldView=new y({container:this.container,el:this.paymentMethodNonceInputField,channel:this.channel}),v.push(this.paymentMethodNonceInputFieldView),this.merchantPageView=new h({channel:this.channel}),v.push(this.merchantPageView),this.loggedInView=new a({paypalAssetsUrl:this._clientToken.paypal.assetsUrl,container:this.container,channel:this.channel}),v.push(this.loggedInView),this.loggedOutView=new p({paypalAssetsUrl:this._clientToken.paypal.assetsUrl,container:this.container,enablePayPalButton:C.isOneTimeHermesConfiguration(this._clientOptions),locale:this._clientOptions.locale,channel:this.channel}),v.push(this.loggedOutView),S.isPopupSupported()&&S.isOverlaySupported()&&(this.overlayView=new m({paypalAssetsUrl:this._clientToken.paypal.assetsUrl,onFocus:s.bind(function(){this.bus.emit(x.events.FOCUS_APP)},this),onClose:s.bind(function(){this.bus.emit(x.events.CLOSE_APP)},this),channel:this.channel}),v.push(this.overlayView))),this.destructor.registerFunctionForTeardown(function(){for(P=0;P<v.length;P++)v[P].teardown()})},T.prototype._handleClickLogin=function(P){for(var v=P.target||P.srcElement;;){if(v==null||v===P.currentTarget)return;if(this._isButton(v))break;v=v.parentNode}C.preventDefault(P),this.launch()},T.prototype.launch=function(){this.appView.open()},T.prototype._isButton=function(P){var v=P.id==="braintree-paypal-button",_=C.isOneTimeHermesConfiguration(this._clientOptions)&&P.className.match(/paypal-button(?!-widget)/);return v||_},T.prototype._handlePaymentMethodGenerated=function(P){P.type===x.NONCE_TYPE&&s.isFunction(this.onSuccess)&&this.onSuccess(P)},T.prototype._clientTokenData=function(){return{analyticsUrl:this._clientToken.analytics?this._clientToken.analytics.url:null,authorizationFingerprint:this._clientToken.authorizationFingerprint,clientApiUrl:this._clientToken.clientApiUrl,displayName:this._clientOptions.displayName||this._clientToken.paypal.displayName,paypalAssetsUrl:this._clientToken.paypal.assetsUrl,paypalClientId:this._clientToken.paypal.clientId,paypalPrivacyUrl:this._clientToken.paypal.privacyUrl,paypalUserAgreementUrl:this._clientToken.paypal.userAgreementUrl,billingAgreementsEnabled:this._clientToken.paypal.billingAgreementsEnabled,unvettedMerchant:this._clientToken.paypal.unvettedMerchant,payeeEmail:this._clientToken.paypal.payeeEmail,correlationId:this._clientToken.correlationId,offline:this._clientOptions.offline||this._clientToken.paypal.environmentNoNetwork,sdkVersion:this._clientToken.sdkVersion,merchantAppId:this._clientToken.merchantAppId}},T.prototype._handleGetClientToken=function(P){P(this._clientTokenData())},T.prototype._clientOptionsData=function(){return{locale:this._clientOptions.locale||"en_us",onetime:this._clientOptions.singleUse||!1,integration:this._clientOptions.integration||"paypal",enableShippingAddress:this._clientOptions.enableShippingAddress||!1,enableBillingAddress:this._clientOptions.enableBillingAddress||!1,enableHermes:C.isHermesConfiguration(this._clientToken,this._clientOptions),amount:this._clientOptions.amount||null,currency:this._clientOptions.currency||null,shippingAddressOverride:this._clientOptions.shippingAddressOverride||null,enableCORS:this._clientOptions.enableCORS}},T.prototype._handleGetClientOptions=function(P){P(this._clientOptionsData())},T.prototype.teardown=function(){this.destructor.teardown(s.bind(function(){this.bus.teardown()},this))},n.exports=T}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../shared/constants":354,"../shared/util/browser":361,"../shared/util/util":363,"./views/app-view":345,"./views/bridge-iframe-view":346,"./views/logged-in-view":347,"./views/logged-out-view":348,"./views/merchant-page-view":349,"./views/overlay-view":351,"./views/payment-method-nonce-input-field-view":352,"braintree-bus":312,"braintree-utilities":324,destructor:325}],344:[function(t,n,e){var c=t("./client"),s=t("../shared/util/browser"),r=t("../shared/constants"),i=t("../shared/get-locale"),o=t("../shared/util/util").isHermesConfiguration,a=t("../shared/util/util").isOneTimeHermesConfiguration,p="1.6.1",m=t("braintree-utilities"),h=t("braintree-api");function y(v,_,I){var R,U;if(_=_||{},U=_.onUnsupported,typeof U!="function"&&(U=function(D){try{console.log(D)}catch(b){}}),!v)return U(new Error('Parameter "clientToken" cannot be null')),null;if(v=h.parseClientToken(v),!v.paypalEnabled)return U(new Error("PayPal is not enabled")),null;if(!s.detectedPostMessage())return U(new Error("unsupported browser detected")),null;if(!_.container)return U(new Error("Please supply a container for the PayPal button to be appended to")),null;if(!P(v,_))return U(new Error("unsupported protocol detected")),null;if(T(v,_))return U(new Error("Unvetted merchant client token does not include a payee email")),null;if(o(v,_)&&!x(_.locale))return U(new Error("This PayPal integration does not support this country")),null;if(a(_)){if(!S(_.currency))return U(new Error("This PayPal integration does not support this currency")),null;if(!C(_.amount))return U(new Error("Amount must be a number")),null}return R=new c(v,_,I),R.initialize(),R}function g(v,_){var I,R=_.length,U=!1;for(I=0;I<R;I++)v.toLowerCase()===_[I].toLowerCase()&&(U=!0);return U}function S(v){return g(v,r.HERMES_SUPPORTED_CURRENCIES)}function x(v){return g(i(v).split("_")[1],r.HERMES_SUPPORTED_COUNTRIES)}function C(v){return v=parseFloat(v),typeof v=="number"&&!isNaN(v)&&v>=0}function T(v,_){return v.paypal.unvettedMerchant&&(!o(v,_)||!v.paypal.payeeEmail)}function P(v,_){return v.paypal.allowHttp||s.isPopupSupported()?!0:"merchantHttps"in _?_.merchantHttps:m.isBrowserHttps()}n.exports={create:y,VERSION:p}},{"../shared/constants":354,"../shared/get-locale":356,"../shared/util/browser":361,"../shared/util/util":363,"./client":343,"braintree-api":281,"braintree-utilities":324}],345:[function(t,n,e){arguments[4][183][0].apply(e,arguments)},{"../../shared/constants":354,"../../shared/util/browser":361,"./modal-view":350,"./popup-view":353,"braintree-bus":312,"braintree-utilities":324,destructor:325,dup:183}],346:[function(t,n,e){var c=t("../../shared/constants"),s=t("iframer");function r(i){this.options=i||{},this.el=s({src:this._buildUrl(),name:c.BRIDGE_FRAME_NAME,height:1,width:1,style:{position:"static",top:0,left:0,bottom:0,padding:0,margin:0,border:0,outline:"none",background:"transparent"}}),this.options.container.appendChild(this.el)}r.prototype._buildUrl=function(){var i=this.options.paypalAssetsUrl;return i+="/pwpp/",i+=c.VERSION,i+="/html/bridge-frame.html",i+="#"+this.options.channel,i},r.prototype.teardown=function(){this.options.container.removeChild(this.el)},n.exports=r},{"../../shared/constants":354,iframer:328}],347:[function(t,n,e){(function(c){var s=t("braintree-utilities"),r=t("destructor"),i=t("braintree-bus"),o=t("../../shared/util/util"),a=t("../../shared/util/dom"),p=t("../../shared/constants");function m(h){this.options=h||{},this.wrapper=this.options.container||document.body,this.destructor=new r,this.bus=new i({merchantUrl:c.location.href,channel:h.channel}),this._initialize()}m.prototype._initialize=function(){var h=s.bind(this._handleClickLogout,this);this._createViewContainer(),this._createPayPalName(),this._createEmailNode(),this._createLogoutNode(),s.addEventListener(this.logoutNode,"click",h),this.destructor.registerFunctionForTeardown(s.bind(function(){s.removeEventListener(this.logoutNode,"click",h)},this)),this.bus.on(i.events.PAYMENT_METHOD_GENERATED,s.bind(this._handlePaymentMethodGenerated,this)),this.bus.on(i.events.PAYMENT_METHOD_CANCELLED,s.bind(this._handlePaymentMethodCancelled,this))},m.prototype._createViewContainer=function(){var h=["display: none","max-width: 500px","overflow: hidden","padding: 16px","background-image: url("+this.options.paypalAssetsUrl+"/pwpp/"+p.VERSION+"/images/paypal-small.png)","background-image: url("+this.options.paypalAssetsUrl+"/pwpp/"+p.VERSION+"/images/paypal-small.svg), none","background-position: 20px 50%","background-repeat: no-repeat","background-size: 13px 15px","border-top: 1px solid #d1d4d6","border-bottom: 1px solid #d1d4d6"].join(";");this.container=document.createElement("div"),this.container.id="braintree-paypal-loggedin",this.container.classList.add("braintree-paypal-loggedin"),this.container.style.cssText=h,this.wrapper.appendChild(this.container)},m.prototype._createPayPalName=function(){var h=["color: #283036","font-size: 13px","font-weight: 800",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 36px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");return this.payPalName=document.createElement("span"),this.payPalName.id="bt-pp-name",this.payPalName.classList.add("bt-pp-name"),this.payPalName.innerHTML="PayPal",this.payPalName.style.cssText=h,this.container.appendChild(this.payPalName)},m.prototype._createEmailNode=function(){var h=["color: #6e787f","font-size: 13px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 5px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");this.emailNode=document.createElement("span"),this.emailNode.id="bt-pp-email",this.emailNode.classList.add("bt-pp-email"),this.emailNode.style.cssText=h,this.container.appendChild(this.emailNode)},m.prototype._createLogoutNode=function(){var h=["color: #3d95ce","font-size: 11px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"line-height: 20px","margin: 0 0 0 25px","padding: 0","background-color: transparent","border: 0","cursor: pointer","text-decoration: underline","float: right","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");this.logoutNode=document.createElement("button"),this.logoutNode.id="bt-pp-cancel",this.logoutNode.classList.add("bt-pp-cancel"),this.logoutNode.innerHTML="Cancel",this.logoutNode.style.cssText=h,this.container.appendChild(this.logoutNode)},m.prototype.show=function(h){this.container.style.display="block",a.setTextContent(this.emailNode,h)},m.prototype.hide=function(){this.container.style.display="none"},m.prototype._handleClickLogout=function(h){o.preventDefault(h),this.bus.emit(i.events.PAYMENT_METHOD_CANCELLED,{source:p.PAYPAL_INTEGRATION_NAME})},m.prototype._handlePaymentMethodGenerated=function(h){var y;h.type===p.NONCE_TYPE&&(y=h&&h.details&&h.details.email?h.details.email:"",this.show(y))},m.prototype._handlePaymentMethodCancelled=function(h){h.source===p.PAYPAL_INTEGRATION_NAME&&this.hide()},m.prototype.teardown=function(){this.wrapper.removeChild(this.container),this.destructor.teardown(),this.bus.teardown()},n.exports=m}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":354,"../../shared/util/dom":362,"../../shared/util/util":363,"braintree-bus":312,"braintree-utilities":324,destructor:325}],348:[function(t,n,e){(function(c){var s=t("braintree-utilities"),r=t("braintree-bus"),i=t("../../shared/constants"),o=t("../../shared/get-locale");function a(p){this.options=p,this.wrapper=this.options.container||document.body,this.bus=new r({merchantUrl:c.location.href,channel:p.channel}),this._initialize()}a.prototype._initialize=function(){this.createViewContainer(),this.options.enablePayPalButton?this.createCheckoutWithPayPalButton():this.createPayWithPayPalButton(),this.bus.on(r.events.PAYMENT_METHOD_GENERATED,s.bind(this._handlePaymentMethodGenerated,this)),this.bus.on(r.events.PAYMENT_METHOD_CANCELLED,s.bind(this._handlePaymentMethodCancelled,this))},a.prototype.createViewContainer=function(){this.container=document.createElement("div"),this.container.id="braintree-paypal-loggedout",this.wrapper.appendChild(this.container),this.loginNode=this.container},a.prototype.createPayWithPayPalButton=function(){var p=document.createElement("a"),m=new Image,h=["max-width: 100%","display: block","width: 100%","height: 100%","outline: none","border: 0"].join(";"),y=["display: block","width: 115px","height: 44px","overflow: hidden"].join(";");p.id="braintree-paypal-button",p.href="#",p.style.cssText=y,m.src=this.options.paypalAssetsUrl+"/pwpp/"+i.VERSION+"/images/pay-with-paypal.png",m.setAttribute("alt","Pay with PayPal"),m.style.cssText=h,p.appendChild(m),this.container.appendChild(p)},a.prototype.createCheckoutWithPayPalButton=function(){var p=document.createElement("script"),m,h={"data-merchant":"merchant-id","data-button":"checkout","data-type":"button","data-color":"blue","data-lc":o(this.options.locale)};p.src="//www.paypalobjects.com/api/button.js",p.async=!0;for(m in h)h.hasOwnProperty(m)&&p.setAttribute(m,h[m]);this.container.appendChild(p)},a.prototype.show=function(){this.container.style.display="block"},a.prototype.hide=function(){this.container.style.display="none"},a.prototype._handlePaymentMethodGenerated=function(p){p.type===i.NONCE_TYPE&&this.hide()},a.prototype._handlePaymentMethodCancelled=function(p){p.source===i.PAYPAL_INTEGRATION_NAME&&this.show()},a.prototype.teardown=function(){this.wrapper.removeChild(this.container),this.bus.teardown()},n.exports=a}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":354,"../../shared/get-locale":356,"braintree-bus":312,"braintree-utilities":324}],349:[function(t,n,e){(function(c){var s=t("braintree-bus"),r=t("braintree-utilities"),i=t("../../shared/constants");function o(m){this.options=m,this.bus=new s({merchantUrl:c.location.href,channel:m.channel}),this.bus.on(i.events.UI_MODAL_DID_OPEN,r.bind(this.lockWindowSize,this)),this.bus.on(i.events.UI_MODAL_DID_CLOSE,r.bind(this.unlockWindowSize,this))}o.prototype.lockWindowSize=function(){this.defaultStyles=p(),document.documentElement.style.height="100%",document.documentElement.style.overflow="hidden",document.body.style.height="100%",document.body.style.overflow="hidden"},o.prototype.unlockWindowSize=function(){this.defaultStyles&&(document.documentElement.style.height=this.defaultStyles.html.styles.height,document.documentElement.style.overflow=this.defaultStyles.html.styles.overflow,document.body.style.height=this.defaultStyles.body.styles.height,document.body.style.overflow=this.defaultStyles.body.styles.overflow,delete this.defaultStyles)},o.prototype._handleUIModalDidOpen=function(m){m.source===i.PAYPAL_INTEGRATION_NAME&&this.lockWindowSize()},o.prototype._handleUIModalDidClose=function(m){m.source===i.PAYPAL_INTEGRATION_NAME&&this.unlockWindowSize()},o.prototype.teardown=function(){this.unlockWindowSize(),this.bus.teardown()};function a(m){var h=window.getComputedStyle?getComputedStyle(m):m.currentStyle;return{overflow:h.overflow||"",height:m.style.height||""}}function p(){return{html:{node:document.documentElement,styles:a(document.documentElement)},body:{node:document.body,styles:a(document.body)}}}n.exports=o}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":354,"braintree-bus":312,"braintree-utilities":324}],350:[function(t,n,e){arguments[4][184][0].apply(e,arguments)},{"../../shared/constants":354,"../../shared/util/browser":361,"braintree-bus":312,"braintree-utilities":324,dup:184,iframer:328}],351:[function(t,n,e){(function(c){var s=t("braintree-utilities"),r=t("destructor"),i=t("braintree-bus"),o=t("../../shared/constants");function a(p){this.options=p,this.spriteSrc=this.options.paypalAssetsUrl+"/pwpp/"+o.VERSION+"/images/pp_overlay_sprite.png",this.bus=new i({merchantUrl:c.location.href,channel:p.channel}),this.destructor=new r,this._create(),this._setupEvents(),this.bus.on(i.events.UI_POPUP_DID_OPEN,s.bind(this._handleUIPopupDidOpen,this)),this.bus.on(i.events.UI_POPUP_DID_CLOSE,s.bind(this._handleUIPopupDidClose,this))}a.prototype.open=function(){document.body.contains(this.el)||document.body.appendChild(this.el)},a.prototype.close=function(){document.body.contains(this.el)&&document.body.removeChild(this.el)},a.prototype._handleUIPopupDidClose=function(p){p.source===o.PAYPAL_INTEGRATION_NAME&&this.close()},a.prototype._handleUIPopupDidOpen=function(p){p.source===o.PAYPAL_INTEGRATION_NAME&&this.open()},a.prototype._create=function(){this.el=document.createElement("div"),this.el.className="bt-overlay",this._setStyles(this.el,["z-index: 20001","position: fixed","top: 0","left: 0","height: 100%","width: 100%","text-align: center","background: #000","background: rgba(0,0,0,0.7)",'-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=52)"']),this.el.appendChild(this._createCloseIcon()),this.el.appendChild(this._createMessage())},a.prototype._createCloseIcon=function(){return this.closeIcon=document.createElement("div"),this.closeIcon.className="bt-close-overlay",this._setStyles(this.closeIcon,["position: absolute","top: 10px","right: 10px","cursor: pointer","background: url("+this.spriteSrc+") no-repeat 0 -67px","height: 14px","width: 14px"]),this.closeIcon},a.prototype._createMessage=function(){var p=document.createElement("div");return this._setStyles(p,["position: relative","top: 50%","max-width: 350px",'font-family: "HelveticaNeue", "HelveticaNeue-Light", "Helvetica Neue Light", helvetica, arial, sans-serif',"font-size: 14px","line-height: 20px","margin: -70px auto 0"]),p.appendChild(this._createLogo()),p.appendChild(this._createExplanation()),p.appendChild(this._createFocusLink()),p},a.prototype._createExplanation=function(){var p=document.createElement("div");return this._setStyles(p,["color: #FFF","margin-bottom: 20px"]),p.innerHTML="Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",p},a.prototype._createLogo=function(){var p=document.createElement("div");return this._setStyles(p,["background: url("+this.spriteSrc+") no-repeat 0 0","width: 94px","height: 25px","margin: 0 auto 26px auto"]),p},a.prototype._createFocusLink=function(){return this.focusLink=document.createElement("a"),this._setStyles(this.focusLink,["color: #009be1","cursor: pointer"]),this.focusLink.innerHTML="Continue",this.focusLink},a.prototype._setStyles=function(p,m){var h=m.join(";");p.style.cssText=h},a.prototype._setupEvents=function(){var p=s.bind(this._handleClose,this),m=s.bind(this._handleFocus,this);s.addEventListener(this.closeIcon,"click",p),s.addEventListener(this.focusLink,"click",m),this.destructor.registerFunctionForTeardown(s.bind(function(){s.removeEventListener(this.closeIcon,"click",p),s.removeEventListener(this.focusLink,"click",m)},this))},a.prototype._handleClose=function(p){p.preventDefault(),this.close(),s.isFunction(this.options.onClose)&&this.options.onClose()},a.prototype._handleFocus=function(p){p.preventDefault(),s.isFunction(this.options.onFocus)&&this.options.onFocus()},a.prototype.teardown=function(){this.bus.teardown(),this.destructor.teardown(),this.close()},n.exports=a}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":354,"braintree-bus":312,"braintree-utilities":324,destructor:325}],352:[function(t,n,e){(function(c){var s=t("braintree-utilities"),r=t("destructor"),i=t("braintree-bus"),o=t("../../shared/constants");function a(p){this.options=p||{},this.container=this.options.container||document.body,this.el=this.options.el,this.destructor=new r,this.bus=new i({merchantUrl:c.location.href,channel:p.channel}),this._initialize()}a.prototype._initialize=function(){s.isFunction(this.el)||(this.el!=null?(this.el=s.normalizeElement(this.el),this.destructor.registerFunctionForTeardown(s.bind(function(){this.clear()},this))):this.el=this.create()),this.bus.on(i.events.PAYMENT_METHOD_GENERATED,s.bind(this._handlePaymentMethodGenerated,this)),this.bus.on(i.events.PAYMENT_METHOD_CANCELLED,s.bind(this._handlePaymentMethodCancelled,this))},a.prototype.create=function(){var p=document.createElement("input");return p.name="payment_method_nonce",p.type="hidden",this.container.appendChild(p),this.destructor.registerFunctionForTeardown(s.bind(function(){this.container.removeChild(p)},this)),p},a.prototype.value=function(p){s.isFunction(this.el)?this.el(p):this.el.value=p},a.prototype.clear=function(){this.value("")},a.prototype._handlePaymentMethodCancelled=function(p){p.source===o.PAYPAL_INTEGRATION_NAME&&this.clear()},a.prototype._handlePaymentMethodGenerated=function(p){p.type===o.NONCE_TYPE&&this.value(p.nonce)},a.prototype.teardown=function(){this.destructor.teardown(),this.bus.teardown()},n.exports=a}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../../shared/constants":354,"braintree-bus":312,"braintree-utilities":324,destructor:325}],353:[function(t,n,e){arguments[4][185][0].apply(e,arguments)},{"../../shared/constants":354,"../../shared/useragent/browser":357,"braintree-bus":312,dup:185}],354:[function(t,n,e){arguments[4][186][0].apply(e,arguments)},{dup:186}],355:[function(t,n,e){n.exports={us:"en_us",gb:"en_uk",uk:"en_uk",de:"de_de",fr:"fr_fr",it:"it_it",es:"es_es",ca:"en_ca",au:"en_au",at:"de_de",be:"en_us",ch:"de_de",dk:"da_dk",nl:"nl_nl",no:"no_no",pl:"pl_pl",se:"sv_se",tr:"tr_tr",bg:"en_us",cy:"en_us",hr:"en_us",is:"en_us",kh:"en_us",mt:"en_us",my:"en_us",ru:"ru_ru"}},{}],356:[function(t,n,e){var c=t("../shared/data/country-code-lookup");function s(o){return o.indexOf("_")!==-1&&o.length===5}function r(o){var a,p;for(a in c)c.hasOwnProperty(a)&&(a===o||c[a]===o)&&(p=c[a]);return p}function i(o){var a,p;return o=o?o.toLowerCase():"us",o=o.replace(/-/g,"_"),a=s(o)?o:r(o),a?(p=a.split("_"),[p[0],p[1].toUpperCase()].join("_")):"en_US"}n.exports=i},{"../shared/data/country-code-lookup":355}],357:[function(t,n,e){arguments[4][187][0].apply(e,arguments)},{"./platform":359,"./useragent":360,dup:187}],358:[function(t,n,e){arguments[4][188][0].apply(e,arguments)},{"./platform":359,"./useragent":360,dup:188}],359:[function(t,n,e){arguments[4][189][0].apply(e,arguments)},{"./useragent":360,dup:189}],360:[function(t,n,e){arguments[4][190][0].apply(e,arguments)},{dup:190}],361:[function(t,n,e){arguments[4][191][0].apply(e,arguments)},{"../useragent/browser":357,"../useragent/device":358,"../useragent/platform":359,"../useragent/useragent":360,dup:191}],362:[function(t,n,e){function c(s,r){var i="innerText";document&&document.body&&"textContent"in document.body&&(i="textContent"),s[i]=r}n.exports={setTextContent:c}},{}],363:[function(t,n,e){var c=typeof String.prototype.trim=="function"?function(g){return g.trim()}:function(g){return g.replace(/^\s+|\s+$/,"")},s=typeof window.btoa=="function"?function(g){return window.btoa(g)}:function(g){for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",x="",C,T,P,v,_,I,R,U=0;U<g.length;)C=g.charCodeAt(U++),T=g.charCodeAt(U++),P=g.charCodeAt(U++),v=C>>2,_=(C&3)<<4|T>>4,I=(T&15)<<2|P>>6,R=P&63,isNaN(T)?I=R=64:isNaN(P)&&(R=64),x=x+S.charAt(v)+S.charAt(_)+S.charAt(I)+S.charAt(R);return x};function r(){var g,S,x="";for(g=0;g<32;g++)S=Math.floor(Math.random()*16),x+=S.toString(16);return x}function i(g){return/^(true|1)$/i.test(g)}function o(g){return g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")}function a(g){var S,x,C,T,P,v,_,I,R=g.indexOf("?"),U={};if(R>=0&&(g=g.substr(R+1)),g.length===0)return null;for(S=g.split("&"),x=0,C=S.length;x<C;x++)T=S[x],P=T.indexOf("="),v=T.substr(0,P),I=T.substr(P+1),_=decodeURIComponent(I),_=_.replace(/</g,"&lt;").replace(/>/g,"&gt;"),_==="false"&&(_=!1),(_==null||_==="true")&&(_=!0),U[v]=_;return U}function p(g){g.preventDefault?g.preventDefault():g.returnValue=!1}function m(g){return Boolean(g.singleUse)&&Boolean(g.amount)&&Boolean(g.currency)}function h(g){return Boolean(g.paypal.billingAgreementsEnabled)}function y(g,S){return h(g)||m(S)}n.exports={trim:c,btoa:s,generateUid:r,castToBoolean:i,htmlEscape:o,parseUrlParams:a,preventDefault:p,isOneTimeHermesConfiguration:m,isBillingAgreementsHermesConfiguration:h,isHermesConfiguration:y}},{}],364:[function(t,n,e){arguments[4][35][0].apply(e,arguments)},{dup:35}],365:[function(t,n,e){arguments[4][36][0].apply(e,arguments)},{dup:36}],366:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],367:[function(t,n,e){arguments[4][38][0].apply(e,arguments)},{dup:38}],368:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],369:[function(t,n,e){arguments[4][40][0].apply(e,arguments)},{dup:40}],370:[function(t,n,e){arguments[4][41][0].apply(e,arguments)},{"./array":364,dup:41}],371:[function(t,n,e){arguments[4][42][0].apply(e,arguments)},{dup:42}],372:[function(t,n,e){arguments[4][43][0].apply(e,arguments)},{"./lib/array":364,"./lib/base64":365,"./lib/dom":366,"./lib/events":367,"./lib/fn":368,"./lib/string":369,"./lib/url":370,"./lib/uuid":371,dup:43}],373:[function(t,n,e){arguments[4][80][0].apply(e,arguments)},{"batch-execute-functions":374,"braintree-utilities/lib/fn":375,dup:80}],374:[function(t,n,e){arguments[4][81][0].apply(e,arguments)},{dup:81}],375:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],376:[function(t,n,e){(function(c){function s(r){if((typeof r=="string"||r instanceof String)&&(r=document.getElementById(r)),r instanceof HTMLFormElement)this.htmlForm=r;else throw new TypeError("FormNapper requires an HTMLFormElement element or the id string of one.")}s.prototype.hijack=function(r){this.submitHandler||(this.submitHandler=function(i){i.preventDefault?i.preventDefault():i.returnValue=!1,r(i)},c.addEventListener!=null?this.htmlForm.addEventListener("submit",this.submitHandler,!1):c.attachEvent!=null?this.htmlForm.attachEvent("onsubmit",this.submitHandler):this.htmlForm.onsubmit=this.submitHandler)},s.prototype.inject=function(r,i){var o=this.htmlForm.querySelector('input[name="'+r+'"]');return o==null&&(o=document.createElement("input"),o.type="hidden",o.name=r,this.htmlForm.appendChild(o)),o.value=i,o},s.prototype.submit=function(){HTMLFormElement.prototype.submit.call(this.htmlForm)},s.prototype.detach=function(){!this.submitHandler||(c.removeEventListener!=null?this.htmlForm.removeEventListener("submit",this.submitHandler,!1):c.detachEvent!=null?this.htmlForm.detachEvent("onsubmit",this.submitHandler):this.htmlForm.onsubmit=null,delete this.submitHandler)},n.exports=s}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],377:[function(t,n,e){var c=t("./lib/external"),s=t("./lib/shared/constants").events,r="1.0.0";n.exports={create:function(i){return new c(i)},events:s,VERSION:r}},{"./lib/external":379,"./lib/shared/constants":381}],378:[function(t,n,e){var c=t("../shared/constants");n.exports=function(r,i){return r+"/hosted-fields/"+c.VERSION+"/hosted-fields-frame.html#"+i}},{"../shared/constants":381}],379:[function(t,n,e){var c=t("destructor"),s=t("classlist"),r=t("iframer"),i=t("braintree-bus"),o=t("./compose-url"),a=t("../shared/constants"),p=t("nodelist-to-array"),m=t("braintree-utilities"),h=t("../shared/find-parent-tags"),y=t("./should-use-label-focus"),g=a.events;function S(T,P){var v=document.createElement("div");return v.style.clear="both",P=P||document.body,P.appendChild(T),P.appendChild(v),{parent:P,children:[T,v]}}function x(T,P){return function(v){var _=T[v.fieldKey].containerElement,I=s(_);v.target={fieldKey:v.fieldKey,container:_},I.toggle(a.externalClasses.FOCUSED,v.isFocused).toggle(a.externalClasses.VALID,v.isValid),v.isStrictlyValidating?I.toggle(a.externalClasses.INVALID,!v.isValid):I.toggle(a.externalClasses.INVALID,!v.isPotentiallyValid),delete v.fieldKey,delete v.isStrictlyValidating,P&&P(v)}}function C(T){var P,v,_,I,R,U,D={},b=0;for(this.injectedNodes=[],this.destructor=new c,this.bus=new i({channel:T.channel,merchantUrl:location.href}),this.destructor.registerFunctionForTeardown(m.bind(function(){this.bus.teardown()},this)),this.bus.emit(i.events.ASYNC_DEPENDENCY_INITIALIZING),this.bus.emit(i.events.SEND_ANALYTICS_EVENTS,"hosted-fields.initialized"),R=0;R<a.whitelistedFields.length;R++)if(P=a.whitelistedFields[R],v=T.merchantConfiguration.hostedFields[P],!!v){if(_=document.querySelector(v.selector),_){if(_.querySelector('iframe[name^="braintree-"]')){this.bus.emit(i.events.ERROR,{message:'Cannot place two elements in "'+v.selector+'"'});continue}}else{U='Unable to find element with selector "'+v.selector+'" for hostedFields.'+P,this.bus.emit(i.events.ERROR,{message:U});continue}I=r({type:P,name:"braintree-hosted-field-"+P,style:a.defaultIFrameStyle}),this.injectedNodes.push(S(I,_)),this.setupLabelFocus(P,_),D[P]={frameElement:I,containerElement:_},b++,setTimeout(function(A){return function(){A.src=o(T.gatewayConfiguration.assetsUrl,T.channel)}}(I),0)}this.bus.on(g.FRAME_READY,function(A){b--,A(b===0)}),this.bus.on(g.INPUT_EVENT,x(D,T.merchantConfiguration.hostedFields.onFieldEvent)),this.destructor.registerFunctionForTeardown(m.bind(function(){var A,L,k;for(A=0;A<this.injectedNodes.length;A++){for(k=this.injectedNodes[A],L=0;L<k.children.length;L++)k.parent.removeChild(k.children[L]);s(k.parent).remove(a.externalClasses.FOCUSED,a.externalClasses.INVALID,a.externalClasses.VALID)}},this))}C.prototype.setupLabelFocus=function(T,P){var v,_,I=this.bus;if(!y()||P.id==null)return;function R(){I.emit(g.TRIGGER_INPUT_FOCUS,T)}for(v=p(document.querySelectorAll('label[for="'+P.id+'"]')),v=v.concat(h(P,"label")),_=0;_<v.length;_++)m.addEventListener(v[_],"click",R,!1);this.destructor.registerFunctionForTeardown(function(){for(_=0;_<v.length;_++)m.removeEventListener(v[_],"click",R,!1)})},C.prototype.teardown=function(T){this.destructor.teardown(T)},n.exports=C},{"../shared/constants":381,"../shared/find-parent-tags":382,"./compose-url":378,"./should-use-label-focus":380,"braintree-bus":383,"braintree-utilities":395,classlist:396,destructor:399,iframer:402,"nodelist-to-array":417}],380:[function(t,n,e){n.exports=function(){return!/(iPad|iPhone|iPod)/i.test(navigator.userAgent)}},{}],381:[function(t,n,e){var c="1.0.0";n.exports={VERSION:c,events:{FRAME_READY:"hosted-fields:FRAME_READY",VALIDATE_STRICT:"hosted-fields:VALIDATE_STRICT",CONFIGURATION:"hosted-fields:CONFIGURATION",TOKENIZATION_REQUEST:"hosted-fields:TOKENIZATION_REQUEST",INPUT_EVENT:"hosted-fields:INPUT_EVENT",TRIGGER_INPUT_FOCUS:"hosted-fields:TRIGGER_INPUT_FOCUS"},externalEvents:{FOCUS:"focus",BLUR:"blur",FIELD_STATE_CHANGE:"fieldStateChange"},defaultMaxLengths:{number:19,postalCode:8,expirationDate:7,expirationMonth:2,expirationYear:4,cvv:3},externalClasses:{FOCUSED:"braintree-hosted-fields-focused",INVALID:"braintree-hosted-fields-invalid",VALID:"braintree-hosted-fields-valid"},defaultIFrameStyle:{border:"none",width:"100%",height:"100%",float:"left"},whitelistedFields:["number","cvv","expirationDate","expirationMonth","expirationYear","postalCode"],whitelistedStyles:["-moz-osx-font-smoothing","-moz-transition","-webkit-font-smoothing","-webkit-transition","color","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","line-height","opacity","outline","text-shadow","transition"],passwordManagerFields:{number:{name:"credit-card-number",label:"Credit Card Number"},expirationDate:{name:"expiration",label:"Expiration Date"},postalCode:{name:"postal-code",label:"Postal Code"}}}},{}],382:[function(t,n,e){function c(s,r){for(var i=s.parentNode,o=[];i!=null;)i.tagName!=null&&i.tagName.toLowerCase()===r&&o.push(i),i=i.parentNode;return o}n.exports=c},{}],383:[function(t,n,e){arguments[4][52][0].apply(e,arguments)},{"./lib/check-origin":384,"./lib/events":385,dup:52,framebus:386}],384:[function(t,n,e){arguments[4][53][0].apply(e,arguments)},{dup:53}],385:[function(t,n,e){arguments[4][54][0].apply(e,arguments)},{dup:54}],386:[function(t,n,e){arguments[4][55][0].apply(e,arguments)},{dup:55}],387:[function(t,n,e){arguments[4][35][0].apply(e,arguments)},{dup:35}],388:[function(t,n,e){arguments[4][36][0].apply(e,arguments)},{dup:36}],389:[function(t,n,e){arguments[4][22][0].apply(e,arguments)},{dup:22}],390:[function(t,n,e){arguments[4][38][0].apply(e,arguments)},{dup:38}],391:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],392:[function(t,n,e){arguments[4][40][0].apply(e,arguments)},{dup:40}],393:[function(t,n,e){arguments[4][41][0].apply(e,arguments)},{"./array":387,dup:41}],394:[function(t,n,e){arguments[4][42][0].apply(e,arguments)},{dup:42}],395:[function(t,n,e){arguments[4][43][0].apply(e,arguments)},{"./lib/array":387,"./lib/base64":388,"./lib/dom":389,"./lib/events":390,"./lib/fn":391,"./lib/string":392,"./lib/url":393,"./lib/uuid":394,dup:43}],396:[function(t,n,e){n.exports=i;var c=t("component-indexof"),s=t("trim"),r=Array.prototype;function i(o){if(!(this instanceof i))return new i(o);var a=s(o.className).split(/\s+/),p;for(this._elem=o,this.length=0,p=0;p<a.length;p+=1)a[p]&&r.push.call(this,a[p])}i.prototype.add=function(){var o,a;for(a=0;a<arguments.length;a+=1)o=""+arguments[a],!(c(this,o)>=0)&&r.push.call(this,o);return this._elem.className=this.toString(),this},i.prototype.remove=function(){var o,a,p;for(p=0;p<arguments.length;p+=1)a=""+arguments[p],o=c(this,a),!(o<0)&&r.splice.call(this,o,1);return this._elem.className=this.toString(),this},i.prototype.contains=function(o){return o+="",c(this,o)>=0},i.prototype.toggle=function(o,a){return o+="",a===!0?this.add(o):a===!1?this.remove(o):this[this.contains(o)?"remove":"add"](o)},i.prototype.toString=function(){return r.join.call(this," ")}},{"component-indexof":397,trim:398}],397:[function(t,n,e){n.exports=function(c,s){if(c.indexOf)return c.indexOf(s);for(var r=0;r<c.length;++r)if(c[r]===s)return r;return-1}},{}],398:[function(t,n,e){e=n.exports=c;function c(s){return s.replace(/^\s*|\s*$/g,"")}e.left=function(s){return s.replace(/^\s*/,"")},e.right=function(s){return s.replace(/\s*$/,"")}},{}],399:[function(t,n,e){arguments[4][80][0].apply(e,arguments)},{"batch-execute-functions":400,"braintree-utilities/lib/fn":401,dup:80}],400:[function(t,n,e){arguments[4][81][0].apply(e,arguments)},{dup:81}],401:[function(t,n,e){arguments[4][39][0].apply(e,arguments)},{dup:39}],402:[function(t,n,e){arguments[4][83][0].apply(e,arguments)},{"./lib/default-attributes":403,dup:83,"lodash.assign":406,"lodash.isstring":404,setattributes:405}],403:[function(t,n,e){arguments[4][84][0].apply(e,arguments)},{dup:84}],404:[function(t,n,e){arguments[4][51][0].apply(e,arguments)},{dup:51}],405:[function(t,n,e){arguments[4][97][0].apply(e,arguments)},{dup:97}],406:[function(t,n,e){arguments[4][85][0].apply(e,arguments)},{dup:85,"lodash._baseassign":407,"lodash._createassigner":409,"lodash.keys":413}],407:[function(t,n,e){arguments[4][86][0].apply(e,arguments)},{dup:86,"lodash._basecopy":408,"lodash.keys":413}],408:[function(t,n,e){arguments[4][87][0].apply(e,arguments)},{dup:87}],409:[function(t,n,e){arguments[4][88][0].apply(e,arguments)},{dup:88,"lodash._bindcallback":410,"lodash._isiterateecall":411,"lodash.restparam":412}],410:[function(t,n,e){arguments[4][89][0].apply(e,arguments)},{dup:89}],411:[function(t,n,e){arguments[4][90][0].apply(e,arguments)},{dup:90}],412:[function(t,n,e){arguments[4][91][0].apply(e,arguments)},{dup:91}],413:[function(t,n,e){arguments[4][48][0].apply(e,arguments)},{dup:48,"lodash._getnative":414,"lodash.isarguments":415,"lodash.isarray":416}],414:[function(t,n,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],415:[function(t,n,e){arguments[4][45][0].apply(e,arguments)},{dup:45}],416:[function(t,n,e){arguments[4][46][0].apply(e,arguments)},{dup:46}],417:[function(t,n,e){function c(s){try{return Array.prototype.slice.call(s)}catch(o){for(var r=[],i=0;i<s.length;i++)r.push(s[i]);return r}}typeof n!="undefined"&&(n.exports=c)},{}],418:[function(t,n,e){var c=t("lodash._baseclone"),s=t("lodash._bindcallback");function r(i,o,a){return typeof o=="function"?c(i,!0,s(o,a,3)):c(i,!0)}n.exports=r},{"lodash._baseclone":419,"lodash._bindcallback":429}],419:[function(t,n,e){(function(c){var s=t("lodash._arraycopy"),r=t("lodash._arrayeach"),i=t("lodash._baseassign"),o=t("lodash._basefor"),a=t("lodash.isarray"),p=t("lodash.keys"),m="[object Arguments]",h="[object Array]",y="[object Boolean]",g="[object Date]",S="[object Error]",x="[object Function]",C="[object Map]",T="[object Number]",P="[object Object]",v="[object RegExp]",_="[object Set]",I="[object String]",R="[object WeakMap]",U="[object ArrayBuffer]",D="[object Float32Array]",b="[object Float64Array]",A="[object Int8Array]",L="[object Int16Array]",k="[object Int32Array]",H="[object Uint8Array]",X="[object Uint8ClampedArray]",ne="[object Uint16Array]",ae="[object Uint32Array]",le=/\w*$/,Z={};Z[m]=Z[h]=Z[U]=Z[y]=Z[g]=Z[D]=Z[b]=Z[A]=Z[L]=Z[k]=Z[T]=Z[P]=Z[v]=Z[I]=Z[H]=Z[X]=Z[ne]=Z[ae]=!0,Z[S]=Z[x]=Z[C]=Z[_]=Z[R]=!1;var ce=Object.prototype,Re=ce.hasOwnProperty,Ie=ce.toString,Pe=c.ArrayBuffer,De=c.Uint8Array;function ye(Y,J,ue,ve,be,fe,we){var de;if(ue&&(de=be?ue(Y,ve,be):ue(Y)),de!==void 0)return de;if(!ut(Y))return Y;var Fe=a(Y);if(Fe){if(de=ot(Y),!J)return s(Y,de)}else{var Ce=Ie.call(Y),Ue=Ce==x;if(Ce==P||Ce==m||Ue&&!be){if(de=st(Ue?{}:Y),!J)return i(de,Y)}else return Z[Ce]?at(Y,Ce,J):be?Y:{}}fe||(fe=[]),we||(we=[]);for(var _e=fe.length;_e--;)if(fe[_e]==Y)return we[_e];return fe.push(Y),we.push(de),(Fe?r:it)(Y,function(lt,qe){de[qe]=ye(lt,J,ue,qe,Y,fe,we)}),de}function it(Y,J){return o(Y,J,p)}function ke(Y){var J=new Pe(Y.byteLength),ue=new De(J);return ue.set(new De(Y)),J}function ot(Y){var J=Y.length,ue=new Y.constructor(J);return J&&typeof Y[0]=="string"&&Re.call(Y,"index")&&(ue.index=Y.index,ue.input=Y.input),ue}function st(Y){var J=Y.constructor;return typeof J=="function"&&J instanceof J||(J=Object),new J}function at(Y,J,ue){var ve=Y.constructor;switch(J){case U:return ke(Y);case y:case g:return new ve(+Y);case D:case b:case A:case L:case k:case H:case X:case ne:case ae:var be=Y.buffer;return new ve(ue?ke(be):be,Y.byteOffset,Y.length);case T:case I:return new ve(Y);case v:var fe=new ve(Y.source,le.exec(Y));fe.lastIndex=Y.lastIndex}return fe}function ut(Y){var J=typeof Y;return!!Y&&(J=="object"||J=="function")}n.exports=ye}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"lodash._arraycopy":420,"lodash._arrayeach":421,"lodash._baseassign":422,"lodash._basefor":424,"lodash.isarray":425,"lodash.keys":426}],420:[function(t,n,e){function c(s,r){var i=-1,o=s.length;for(r||(r=Array(o));++i<o;)r[i]=s[i];return r}n.exports=c},{}],421:[function(t,n,e){function c(s,r){for(var i=-1,o=s.length;++i<o&&r(s[i],i,s)!==!1;);return s}n.exports=c},{}],422:[function(t,n,e){arguments[4][86][0].apply(e,arguments)},{dup:86,"lodash._basecopy":423,"lodash.keys":426}],423:[function(t,n,e){arguments[4][87][0].apply(e,arguments)},{dup:87}],424:[function(t,n,e){var c=s();function s(o){return function(a,p,m){for(var h=r(a),y=m(a),g=y.length,S=o?g:-1;o?S--:++S<g;){var x=y[S];if(p(h[x],x,h)===!1)break}return a}}function r(o){return i(o)?o:Object(o)}function i(o){var a=typeof o;return!!o&&(a=="object"||a=="function")}n.exports=c},{}],425:[function(t,n,e){arguments[4][46][0].apply(e,arguments)},{dup:46}],426:[function(t,n,e){arguments[4][48][0].apply(e,arguments)},{dup:48,"lodash._getnative":427,"lodash.isarguments":428,"lodash.isarray":425}],427:[function(t,n,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],428:[function(t,n,e){arguments[4][45][0].apply(e,arguments)},{dup:45}],429:[function(t,n,e){arguments[4][89][0].apply(e,arguments)},{dup:89}],430:[function(t,n,e){var c=t("lodash._baseassign"),s=t("lodash._basecreate"),r=t("lodash._isiterateecall");function i(o,a,p){var m=s(o);return p&&r(o,a,p)&&(a=void 0),a?c(m,a):m}n.exports=i},{"lodash._baseassign":431,"lodash._basecreate":437,"lodash._isiterateecall":438}],431:[function(t,n,e){arguments[4][86][0].apply(e,arguments)},{dup:86,"lodash._basecopy":432,"lodash.keys":433}],432:[function(t,n,e){arguments[4][87][0].apply(e,arguments)},{dup:87}],433:[function(t,n,e){arguments[4][48][0].apply(e,arguments)},{dup:48,"lodash._getnative":434,"lodash.isarguments":435,"lodash.isarray":436}],434:[function(t,n,e){arguments[4][49][0].apply(e,arguments)},{dup:49}],435:[function(t,n,e){arguments[4][45][0].apply(e,arguments)},{dup:45}],436:[function(t,n,e){arguments[4][46][0].apply(e,arguments)},{dup:46}],437:[function(t,n,e){var c=function(){function r(){}return function(i){if(s(i)){r.prototype=i;var o=new r;r.prototype=void 0}return o||{}}}();function s(r){var i=typeof r;return!!r&&(i=="object"||i=="function")}n.exports=c},{}],438:[function(t,n,e){arguments[4][90][0].apply(e,arguments)},{dup:90}],439:[function(t,n,e){function c(r){var i,o={};if(!!r){for(i in r)r.hasOwnProperty(i)&&(o[s(i)]=r[i]);return o}}function s(r){return r.replace(/([A-Z])/g,function(i){return"_"+i.toLowerCase()})}n.exports={convertToLegacyShippingAddress:c}},{}],440:[function(t,n,e){n.exports={ROOT_SUCCESS_CALLBACK:"onPaymentMethodReceived",ROOT_ERROR_CALLBACK:"onError",ROOT_READY_CALLBACK:"onReady"}},{}],441:[function(t,n,e){(function(c){var s=t("lodash.clonedeep"),r=t("braintree-api"),i=t("braintree-bus"),o=t("destructor"),a=t("braintree-utilities").bind,p=t("../constants"),m=t("../lib/sanitize-payload"),h=t("../lib/lookup-callback-for"),y=t("../lib/fallback-error-handler"),g=t("../lib/node-type"),S=g.isJQueryElement,x=g.isHTMLElement;function C(){}function T(){this._dependenciesRemaining++}function P(){this._dependenciesRemaining--,this._dependenciesRemaining===0&&(delete this._dependenciesRemaining,this.bus.off(i.events.ASYNC_DEPENDENCY_INITIALIZING,this._handleDependencyInitializing),this.bus.off(i.events.ASYNC_DEPENDENCY_READY,this._handleDependencyReady),this._onIntegrationReady())}function v(_){this.configuration=_,this.isReady=!1,this.destructor=new o,this.bus=new i({channel:this.configuration.channel,merchantUrl:c.location.href}),this._createApiClient(),this._configureCallbacks(),this._configureAnalytics(),this._attachEvents(),this._emitInitializing()}v.prototype._emitInitializing=function(){this.bus.emit(i.events.ASYNC_DEPENDENCY_INITIALIZING)},v.prototype._createApiClient=function(){var _={clientToken:this.configuration.gatewayConfiguration,integration:this.configuration.integrationType,analyticsConfiguration:this.configuration.analyticsConfiguration};this.configuration.merchantConfiguration.enableCORS&&(_.enableCORS=!0),this.apiClient=new r.Client(_)},v.prototype._configureCallbacks=function(){var _=h(this.configuration.merchantConfiguration);function I(R){return function(U){R(m(U))}}this.onSuccess=I(_(p.ROOT_SUCCESS_CALLBACK)),this.onError=_(p.ROOT_ERROR_CALLBACK,y),this.onReady=_(p.ROOT_READY_CALLBACK)},v.prototype._configureAnalytics=function(){var _="web."+this.configuration.integrationType+".",I=this.apiClient;this.bus.on(i.events.SEND_ANALYTICS_EVENTS,function(R,U){var D;for(R instanceof Array||(R=[R]),D=0;D<R.length;D++)R[D]=_+R[D];I.sendAnalyticsEvents(R,U)})},v.prototype._attachEvents=function(){var _,I=this.configuration;this.bus.on(i.events.ERROR,this.onError),this.bus.on(i.events.PAYMENT_METHOD_RECEIVED,this.onSuccess),this.bus.on(i.events.WARNING,function(R){try{console.warn(R)}catch(U){}}),_={enableCORS:I.merchantConfiguration.enableCORS,configuration:I.gatewayConfiguration,integration:I.integrationType,analyticsConfiguration:I.analyticsConfiguration,merchantConfiguration:s(I.merchantConfiguration,function(R){if(S(R)||x(R))return{}})},this.bus.on(i.events.CONFIGURATION_REQUEST,function(R){R(_)}),this._dependenciesRemaining=0,this._handleDependencyInitializing=a(T,this),this._handleDependencyReady=a(P,this),this.bus.on(i.events.ASYNC_DEPENDENCY_INITIALIZING,this._handleDependencyInitializing),this.bus.on(i.events.ASYNC_DEPENDENCY_READY,this._handleDependencyReady)},v.prototype._onIntegrationReady=function(){var _={teardown:a(function(I){var R,U="Cannot call teardown while in progress";I=I||C;function D(){throw new Error(U)}for(R in _)_.hasOwnProperty(R)&&(_[R]=D);this.destructor.teardown(a(function(){U="Cannot teardown integration more than once",this.bus.teardown(),I()},this))},this)};this.isReady=!0,this.onReady(_)},n.exports=v}).call(this,typeof G!="undefined"?G:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../constants":440,"../lib/fallback-error-handler":447,"../lib/lookup-callback-for":449,"../lib/node-type":450,"../lib/sanitize-payload":451,"braintree-api":21,"braintree-bus":52,"braintree-utilities":372,destructor:373,"lodash.clonedeep":418}],442:[function(t,n,e){var c=t("lodash.clonedeep"),s=t("lodash.create"),r=t("braintree-api"),i=t("braintree-utilities").bind,o=t("braintree-coinbase"),a=t("braintree-bus"),p=t("./base-integration");function m(){var h,y;p.apply(this,arguments),h=c(this.configuration.merchantConfiguration),this._attachBusEvents(),h.channel=this.configuration.channel,h.configuration=c(this.configuration.gatewayConfiguration),h.coinbase=c(h.coinbase||{}),h.apiClient=new r.Client({enableCORS:this.configuration.merchantConfiguration.enableCORS||!1,clientToken:this.configuration.gatewayConfiguration,integration:"coinbase"}),y=o.create(h),this.destructor.registerFunctionForTeardown(function(g){y.teardown(g)}),this.bus.emit(a.events.ASYNC_DEPENDENCY_READY)}m.prototype=s(p.prototype,{constructor:m}),m.prototype._attachBusEvents=function(){this.bus.on(a.events.PAYMENT_METHOD_GENERATED,i(this._onPaymentMethodGenerated,this))},m.prototype._onPaymentMethodGenerated=function(h){this.bus.emit(a.events.PAYMENT_METHOD_RECEIVED,h)},n.exports=m},{"./base-integration":441,"braintree-api":21,"braintree-bus":52,"braintree-coinbase":56,"braintree-utilities":372,"lodash.clonedeep":418,"lodash.create":430}],443:[function(t,n,e){var c=t("lodash.clonedeep"),s=t("lodash.create"),r=t("braintree-form"),i=t("braintree-paypal"),o=t("braintree-coinbase"),a=t("braintree-utilities"),p=t("hosted-fields"),m=t("form-napper"),h=t("../constants"),y=t("braintree-bus"),g=t("../compatibility").convertToLegacyShippingAddress,S=t("./base-integration"),x=t("../lib/node-type"),C=x.isJQueryElement,T=x.isHTMLElement,P=t("../lib/hosted-fields-nonce-manager");function v(){S.apply(this,arguments),this.configuration.merchantConfiguration.hostedFields!=null?this._setupHostedFields():this._setupForm(),this._setupPayPal(),this._setupCoinbase(),this.bus.emit(y.events.ASYNC_DEPENDENCY_READY)}v.prototype=s(S.prototype,{constructor:v}),v.prototype._setupHostedFields=function(){var I,R=this.configuration.merchantConfiguration,U=R[h.ROOT_SUCCESS_CALLBACK],D=new m(R.id),b=p.create(this.configuration),A=new P({formNapper:D,rootCallback:U,channel:this.configuration.channel});if(D.htmlForm==null){this.bus.emit(y.events.ERROR,{type:"CONFIGURATION",message:"options.id does not reference a valid DOM element"});return}I=a.bind(A.handleSubmitRequest,A),D.hijack(I),this.bus.on(y.events.USER_FORM_SUBMIT_REQUEST,I),this.destructor.registerFunctionForTeardown(a.bind(function(L){A.teardown(),D.detach(),b.teardown(L)},this))},v.prototype._setupForm=function(){var I=this.configuration.merchantConfiguration,R,U,D;I.id?(D=r.setup(this.apiClient,this.configuration),R=!a.isFunction(I[h.ROOT_SUCCESS_CALLBACK]),R||(U=this.onSuccess,D.onNonceReceived=a.bind(function(b,A){b?this.bus.emit(y.events.ERROR,b):U(A)},this)),this.destructor.registerFunctionForTeardown(function(){D.teardown()})):this.bus.on(y.events.PAYMENT_METHOD_GENERATED,a.bind(function(b){this.bus.emit(y.events.PAYMENT_METHOD_RECEIVED,b)},this))},v.prototype._setupPayPal=function(){var I,R,U,D,b,A,L=this.configuration.merchantConfiguration;!L.paypal||(A=c(L.paypal,function(k){if(C(k))return k[0];if(T(k))return k}),I=_(L,"paypal"),R=I("onSuccess"),U=I("onCancelled"),A.paymentMethodNonceInputField||(D=document.createElement("input"),D.id="braintree-custom-integration-dummy-input",A.paymentMethodNonceInputField=D),A.onSuccess=function(k){R(k.nonce,k.details.email,g(k.details.shippingAddress))},A.onCancelled=a.bind(function(){this.bus.emit(y.events.PAYMENT_METHOD_CANCELLED),U()},this),L.enableCORS&&(A.enableCORS=!0),b=i.create(this.configuration.gatewayConfiguration,A,this.configuration.channel),b!=null&&this.destructor.registerFunctionForTeardown(function(){b.teardown()}))},v.prototype._setupCoinbase=function(){var I,R;!this.configuration.merchantConfiguration.coinbase||navigator.userAgent.match(/MSIE 8\.0/)||(I=c(this.configuration.merchantConfiguration),I.channel=this.configuration.channel,I.configuration=this.configuration.gatewayConfiguration,I.apiClient=this.apiClient,delete I.paypal,R=o.create(I),this.destructor.registerFunctionForTeardown(function(U){R.teardown(U)}))};function _(I,R){return function(U){return R in I&&a.isFunction(I[R][U])?I[R][U]:function(){}}}n.exports=v},{"../compatibility":439,"../constants":440,"../lib/hosted-fields-nonce-manager":448,"../lib/node-type":450,"./base-integration":441,"braintree-bus":52,"braintree-coinbase":56,"braintree-form":245,"braintree-paypal":344,"braintree-utilities":372,"form-napper":376,"hosted-fields":377,"lodash.clonedeep":418,"lodash.create":430}],444:[function(t,n,e){var c=t("lodash.create"),s=t("braintree-dropin"),r=t("braintree-utilities"),i=t("braintree-bus"),o=t("../constants"),a=t("../lib/sanitize-payload"),p=t("./base-integration");function m(g){return r.isFunction(g.paymentMethodNonceReceived)?g.paymentMethodNonceReceived:null}function h(g){return r.isFunction(g[o.ROOT_SUCCESS_CALLBACK])}function y(){var g,S,x,C;p.apply(this,arguments),g=this.configuration.merchantConfiguration,S=m(g),x=h(g),(S||x)&&(g.paymentMethodNonceReceived=r.bind(function(T){S&&S(T.originalEvent,T.nonce),this.bus.emit(i.events.PAYMENT_METHOD_RECEIVED,a(T))},this)),C=s.create(this.configuration),this.destructor.registerFunctionForTeardown(function(T){C.teardown(T)}),this.bus.emit(i.events.ASYNC_DEPENDENCY_READY)}y.prototype=c(p.prototype,{constructor:y}),n.exports=y},{"../constants":440,"../lib/sanitize-payload":451,"./base-integration":441,"braintree-bus":52,"braintree-dropin":236,"braintree-utilities":372,"lodash.create":430}],445:[function(t,n,e){n.exports={custom:t("./custom"),dropin:t("./dropin"),paypal:t("./paypal"),coinbase:t("./coinbase")}},{"./coinbase":442,"./custom":443,"./dropin":444,"./paypal":446}],446:[function(t,n,e){var c=t("lodash.create"),s=t("braintree-paypal"),r=t("braintree-utilities"),i=t("../constants"),o=t("braintree-bus"),a=t("../compatibility").convertToLegacyShippingAddress,p=t("./base-integration");function m(g){return"onSuccess"in g&&r.isFunction(g.onSuccess)?g.onSuccess:"paypal"in g&&r.isFunction(g.paypal.onSuccess)?g.paypal.onSuccess:null}function h(g){return r.isFunction(g[i.ROOT_SUCCESS_CALLBACK])}function y(){var g,S,x,C;p.apply(this,arguments),g=this.configuration.merchantConfiguration,S=m(g),x=h(g),(S||x)&&(g.onSuccess=r.bind(function(T){S&&S(T.nonce,T.details.email,a(T.details.shippingAddress)),this.bus.emit(o.events.PAYMENT_METHOD_RECEIVED,T)},this)),C=s.create(this.configuration.gatewayConfiguration,g,this.configuration.channel),this.destructor.registerFunctionForTeardown(function(){C.teardown()}),this.bus.emit(o.events.ASYNC_DEPENDENCY_READY)}y.prototype=c(p.prototype,{constructor:y}),n.exports=y},{"../compatibility":439,"../constants":440,"./base-integration":441,"braintree-bus":52,"braintree-paypal":344,"braintree-utilities":372,"lodash.create":430}],447:[function(t,n,e){n.exports=function(s){if(s.type==="CONFIGURATION"||s.type==="IMMEDIATE")throw new Error(s.message);try{console.error(JSON.stringify(s))}catch(r){}}},{}],448:[function(t,n,e){var c=t("braintree-bus"),s=t("hosted-fields"),r="web.custom.hosted-fields.via.",i="payment_method_nonce";function o(a){this.paymentMethod=null,this.nonceInputElement=null,this.bus=new c({channel:a.channel}),this.formNapper=a.formNapper,this.rootCallback=a.rootCallback,this._attachEvents()}o.prototype._clearNonce=function(){this.paymentMethod=null,this.nonceInputElement=this.formNapper.inject(i,"")},o.prototype._attachEvents=function(){var a=this;this.bus.on(c.events.PAYMENT_METHOD_CANCELLED,function(){a._clearNonce()}),this.bus.on(c.events.PAYMENT_METHOD_GENERATED,function(p){a.paymentMethod=p,a.nonceInputElement=a.formNapper.inject(i,a.paymentMethod.nonce)})},o.prototype.handleSubmitRequest=function(){var a=this;this.bus.emit(s.events.TOKENIZATION_REQUEST,function(p){var m=p[0],h=p[1];if(m){a.bus.emit(c.events.ERROR,m);return}if(a.paymentMethod=h||a.paymentMethod,a.paymentMethod==null){a.bus.emit(s.events.VALIDATE_STRICT),a.bus.emit(c.events.ERROR,{type:"VALIDATION",message:"User did not enter a payment method"});return}a.rootCallback?a.bus.emit(c.events.SEND_ANALYTICS_EVENTS,r+"callback.success",function(){a.rootCallback(a.paymentMethod)}):a.bus.emit(c.events.SEND_ANALYTICS_EVENTS,r+"formsubmit.success",function(){a.nonceInputElement=a.formNapper.inject(i,a.paymentMethod.nonce),a.formNapper.submit()})})},o.prototype.teardown=function(){this._clearNonce()},n.exports=o},{"braintree-bus":52,"hosted-fields":377}],449:[function(t,n,e){var c=t("braintree-utilities").isFunction;function s(){}n.exports=function(i){return function(o,a){return c(i[o])?i[o]:c(a)?a:s}}},{"braintree-utilities":372}],450:[function(t,n,e){function c(r){return typeof r=="object"&&"jquery"in r&&r.length!==0}function s(r){return r&&r.nodeType===1}n.exports={isJQueryElement:c,isHTMLElement:s}},{}],451:[function(t,n,e){n.exports=function(s){return{nonce:s.nonce,details:s.details,type:s.type}}},{}]},{},[1])(1)})});ee("submit",".js-braintree-encrypt",function({currentTarget:w}){const N=w.getAttribute("data-braintree-key");if(!N)throw new Error("Missing `data-braintree-key` attribute on element");window.Braintree.create(N).encryptForm(w)});var kt=Object.defineProperty,Ve=(w,N)=>kt(w,"name",{value:N,configurable:!0});ee("submit",".js-find-coupon-form",function(w){const N=w.target;if(!(N instanceof HTMLFormElement))return;const t=N.action,n=document.querySelector("#code");window.location.href=`${t}/${encodeURIComponent(n.value)}`,w.preventDefault()}),ee("click",".js-choose-account",function(w){for(const n of document.querySelectorAll(".js-plan-row, .js-choose-plan"))n.classList.remove("selected");const N=document.querySelector(".js-plan");N.value="";for(const n of document.querySelectorAll(".js-billing-section"))n.classList.add("has-removed-contents");const t=w.currentTarget.closest(".js-account-row");t&&Ge(t)}),ee("click",".js-choose-plan",function(w){if(!(w.target instanceof Element))return;const N=w.target.closest(".js-plan-row");Oe(N)}),se(".js-choose-plan-radio:checked",{add(w){Oe(w.closest(".js-plan-row"))}}),se(".js-plan-row.selected",{add:Ye}),se(".js-choose-account.selected",{add:Ye});function Ye(w){const N=w.closest("form");if(!N)return;const t=N.querySelector(".js-redeem-button");t instanceof HTMLButtonElement&&(t.disabled=w.classList.contains("free-plan"))}Ve(Ye,"enableNextButton");function Ge(w){const N=w.getAttribute("data-login"),t=w.getAttribute("data-plan");if(!N||!t)return;for(const o of document.querySelectorAll(".js-account-row, .js-choose-account"))o.classList.remove("selected");w.classList.add("selected");const n=w.querySelector(".js-choose-account");n&&n.classList.add("selected");const e=document.querySelector(".js-account");e&&(e.value=N);const c=document.querySelector(".js-plan-section");c&&c.classList.remove("d-none");for(const o of document.querySelectorAll(".js-billing-plans"))o.classList.add("d-none");const s=document.querySelector(`.js-billing-plans[data-login='${N}']`);if(!s)return;s.classList.remove("d-none");const r=s.querySelectorAll(".js-plan-row"),i=r.length===1?r[0]:s.querySelector(`[data-name='${t}']`);i instanceof Element&&Oe(i)}Ve(Ge,"selectAccount");function Oe(w){const N=w.getAttribute("data-name"),t=w.closest(".js-billing-plans");if(!t)return;const n=t.getAttribute("data-login");if(!n)return;const e=t.getAttribute("data-has-billing")==="true",c=parseInt(w.getAttribute("data-cost")||"",10);for(const o of document.querySelectorAll(".js-plan-row, .js-choose-plan"))o.classList.remove("selected");w.classList.add("selected");const s=w.querySelector(".js-choose-plan");s&&s.classList.add("selected");const r=w.querySelector(".js-choose-plan-radio");r instanceof HTMLInputElement&&(r.checked=!0);const i=document.querySelector(".js-plan");if(i&&(i.value=N||""),c===0||e){const o=document.querySelector(".js-billing-section");o&&o.classList.add("has-removed-contents")}else if(n){const o=document.querySelector(`.js-billing-section[data-login='${n}']`);o&&o.classList.remove("has-removed-contents")}}Ve(Oe,"selectPlan"),async function(){await He;const w=document.querySelector(".js-account-row.selected");w&&Ge(w);const N=document.querySelector(".js-plan-row.selected");N instanceof Element&&Oe(N)}();var Ft=Object.defineProperty,Ut=(w,N)=>Ft(w,"name",{value:N,configurable:!0});ee("click",".js-enter-new-card",function(w){const N=w.currentTarget.closest(".js-zuora-existing-card"),t=document.querySelector(".js-billing-section"),n=document.querySelector(".js-enter-new-card");N.classList.add("d-none"),t.hidden=!1;const e=t.querySelector("iframe");e.setAttribute("width","100%");const c=n.getAttribute("data-sdn-data-collection")==="true"?"237":"677";e.setAttribute("height",c)}),ee("click",".js-edit-card-details",function(w){const N=document.getElementById("zuora_payment"),t=w.currentTarget.closest(".js-zuora-billing-info"),n=document.querySelector(".js-billing-section");N.classList.toggle("d-none"),t.classList.toggle("d-none"),n.classList.remove("PaymentMethod--creditcard-added"),n.classList.add("PaymentMethod--creditcard")});const qt={Australia:"AU00 000 000 000",Austria:"ATU000000000",Belgium:"BE0000000000",Bulgaria:"BG000000000",Croatia:"HR00000000000",Cyprus:"CY000000000X","Czech Republic":"CZ00000000...",Denmark:"DK00 00 00 00",Estonia:"EE000000000",Finland:"FI00000000",France:"FRXX 000000000",Germany:"DE000000000",Greece:"EL000000000",Hungary:"HU00000000",Iceland:"IS...",India:"IN00000000000",Ireland:"IE0000000XA",Italy:"IT00000000000",Japan:"000000000000",Latvia:"LV00000000000",Lithuania:"LT000000000...",Luxembourg:"LU00000000",Malta:"MT00000000",Netherlands:"NL000000000B00","New Zealand":"NZ0000000000000",Norway:"NO000000000MVA",Poland:"PL0000000000",Portugal:"PT000000000",Romania:"RO0000000000",Russia:"RU0000000000",Slovakia:"SK0000000000",Slovenia:"SI00000000",Spain:"ES...",Sweden:"SE000000000000",Switzerland:"CHE000000000TVA",Taiwan:"00000000","United Kingdom":"GB000000000"},jt=["Angola","Antigua and Barbuda","Aruba","Bahamas","Belize","Benin","Botswana","Cameroon","Comoros","Congo (Brazzaville)","Congo (Kinshasa)","Cook Islands","C\xF4te d'Ivoire","Djibouti","Dominica","Fiji","French Southern Lands","Ghana","Guyana","Hong Kong","Ireland","Kiribati","Korea, North","Malawi","Maritania","Mauritius","Montserrat","Nauru","Niue","Qatar","Saint Kitts and Nevis","Saint Lucia","Sao Tome and Principe","Seychelles","Sierra Leone","Sint Maarten (Dutch part)","Solomon Islands","Somalia","Suriname","Syria","Togo","Tokelau","Tonga","United Arab Emirates","Vanuatu","Yemen","Zimbabwe"],We="United States of America",ht="Canada";function $e(w){let N;const t=w.options[w.selectedIndex];t&&(N=t.textContent);const n=N?qt[N]:null,e=w.closest(".js-setup-creditcard");e.classList.toggle("is-vat-country",n!=null);const c=e.querySelector(".js-vat-help-text");c.textContent=n?`(${n})`:"";const s=e.querySelector(".js-select-state");if(e.classList.toggle("is-international",N!==We&&N!==ht),s.required=N===We,N!==We&&(s.value=""),N===ht){const o=e.querySelector(".js-select-province"),a=e.querySelector(".js-region-label");a.textContent="Province",o.disabled=!1,o.required=!0,s.classList.add("d-none"),o.classList.remove("d-none")}else{const o=e.querySelector(".js-select-province"),a=e.querySelector(".js-region-label");a.textContent="State",o.disabled=!0,o.required=!1,o.value="",s.classList.remove("d-none"),o.classList.add("d-none")}const r=e.querySelector(".js-postal-code-field"),i=jt.indexOf(N||"")>=0;e.classList.toggle("no-postcodes",i),r.required=!i,i&&(r.value="")}Ut($e,"setupCountryFields"),se(".js-select-country",{constructor:HTMLSelectElement,initialize(w){$e(w),w.form&&Be(w.form,"change"),w.addEventListener("change",function(){$e(w)})}});var Bt=Object.defineProperty,zt=(w,N)=>Bt(w,"name",{value:N,configurable:!0});ee("change",".js-payment-methods .js-payment-method",Ke),ee("click",".js-payment-method-href",Ke);function Ke(w){if(!(w.currentTarget instanceof Element))return;const N=w.currentTarget.closest(".js-payment-methods"),t=w.currentTarget.getAttribute("data-selected-tab"),n=N.querySelectorAll(".js-selected-payment-method");for(const c of n)c.classList.remove("active");N.querySelector(`.${t}`).classList.add("active");const e=N.closest(".js-billing-section");if(e)if(t==="pay-with-paypal"){e.classList.add("PaymentMethod--paypal"),e.classList.remove("PaymentMethod--creditcard"),e.classList.remove("PaymentMethod--creditcard-added");const c=document.querySelector(".js-zuora-billing-info"),s=document.querySelector(".js-zuora-payment-page");c.classList.add("d-none"),s.classList.remove("d-none")}else t==="pay-by-credit-card"&&(e.classList.remove("PaymentMethod--paypal"),e.classList.add("PaymentMethod--creditcard"))}zt(Ke,"handlePaymentMethodChange"),se(".js-selected-payment-method:not(.active)",{add(w){w.classList.add("has-removed-contents")},remove(w){w.classList.remove("has-removed-contents")}}),se(".js-billing-payment-methods",function(w){w.classList.remove("disabled")});var Ht=Object.defineProperty,Me=(w,N)=>Ht(w,"name",{value:N,configurable:!0});const mt=["paypal-loading","paypal-logged-in","paypal-logged-out","paypal-down"];function gt(w,N,t){const{onSuccess:n}=t;return new Promise(e=>re.setup(w,N,Object.assign({},t,{onSuccess:()=>{n(),e()}})))}Me(gt,"braintreeSetup");function Te(w,N){w.classList.remove(...mt),mt.indexOf(N)>=0&&w.classList.add(N)}Me(Te,"setPaypalState");async function yt(w){const N=w.getAttribute("data-token");if(N)return N;const t=await fetch("/account/billing/client_token",{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!t.ok)throw new Error("Response is not OK");return await t.text()}Me(yt,"getClientToken");async function Qe(w){const N=w.closest(".js-payment-methods");if(!N.classList.contains("paypal-loading")&&!N.classList.contains("paypal-logged-in")){w.innerHTML="",Te(N,"paypal-loading");try{const t=await yt(N);N.hasAttribute("data-token")||N.setAttribute("data-token",t);const n=w.getAttribute("data-nonce-field"),e=N.querySelector(n);await gt(t,"paypal",{container:w,displayName:"GitHub",paymentMethodNonceInputField:e,enableCORS:!0,onSuccess(){Te(N,"paypal-logged-in");const r=document.querySelector(".js-awaiting-payment");r&&r.getAttribute("data-toggle-plan-upgrade-visibility")==="true"&&r.toggleAttribute("hidden")},onReady(){Te(N,"paypal-logged-out")}});const c=document.querySelector("#bt-pp-cancel");c.setAttribute("type","button");const s=document.querySelector(".js-paypal-cancel-icon").cloneNode(!0);s instanceof Element&&s.classList.remove("d-none"),c.appendChild(s)}catch(t){throw Te(N,"paypal-down"),t}}}Me(Qe,"setupBraintreePaypal"),ee("click","#bt-pp-cancel",function(w){const N=w.currentTarget.closest(".js-payment-methods");Te(N,"paypal-logged-out");const t=w.currentTarget.closest(".js-paypal-container");Qe(t)}),se(".js-paypal-container",{add(w){w.closest(".active")!=null&&Qe(w)}}),se("input.js-plan-choice:checked",{constructor:HTMLInputElement,add(w){const N=w.value==="free";for(const s of document.querySelectorAll(".js-plan-choice-label"))s.classList.toggle("open",s===w);const t=w.closest(".js-plan-choice-label");if(t){const s=t.querySelector(".js-addon-purchase-field");s instanceof HTMLInputElement&&dt(s),w.checked&&t.classList.add("open")}const n=w.classList.contains("js-data-ghe-cloud-trial")&&w.value==="business_plus",e=N||n;for(const s of document.querySelectorAll(".js-billing-section"))s.classList.toggle("has-removed-contents",e);if(N){const s=document.querySelector(".js-contact-us");s!=null&&s.classList.add("d-none");const r=document.querySelector(".js-purchase-button");r!=null&&r.removeAttribute("disabled")}if((document.querySelector("input.js-enterprise-choice[value=server]:checked")&&w.value==="business_plus")===!0){const s=document.querySelector(".SignUpContinueActions");s!=null&&s.classList.add("has-removed-contents")}}}),ee("change","input.js-duration-change",function({currentTarget:w}){const N=document.querySelector(".js-upgrade-plan-change:checked"),t=document.querySelector("#js-pjax-container");let n=`?plan_duration=${w.value}`;document.querySelector(".js-transform-user")&&(n=`${n}&transform_user=1`),N instanceof HTMLInputElement?xe({url:`${n}&new_plan=${N.value}`,container:t}):xe({url:n,container:t})}),ee("change","input.js-upgrade-plan-change",function({currentTarget:w}){const N=document.querySelector("#js-pjax-container");let t=`?new_plan=${w.value}`;document.querySelector(".js-transform-user")&&(t=`${t}&transform_user=1`),xe({url:t,container:N})}),ee("change","input.js-org-duration-change",function({currentTarget:w}){const N=document.querySelector("#js-pjax-container"),t=new URL(document.location.href,window.location.origin).searchParams;if(document.querySelectorAll(".js-experiment-seats").length>0){const n=document.querySelector("#seats");t.set("plan_duration",w.value),t.set("memberships",n.value)}else{const n=document.querySelector(".js-upgrade-org-plan-change:checked"),e=document.querySelector(".js-account-name");t.set("plan",n.value),t.set("plan_duration",w.value),t.set("org",e.value)}w.hasAttribute("data-show-team-as-link")&&t.set("source","trial_upgrade"),xe({url:`?${t.toString()}`,container:N})}),ee("change","input.js-upgrade-org-plan-change",function({currentTarget:w}){const N=document.querySelector(".js-account-name"),t=document.querySelector("#js-pjax-container"),n=new URL(document.location.href,window.location.origin).searchParams;n.set("plan",w.value),n.set("org",N.value),xe({url:`?${n.toString()}`,container:t})});var Vt=Object.defineProperty,Yt=(w,N)=>Vt(w,"name",{value:N,configurable:!0});let Ze=null,Xe="month";async function Ee(w){var N;const t=w.value,n=new URL(w.getAttribute("data-url"),window.location.origin),e=new URLSearchParams(n.search.slice(1));e.append("seats",t),document.querySelectorAll(".js-experiment-seats").length>0&&(Xe=((N=document.querySelector(".js-org-duration-change:checked"))==null?void 0:N.value)||"month",e.append("experiment","true"),e.append("plan_duration",Xe)),n.search=e.toString(),Ze==null||Ze.abort();const{signal:c}=Ze=new AbortController;let s=null;try{const i=await fetch(n.toString(),{signal:c,headers:{Accept:"application/json"}});if(!i.ok)return;s=await i.json()}catch(i){}if(c.aborted||!s)return;const r=s.selectors;for(const i in r)for(const o of document.querySelectorAll(i))o.innerHTML=r[i]}Yt(Ee,"updateTotals"),se(".js-trial-upgrade-seats",{constructor:HTMLInputElement,add(w){Ee(w),pt(w,function(){Ee(w)})}});let me=1;(async function(){await He;const w=document.getElementById("seats"),N=document.getElementById("plan_duration_month");N&&(Xe=N.checked?"month":"year"),w&&(me=Number(w.getAttribute("data-minimum")),Number(w.value)<me&&(w.value=me.toString()),Ee(w))})(),ee("click","#increase-seats-number",function(){const w=document.getElementById("seats");if(!w)return;const N=Number(w.value)+1;w.value=N.toString(),document.querySelector(".js-minimum-seats").hidden=N>=me,Ee(w)}),ee("click","#decrease-seats-number",function(){const w=document.getElementById("seats");if(!w)return;const N=Number(w.value)-1;w.value=N>=me?N.toString():me.toString(),document.querySelector(".js-minimum-seats").hidden=N>=me,Ee(w)});const Gt=ze(w=>{const N=w.target;if(!N)return;const t=Number(N.value);(!t||t<me)&&(N.value=me.toString(),document.querySelector(".js-minimum-seats").hidden=!1),Ee(N)},200);se("#seats",w=>{w.addEventListener("keyup",Gt)});var bt=je(function(w,N){(function(t,n){n(N)})(self,function(t){var n="z_hppm_iframe",e=!1,c=function(){var o="zlog_level",a="error",p="warn",m="info",h="debug",y=p,g=[a,p,m,h];function S(P){var v;for(v=0;v<g.length;v++)if(g[v]===P)return v;return-1}function x(){var P=document.location.href,v=P.indexOf("?");if(v<0)return y;var _=P.indexOf("#");_<0&&(_=P.length);var I=P.slice(v+1,_);if(!I)return y;var R=I.split("&"),U;for(U=0;U<R.length;U++){var D=R[U].split("="),b=D[0],A=D[1];if(b===o&&S(A)>=0)return A}return p}function C(){return S(x())>=S(h)}function T(){return S(x())>=S(m)}return{getLevel:function(){return x()},debug:function(P){console&&console.log&&C()&&console.log(P)},info:function(P){console&&console.info&&T()&&console.info(P)},warn:function(P){console&&console.warn&&console.warn(P)},error:function(P){console&&console.error&&console.error(P)}}}(),s=function(){var o,a,p=1,m;return{postMessage:function(h,y,g){c.debug("Posting message[O]: target_url="+y+", payload="+h),!!y&&(g=g||parent,window.postMessage?g.postMessage(h,y.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):y&&(g.location=y.replace(/#.*$/,"")+"#"+ +new Date+p+++"&"+h))},receiveMessage:function(h){window.postMessage?(h&&(m=function(y){function g(C){var T=/^https:\/\/([a-z0-9]+(-[a-z0-9]+)*\.)*zuora\.com$/;return!!T.test(C.toLowerCase())}var S=/^https?:\/\/localhost(:\d{4,5})?$/;function x(C){return S.test(C)}if(c.debug("Received message[O]: origin="+y.origin),typeof y.origin=="string"&&!(g(y.origin)||x(y.origin)))return c.info("Stopped processing none-zuora message."),!1;h(y)}),window.addEventListener?window[h?"addEventListener":"removeEventListener"]("message",m,!1):window[h?"attachEvent":"detachEvent"]("onmessage",m)):(o&&clearInterval(o),o=null,h&&(o=setInterval(function(){var y=document.location.hash,g=/^#?\d+&/;y!==a&&g.test(y)&&(a=y,h({data:y.replace(g,"")}))},100)))}}}(),r=function(){var o="#z-overlay {filter: alpha(opacity=50);opacity:0.5;display:inline-block;position:fixed;top:0;left:0;width:100%;height:100%;background-color: #000;z-index: 1001;}",a="#z-container {border:1px;float:left; overflow: visible; position: absolute;padding: 0px; display: inline-block; top:5%; left:34%; margin: 0 auto;-webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius:5px;background-color: #FAFAFA; border:1px solid #FAFAFA;border-top-color:#EDEDED;behavior: url(js/PIE.htc);z-index: 1002;}",p="#z-data {height: 100%; outline: 0px; width: 100%; overflow: visible;display: inline-block;border:1px; -webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius:5px;}",m="#reset{*, *:before, *:after {display: inline-block;-webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box;}}",h="#z_hppm_iframe {background-color: #FAFAFA;vertical-align:bottom;z-index:9999;display:block;padding:0px;margin: 0px; border:0px solid #DDD;}",y,g,S,x,C,T=["tenantId","id","token","signature","key","style","submitEnabled","url"],P=["creditCardNumber","cardSecurityCode","creditCardExpirationYear","creditCardExpirationMonth","bankAccountNumber","bankAccountName","ipAddress"],v={},_=null,I=null;function R(b){return b&&typeof b=="function"}function U(b){var A={};for(var L in b)b.hasOwnProperty(L)&&(A[L]=b[L]);return A}s.receiveMessage(function(b){try{var A=b.data;c.debug("Received message[O]: payload="+A),A=JSON.parse(A),A.success?R(v.init)&&v.init(A):A.success==!1?(r.deactivateOverlay("z-overlay"),r.deactivateOverlay("z-container"),v.init&&v.init(A)):A.action=="close"?(r.deactivateOverlay("z-overlay"),r.deactivateOverlay("z-container")):A.action=="resize"?r.receive(A):A.action=="allowScroll"&&r.allowScroll(A),A.action==="validate"&&R(v.validate)?v.validate(A):A.action=="customizeErrorMessage"&&R(v.customizeErrorMessage)?v.customizeErrorMessage(A.key,A.code,A.message):A.action&&R(v[A.action])&&v[A.action](A)}catch(L){return}});var D;return{validateRequiredParams:function(b){var A,L=T.length;for(A=0;A<L;A++)if(!b.hasOwnProperty(T[A])){if(T[A]=="submitEnabled"&&b.style.toLowerCase()=="overlay")continue;var k="Param with key ["+T[A]+"] is required.";return alert(k),r.isIE()||console.log(k),!1}return!0},isIE:function(){var b=window.navigator.userAgent,A=b.indexOf("MSIE "),L=b.indexOf("Trident/");return A>0?!0:L>0?(b.indexOf("rv:"),!0):!1},validatePCIParams:function(b){var A,L=P.length;for(A=0;A<L;A++){var k="field_"+P[A];if(b.hasOwnProperty(k)&&0<b[k].trim().length&&b[k].trim().length<300){var H="Field ["+k+"] for Credit Card payment method type should be encrypted for pre-population";return alert(H),r.isIE()||console.log(H),!1}}return!0},init:function(b,A){S="?method=requestPage&host="+encodeURIComponent(document.location.href)+"&",S=S+"fromHostedPage=true&";var L=r.validateRequiredParams(b);if(!L||(L=r.validatePCIParams(b),!L))return!1;var k=JSON.stringify(b,function(ae,le){if(ae!="")if(ae=="key")C=le;else if(ae=="url"){var Z=/^https:\/\/([a-z0-9]+(-[a-z0-9]+)*\.)+zuora\.com\/.+$/;c.info("HPM integration[O]: url="+le),Z.test(le)||c.warn("HPM integration[O]: None-official zuora HPM integration url is detected: "+le),y=le}else S=S+ae+"="+encodeURIComponent(le)+"&";return le});D=JSON.parse(k),v.init=A;var H=P.length;if(b)for(var X=0;X<H;X++){var ne="field_"+P[X];b.hasOwnProperty(ne)&&(b[ne]="")}return!0},prepopulate:function(b){if(!e){var A=r.createIframeURL();if(A==document.getElementById(n).src||document.getElementById(n).src.indexOf(A)>=0&&D.hasOwnProperty("customizeErrorRequired")&&D.customizeErrorRequired=="true"){JSON.stringify(b,function(k,H){if(k!=""){var X="setField("+k+":"+H+")";r.post(n,X)}return H});var L="setField(key:"+C+")";r.post(n,L),r.post(n,"setField(style:"+D.style+")"),D.hasOwnProperty("customizeErrorRequired")&&D.customizeErrorRequired=="true"&&(r.post(n,"customizeErrorRequired"),D.customizeErrorRequired="false"),r.post(n,"resize"),g&&g()}g&&(g=null)}},contains:function(b,A){for(var L=0;L<b.length;L++)if(b[L]===A)return!0;return!1},renderWithErrorHandler:function(b,A,L,k,H,X){b.customizeErrorRequired="true",r.render(b,A,L,H,X),r.customizeErrorHandler(k)},runAfterRender:function(b){g=b},render:function(b,A,L,k,H){k!=null&&k!=null&&(_=k),H!=null&&H!=null&&(I=H);var X=P.length;if(e=!1,A&&A.creditCardCountry&&(A.creditCardCountry==="USA"||A.creditCardCountry==="CAN")&&(A.creditCardState=A.creditCardState||" "),A)for(var ne=0;ne<X;ne++){var ae="field_"+P[ne];A.hasOwnProperty(P[ne])&&(b[ae]=A[P[ne]])}var le=r.init(b,L);if(!!le){if(A)for(X=Object.keys(A).length,x=U(A),ne=0;ne<X;ne++){var Z=Object.keys(A)[ne];r.contains(P,Z)&&delete x[Z]}else x=null;var ce=document.getElementById("zuora_payment");if(typeof ce=="undefined"||!ce)return{error:"invalid_request",error_description:"The container you specified does not exist"};if(ce.innerHTML="",r.cleanUp(ce,"z-overlay"),r.cleanUp(ce,"z-container"),D.style=="inline"){r.addInlineStyles(),r.createIframe(ce);return}if(D.style=="overlay"){r.addOverlayStyles();var Re=r.generateDiv("z-overlay","z-overlay");ce.appendChild(Re);var Ie=r.generateDiv("z-container","z-container");ce.appendChild(Ie);var Pe=r.generateDiv("z-data","z-data");Pe.tabindex="-1",Ie.appendChild(Pe),r.createIframe(document.getElementById("z-data")),r.activateOverlay("z-overlay")}}},cleanUp:function(b,A){var L=document.getElementById(A);L!=null&&b.removeChild(L)},activateOverlay:function(b){try{document.getElementById(b).style.display="inline"}catch(A){}},deactivateOverlay:function(b){try{document.getElementById(b).style.display="none"}catch(A){}},generateDiv:function(b,A,L){var k=document.createElement("div");return k.id=b,k.className=A,k.border="0",k.addEventListener?k.addEventListener("click",L,!1):k.attachEvent("click",L),k},addOverlayStyles:function(){var b=document.createElement("style");b.type="text/css";var A=document.createTextNode(o),L=document.createTextNode(a),k=document.createTextNode(p),H=document.createTextNode(h),X=document.createTextNode(m);b.styleSheet?b.styleSheet.cssText=A.nodeValue+" "+L.nodeValue+" "+k.nodeValue+" "+X.nodeValue+" "+H.nodeValue:(b.appendChild(A),b.appendChild(L),b.appendChild(k),b.appendChild(H),b.appendChild(X)),document.getElementsByTagName("head")[0].appendChild(b)},addInlineStyles:function(){var b=document.createElement("style");b.type="text/css";var A=document.createTextNode(h);b.styleSheet?b.styleSheet.cssText=A.nodeValue:b.appendChild(A),document.getElementsByTagName("head")[0].appendChild(b)},createIframe:function(b,A){var L=r.createIframeURL(),k=document.createElement("iframe");k.setAttribute("src",L),k.setAttribute("id",n),k.setAttribute("overflow","visible"),k.setAttribute("scrolling","no"),k.setAttribute("frameBorder","0"),k.setAttribute("allowtransparency","true"),k.setAttribute("class","z_hppm_iframe"),k.setAttribute("width","100%"),k.setAttribute("height","100%"),k.addEventListener?k.addEventListener("load",function(H){return r.prepopulate(x),!1},!1):k.attachEvent("onload",function(){return r.prepopulate(x),!1}),typeof A!="undefined"&&typeof A.vertical!="undefined"&&A.vertical&&(k.style.width="100%",k.style.height="100%"),b.appendChild(k)},createIframeURL:function(){var b=y;return b.concat(S).concat("zlog_level="+c.getLevel())},post:function(b,A){var L=document.getElementById(b),k=encodeURIComponent(document.location.href),H=L.src;return H.indexOf(k)<=-1&&(L.src=H+"#"+k),s.postMessage(A,H,L.contentWindow),!1},allowScroll:function(b){{var A=document.getElementById(n);A&&(A.setAttribute("scrolling","yes"),e=!0)}},receive:function(b){i.resizeCaller(n,b.action,b.height,b.width,_,I)},validate:function(b){if(b==null||b==null){r.closeWindow();var A="Validate function required.";return alert(A),r.isIE()||console.log(A),!1}v.validate=b;var L="validate";r.post(n,L)},customizeErrorHandler:function(b){if(b==null||b==null){r.closeWindow();var A="Customized error message function required.";return alert(A),r.isIE()||console.log(A),!1}v.customizeErrorMessage=b},sendErrorMessageToHpm:function(b,A){var L={action:"customizeErrorMessage",key:b,message:A},k=JSON.stringify(L);r.post(n,k)},closeWindow:function(){r.deactivateOverlay("z-overlay"),r.deactivateOverlay("z-container")},submit:function(){var b=document.getElementById(n).src+"#"+encodeURIComponent(document.location.href);return document.getElementById(n).src=b,s.postMessage("postPage",b,document.getElementById(n).contentWindow),!0},setEventHandler:function(b,A){b&&A&&(v[b]=A)}}}(),i=function(){var o="yes";return navigator.userAgent.substring(navigator.userAgent.indexOf("Firefox")).split("/")[1],{resizeCaller:function(a,p,m,h,y,g){if(i.resizeIframe(a,p,m,h,y,g),(document.all||document.getElementById)&&o=="no"){var S=document.all?document.all[a]:document.getElementById(a);S.style.display="block"}},resizeIframe:function(a,p,m,h,y,g){var S=document.getElementById(a);if(S){if(S.style.display="block",y!=null&&y!=null)try{!isNaN(y)&&y.length>0?S.width=Number(y):S.width=Number(h)}catch(x){S.width=Number(h)}else S.width=Number(h);if(g!=null&&g!=null)try{!isNaN(g)&&g.length>0?S.height=Number(g):S.height=Number(m)}catch(x){S.height=Number(m)}else S.height=Number(m)}}}}();t.Z=r,Object.defineProperty(t,"__esModule",{value:!0})})});ct(bt);var Le=bt.Z,Wt=Object.defineProperty,ge=(w,N)=>Wt(w,"name",{value:N,configurable:!0});async function vt(w){const N=w.getAttribute("data-url"),t=w.getAttribute("data-organization-id"),n=w.getAttribute("data-signature-view-context"),e=new URLSearchParams;t&&e.append("organization_id",t),n&&e.append("view_context",n);const c=await fetch(`${N}?${e.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!c.ok){const r=w.getAttribute("data-general-signature-error-message")||"";et(r);const i=new Error,o=c.statusText?` ${c.statusText}`:"";throw i.message=`HTTP ${c.status}${o}`,i}const s=await c.json();if(w.classList.contains("js-zuora-payment-page")){if(s.error){et(s.error);return}const r=w.getAttribute("data-id");Je(w,s,{creditCardHolderName:r},Ct)}else Je(w,s,{creditCardHolderName:"GitHub Organization"},At)}ge(vt,"retrieveSignature");async function _t(w,N,t){const n=new URLSearchParams;n.append("payment_method_id",w.refId),N&&n.append("organization_id",N);const e=await fetch(`/settings/billing/payment_method?${n.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!e.ok){const c=new Error,s=e.statusText?` ${e.statusText}`:"";throw c.message=`HTTP ${e.status}${s}`,c}t(await e.json())}ge(_t,"fetchPaymentMethodDetails");function Et(w){return(N,t,n)=>{let e=n;switch(N){case"error":ft(w),e=w.getAttribute("data-processor-declined-message")||"";break}Le.sendErrorMessageToHpm(N,e)}}ge(Et,"errorMessageCallback");function wt(w,N){return t=>{if(N(t),t.success==="true"){const n=document.querySelector(".js-payment-method-form");if(n){if(!(n instanceof HTMLFormElement))return;n.submit()}else{const e=w.getAttribute("data-organization-id");_t(t,e,c=>{const s=document.querySelector(".js-zuora-billing-info"),r=s.querySelector(".js-new-card-type"),i=s.querySelector(".js-new-card-number"),o=c.masked_number.replace(/\*/g,""),a=w.closest(".js-billing-section"),p=document.querySelector(".js-awaiting-payment");r.textContent=c.card_type,i.textContent=o,w.classList.add("d-none"),s.classList.remove("d-none"),p&&p.toggleAttribute("hidden"),a.classList.remove("PaymentMethod--creditcard"),a.classList.add("PaymentMethod--creditcard-added")})}}}}ge(wt,"zuoraSuccessCallback");function Je(w,N,t,n){const e=Object.assign({},N.prepopulate,t);delete N.prepopulate,Le.renderWithErrorHandler(N,e,wt(w,n),Et(w))}ge(Je,"loadZuora");function Ct(w){if(w.success==="true"){const N=document.querySelector(".js-zuora-billing-info"),t=N.querySelector(".js-zuora-payment-method-id"),n=N.querySelector(".js-zuora-select-country"),e=N.querySelector(".js-zuora-select-region"),c=N.querySelector(".js-zuora-select-postal-code");t.value=w.refId,n.value=n.value||w.creditCardCountry,e.value=e.value||w.creditCardState,c.value=c.value||w.creditCardPostalCode}}ge(Ct,"paymentMethodPageCallback");function At(w){const N=new URLSearchParams;N.append("success",w.success),N.append("response_from",w.responseFrom),w.success?N.append("ref_id",w.refId):(N.append("error_code",w.errorCode),N.append("error_message",w.errorMessage));const t=`pay?${N.toString()}`;window.location.replace(t)}ge(At,"invoicePaymentCallback");function St(){const w=document.getElementById("z_hppm_iframe");w!=null&&(w.setAttribute("height","100%"),w.setAttribute("width","100%"),Le.post(w.id,"resize"))}ge(St,"resizeZuoraIframe");function et(w){const N=document.querySelector(".js-zuora-spinner");N&&(N.textContent=w)}ge(et,"replaceSpinnerWithMessage"),se("#zuora_payment",{constructor:HTMLElement,add(w){if(w.classList.contains("js-zuora-payment-page")){const t=document.querySelector(".js-zuora-spinner");t&&t.classList.remove("d-none"),w.style.opacity="0",Le.runAfterRender(()=>{t&&t.classList.add("d-none"),w.style.opacity="1",window.addEventListener("resize",ze(St,200))})}vt(w)}});var $t=Object.defineProperty,oe=(w,N)=>$t(w,"name",{value:N,configurable:!0});const xt="United States of America",Tt="Canada";ee("click",".js-edit-user-personal-profile",It),ee("click",".js-edit-paypal-method",Pt),ee("click",".js-enter-new-card",Nt),ee("click",".js-edit-payment-method-btn",Ot),ee("click",".js-cancel-edit-payment-method-btn",Rt),ee("click",".js-add-billing-information-btn",Mt),ee("click",".js-cancel-submit-personal-profile-btn",Lt),ee("click",".js-dismiss-flash-message",Dt);function tt(w){var N;const t=(N=w.options[w.selectedIndex])==null?void 0:N.textContent,n=w.closest(".js-name-address-collection"),e=n.querySelector(".js-select-state"),c=n.querySelector(".js-name-address-state"),s=n.querySelector(".js-name-address-select-province"),r=document.getElementsByClassName("js-region-label");t===xt?(e.required=!0,e.id="user_personal_profile_region",e.disabled=!1,e.hidden=!1):(e.disabled=!0,e.required=!1,e.value="",e.removeAttribute("id"),e.hidden=!0),t===Tt?(s.disabled=!1,s.required=!0,s.id="user_personal_profile_region",s.hidden=!1):(s.disabled=!0,s.required=!1,s.value="",s.removeAttribute("id"),s.hidden=!0),t===xt||t===Tt?(c.disabled=!0,c.value="",c.removeAttribute("id"),c.hidden=!0,r[0].classList.add("required-asterisked")):(c.disabled=!1,c.id="user_personal_profile_region",c.hidden=!1,r[0].classList.remove("required-asterisked")),nt(n).handleSaveButtonState()}oe(tt,"setupCountryFields"),se(".js-name-address-select-country",{constructor:HTMLSelectElement,initialize(w){tt(w),w.form&&Be(w.form,"change"),w.addEventListener("change",function(){tt(w)})}}),se(".js-name-address-collection",{constructor:HTMLElement,initialize(w){const N=nt(w);N.addEventListenersForNameAddressForm(),N.handleSaveButtonState()}});function nt(w){const N=document.getElementById("user_personal_profile_first_name"),t=document.getElementById("user_personal_profile_last_name"),n=document.getElementById("user_personal_profile_address1"),e=document.getElementById("user_personal_profile_city"),c=w.querySelector(".js-select-state"),s=w.querySelector(".js-name-address-state"),r=w.querySelector(".js-name-address-select-province"),i=document.getElementById("user_personal_profile_country_code");function o(){N.addEventListener("input",function(){p()}),t.addEventListener("input",function(){p()}),n.addEventListener("input",function(){p()}),e.addEventListener("input",function(){p()}),c.addEventListener("input",function(){p()}),s.addEventListener("input",function(){p()}),r.addEventListener("input",function(){p()})}oe(o,"addEventListenersForNameAddressForm");function a(){return!!(m(N)||m(t)||m(n)||m(e)||m(i)||i.value==="US"&&m(c)||i.value==="CA"&&m(r))}oe(a,"isNameAddressCollectionFormInvalid");function p(){const h=document.getElementById("submit_personal_profile");h.disabled=a()}oe(p,"handleSaveButtonState");function m(h){const y=h.value;return!y||y.trim()===""}return oe(m,"isInputEmpty"),{addEventListenersForNameAddressForm:o,isNameAddressCollectionFormInvalid:a,handleSaveButtonState:p}}oe(nt,"validateNameAddressForm");function It(w){if(!(w.currentTarget instanceof Element))return;const N=document.querySelector(".js-edit-user-personal-profile-wrapper");N.hidden=!0;const t=document.querySelector(".js-name-address-collection-wrapper");t.hidden=!1;const n=document.querySelector(".js-user-personal-profile-summary");n.hidden=!0;const e=document.querySelector(".js-awaiting-payment");e&&(e.hasAttribute("hidden")||(e.hidden=!0));const c=document.querySelector(".js-sponsors-form");c&&(c.hidden=!0);const s=document.querySelector(".js-marketplace-form-wrapper");s&&(s.hidden=!0);const r=document.querySelector(".js-sdn-screening-error-wrapper");r&&(r.hidden=!0);const i=document.querySelector(".js-payment-methods-wrapper");i&&(i.hidden=!0)}oe(It,"handleEditUserPersonalProfile");function Pt(w){if(!(w.currentTarget instanceof Element))return;const N=document.querySelector(".js-awaiting-payment");N&&(N.hidden=!0);const t=document.querySelector(".js-sponsors-form");t&&(t.hidden=!0);const n=document.querySelector(".js-marketplace-form-wrapper");n&&(n.hidden=!0);const e=document.querySelector(".js-payment-methods-radio");e.hidden=!1;const c=document.querySelector(".js-billing-pay-with");c.hidden=!1;const s=document.querySelector(".js-existing-paypal-summary");s.hidden=!0;const r=document.querySelector(".js-paypal-method-details");r.hidden=!1;const i=document.querySelector(".js-paypal-payment-method-form");i.hidden=!1}oe(Pt,"handleEditPayPalPaymentMethod");function Nt(w){if(!(w.currentTarget instanceof Element))return;const N=document.querySelector(".js-awaiting-payment");N&&(N.hidden=!0);const t=document.querySelector(".js-sponsors-form");t&&(t.hidden=!0);const n=document.querySelector(".js-marketplace-form-wrapper");n&&(n.hidden=!0);const e=document.querySelector(".js-billing-pay-with");e.hidden=!1;const c=document.querySelector(".js-payment-methods-radio");c.hidden=!1}oe(Nt,"handleEditCreditCardPaymentMethod");function Ot(w){if(!(w.currentTarget instanceof Element))return;const N=document.querySelector(".js-update-billing-information-banner");if(!document.querySelector(".js-billing-information-summary"))N.hidden=!1,rt();else{N.hidden=!0;const n=document.querySelector(".js-payment-summary-wrapper");n.hidden=!0;const e=document.querySelector(".js-payment-method-section-wrapper");e.hidden=!1;const c=document.querySelector(".js-edit-payment-method-btn");c.hidden=!0;const s=document.querySelector("#z_hppm_iframe");s!=null&&(s.setAttribute("height","100%"),s.setAttribute("width","100%")),window.dispatchEvent(new Event("resize"))}}oe(Ot,"handleEditPaymentMethod");function Rt(w){if(!(w.currentTarget instanceof Element))return;const N=document.querySelector(".js-payment-summary-wrapper");N.hidden=!1;const t=document.querySelector(".js-payment-method-section-wrapper");t.hidden=!0;const n=document.querySelector(".js-edit-payment-method-btn");n.hidden=!1}oe(Rt,"handleCancelEditPaymentMethod");function Mt(w){w.currentTarget instanceof Element&&rt()}oe(Mt,"handleAddBillingInformation");function rt(){const w=document.querySelector(".js-billing-information-summary-wrapper");w.hidden=!0;const N=document.querySelector(".js-billing-information-collection-wrapper");N.hidden=!1;const t=document.querySelector(".js-add-billing-information-btn");t.hidden=!0;const n=document.querySelector(".js-no-billing-information-message");n.hidden=!0}oe(rt,"addBillingInformationHelper");function Lt(w){if(!(w.currentTarget instanceof Element))return;const N=document.querySelector(".js-billing-information-summary-wrapper");N.hidden=!1;const t=document.querySelector(".js-billing-information-collection-wrapper");t.hidden=!0;const n=document.querySelector(".js-add-billing-information-btn");n.hidden=!1;const e=document.querySelector(".js-no-billing-information-message");e.hidden=!1}oe(Lt,"handleCancelAddBillingInformation");function Dt(w){if(!(w.currentTarget instanceof Element))return;const N=document.querySelector(".js-update-billing-information-banner");N.hidden=!0}oe(Dt,"handleDismissMessage")}}});
//# sourceMappingURL=billing-1ef75b36.js.map
